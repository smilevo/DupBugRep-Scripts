fixed kubelet typo;Where is a typo in contribinitsystemdenvironkubelet       The text was updated successfully but these errors were encountered
Allow kubecfg to pull urls via c;Only valid 'http' and 'https' urls will be loaded. Very handy when writing examples that should work just by copying and pasting.       The text was updated successfully but these errors were encountered
Update kubeadm token to work as expected;What this PR does why we need itFollows up Updates kubeadm token to work as discussed in httpsdocs.google.comdocumentddeJYPIFLmhGjDVaqrswErIrVmtwJgovtLnPCDxPUeditPromotes the command from the ex subcommand which now is named alpha for clarity. This will later become kubeadm alpha phaseWhich issue this PR fixes optional in fixes issue number fixes issuenumber ... format will close that issue when PR gets merged fixes Special notes for your reviewerExample UXsudo .kubeadm token helpThis command will manage Bootstrap Token for you. Please note this usage of this command is optional and mostly for advanced users.In short Bootstrap Tokens are used for establishing bidirectional trust between a client and a server.A Bootstrap Token can be used when a client for example a node that's about to join the cluster needsto trust the server it is talking to. Then a Bootstrap Token with the signing usage can be used.Bootstrap Tokens can also function as a way to allow shortlived authentication to the API Serverthe token serves as a way for the API Server to trust the client for example for doing the TLS Bootstrap.What is a Bootstrap Token more exactly It is a Secret in the kubesystem namespace of type bootstrap.kubernetes.iotoken. A Bootstrap Token must be of the form az.az the former part is the public Token ID and the latter is the Token Secret which must be kept private at all circumstances. The name of the Secret must be named bootstraptokentokenid.You can read more about Bootstrap Tokens in this proposal httpsgithub.comkubernetescommunityblobmastercontributorsdesignproposalsbootstrapdiscovery.mdUsage kubeadm token flags kubeadm token commandAvailable Commands create Create bootstrap tokens on the server. delete Delete bootstrap tokens on the server. generate Generate and print a bootstrap token but do not create it on the server. list List bootstrap tokens on the server.Flags kubeconfig string The KubeConfig file to use for talking to the cluster default etckubernetesadmin.confUse kubeadm token command help for more information about a command.lucasTHENINJAluxaskubernetes sudo .kubeadm token listTOKEN TTL EXPIRES USAGES DESCRIPTIONc.abaabedf forever never authenticationsigning The default bootstrap token generated by 'kubeadm init'.lucasTHENINJAluxaskubernetes sudo .kubeadm token createcea.abbfadebeflucasTHENINJAluxaskubernetes sudo .kubeadm token listTOKEN TTL EXPIRES USAGES DESCRIPTIONc.abaabedf forever never authenticationsigning The default bootstrap token generated by 'kubeadm init'.cea.abbfadebef forever never authenticationsigning nonelucasTHENINJAluxaskubernetes sudo .kubeadm token create stoken s was not of form az\\.azlucasTHENINJAluxaskubernetes sudo .kubeadm token create cea.abbfadebefa token with id cea already existslucasTHENINJAluxaskubernetes sudo .kubeadm token delete cea.abbfadebefbootstrap token with id cea deletedRelease noteNONEdmmcquay jbeda mikedanese errordeveloper pires       The text was updated successfully but these errors were encountered
Cleanup to client initialization in Kubelet;Watching invalid labelfield selectors should errorWatch locks restrict ability to test certain thingsKubelet does not properly distinguish between sources prepare for API changeExtracted from erictune this is all stuff you'll hitlavalamp review please       The text was updated successfully but these errors were encountered
custom resource DeRegistration testcase;deadsk as discussed via IRCBuilt on top of To reproduce Uncomment code in TestDeRegistrationAndReRegistration to reproduce panic       The text was updated successfully
Added version file.;This merge is for which includes version file.       The text was updated successfully but these errors were encountered
Automated cherry pick of;Cherry pick of on release.. Support set user with sshuser flag when running remote       The text was updated successfully but these errors were encountered
Hyperkube don't parse args for all servers;Kubectl consists of many subcommands.Each subcommand has its own way of setting flags.Parsing of args of kubectl is not done under cmdkubectl directory.It is done inside of pkgkubectl.When kubectl is added to hyperkube as a server its args are parsed when kubectl's flag are not yet defined.So when running kubectl with any flag the flag is not recognized.This PR adds support for disabling the parsing inside of hyperkube when a server is created.Commands with enabled arg parsingkubeapiserverkubecontrollermanagerkubeproxykubeschedulerkubeletCommands with disabled arg parsingkubectl       The text was updated successfully but these errors were encountered
Fix gendocs on master;master seems to be broken right now       The text was updated successfully but these errors were encountered
Updated wording from minion to node in clustercentos according to;       The text was updated successfully but these errors were encountered
Change port names to avoid validation failure;Addresses        The text was updated successfully but these errors were encountered
Support status.hostIP in downward API;What this PR does why we need itExposes pod's hostIP node IP via downward API.Which issue this PR fixes optional in fixes issue number fixes issuenumber ... format will close that issue when PR gets mergedfixes Special notes for your reviewerNot sure if there's more documentation that's needed please point me in the right direction and I will add some        The text was updated successfully but these errors were encountered
DeltaFIFO.Pop exits when the stop channel closes;Allow Controller.Run to exit properly when the stop channel is closed.fixes This change is        The text was updated successfully but these errors were encountered
kubeadm fixed small typo in alpha warning;Small typo in the alpha warning that I noticed and fixed.This change is        The text was updated successfully but these errors were encountered
This commit fixes kubectl get nodes output and makes it more sane. It also fixes related test case resourceprintertest.;In its current form kubectl get nodes output seems misaligned and sometimes incorrect too as it shows for examplekubectl get nodesNAME LABELS STATUSfednode Schedulable namefednodelabel NotReadyThis patch combines SchedulableUnschedubale with ReadyNotReadyUnknown in STATUS field. So if unschedulable bit is true the output will beNAME LABELS STATUSfednode namefednodelabel ReadyUnschedubaleor STATUS will be NotReadyUnschedulable or Unknown Unschedulable.If unschedulable bit is false by default it will showfednode namefednodelabel ReadySchedubaleIf Node is in Ready state. But if Node is in NotReady or Unkown state it will showfednode namefednodelabel NotReadyUnSchedubale or UnknownUnschedulableCurrently it shows Schedulable even with NotReady or Unknown which seems incorrect as it does not make any sense to output a Node as Schedulable when in NotReadyUnknown state. As soon as a Node becomes Ready it will show STATUS as ReadySchedulable.       The text was updated successfully but these errors were encountered
Fix for multiple thirdparty resources with same group;More details here lavalampThis change is        The text was updated successfully but these errors were encountered
Kubelet Checkpoint container information into one container info label.;Fixes No uppercases in labels nowFixes This PRDivide all information needs to be checkpointed into two partscontainerMeta all fields in containerMeta will be stored in separate labels. We may also want to use these labels as list filters in the future. The containerMeta should be seldom or even never changed.containerInfo the containerInfo will be saved in one label as a whole.Checkpoint last container status into container info label. With this we can remove historical containers as soon as the new container is created see . However because kubelet may still work with old containers which don't have this label we still can't rely on this for now. Currently we only use the lastStatus to calculate the restart count. yujuhong dchen Can we assume that people will always drain node before updating kubelet If so we can start relying on labels.Add label version. Whenever we make any incompatible changes to the labels we should bump up the label version and try to support backward compatibility relying on label version.Notice that with this PR kubelet will stop reading restart count and termination message path from labels added in v.. It means that if someone does kubelet live upgrade from v. to v. the termination message of old containers will be lost and restart count of the new container will be recalculated from .We could add some code to prevent this but that will make the code a bit more complex. Because restart count is just best effort and termination message path is seldom used can we just ignore that like what we have done in v. WDYT yujuhongyujuhong vishhcc kubernetessignodeThis change is        The text was updated successfully but these errors were encountered
Add client field mappings for v;When making client requests that contain field selectors against v errors show up in the log about field mappings not existing for that version. This adds mappings equal to vbeta for v       The text was updated successfully but these errors were encountered
Remove unused coreosgoetcd fork from thirdparty;The only usage of this was removed via        The text was updated successfully but these errors were encountered
bugfix prevent API server cache listwatch from other namespaces;The previous code has a issueAssume we have two namespaces ns and ns when client listwatch key registrypodsns API server cache will also return pods in ns since ns is a prefix of nsThis PR fix this issue. wojtekt       The text was updated successfully but these errors were encountered
add basic auth option to apiserver in local cluster;Add this can fix liggitt       The text was updated successfully but these errors were encountered
Fix doc generation on Macs;The find util on macs require a path. Linux does not. So give it thepath to work on both.       The text was updated successfully but these errors were encountered
Add script directory for various testing tasks;Adding script directory for various testing tasksStarting to address the issues in        The text was updated successfully but these errors were encountered
Updated command to launch etcd docker container in mesos documentation;The command to run the etcd docker container didn't work for me. I kept getting a connection refused error when trying to CURL all the exposed ports of the container.I was able to get it to work properly by referencing the command to launch the etcd container by using the command in the etcd documentation httpsgithub.comcoreosetcdblobmasterDocumentationdockerguide.mdThis PR updates the docs so that the etcd container launches correctly.       The text was updated successfully but these errors were encountered
Update cni in vendor and refactor cniNetworkPlugin for hypervisor runtime;refactor cniNetworkPlugin for reusing it in all kinds of runtime.Ref containernetworkingcni        The text was updated successfully but these errors were encountered
Typo fix Change logging function to formatting version;What this PR does why we need itSlightly broken logging messageI . kubeletnodestatus.go Deleted old node object qkubernetescitkubernetescr       The text was updated successfully but these errors were encountered
kubectlrun remove log object created when dryruntrue;Since no object is created when dryruntrue there is no point in showing log object created.bug Bugzilla link httpsbugzilla.redhat.comshowbug.cgiidThis is the output on my instance kubectl run example imagebusybox dryruntrueNAME DESIRED CURRENT UPTODATE AVAILABLE AGEexample unknown       The text was updated successfully but these errors were encountered
Move service strategy to registryservice package;Ref Fix todo TODO move to a service specific package. in apiresttypes.go. Move svcStrategy to registryservice package in this PR.       The text was updated successfully but these errors were encountered
Fix nil pointer in etcd tools;Fixes cc smarterclayton       The text was updated successfully but these errors were encountered
Revert first steps to adding kubelet option to enable debugger mode next steps is to included a warning message.;This reverts commit db.Kubelet already defaults to enabling debug handlers. I don't think we want to surface every possible option in localupcluster.sh       The text was updated successfully but these errors were encountered
AWS Fix detaching volumes of deleted pods;When attachDiskAndVerify gives up waiting for a volume to be attached AWS may be still trying to attach the volume.If the pod that wants the volume attached still exists kubelet will retry attaching the volume on next kubelet sync and everything is allright.However if the pod is deleted AWS is still trying to attach the volume and it may eventually succeed. We end up with a volume attached to a node and no pod for it. Nobody will detach the volume.As fix just fire DetachVolume to AWS when attachDiskAndVerify gives up without waiting for result. If associated pod still exists it will try to attach the volume soon. If the pod is deleted AWS will detach the volume or stop attaching it.Fixes There are several tiny patches the last one bringing everything together. I tested it really fixes the referenced issue still I am open for better suggestions how to fix it in a better way.justinsb kubernetessigstorage       The text was updated successfully but these errors were encountered
Fix . Delete pod dir only after volume TearDown.;The volume dir is deleted before mounted volumes are torn down. Asa result all the content of the mounted volume is deleted.This patch reorders the calls so that volumes and torn down beforethe pod dir is deleted and it moves both calls to killPod.This fixes        The text was updated successfully but these errors were encountered
Workaround part of etcd slowness.;Ref With this PR in practise etcd watcher no longer sends GET requests for all update events because in practise we are using cacher which always sets Filter to Everything.This should help and hopefully also unblock some scale testing with etcd before the proper fix is in.xiang hongchaodeng timothyscThis change is        The text was updated successfully but these errors were encountered
Arrange for elasticsearch to shutdown cleanly;Kubernetes initiates graceful shutdown by sending SIGTERM to pid whichis exactly what elasticsearch is expecting goodThe way the existing startup scripts worked however this signal arrived atthe shell wrapper not elasticsearch and the shell wrapper exitedkilling the container immediately badBefore this change Ss binsh c run.sh S binbash run.sh S \ binsu c elasticsearchbinelasticsearch elasticsearch Ss \ sh c elasticsearchbinelasticsearch Sl \ usrlibjvmjavaopenjdkamdjrebinjava ... org.elasticsearch.bootstrap.Elasticsearch startAfter this change Ssl usrlibjvmjavaopenjdkamdjrebinjava ... org.elasticsearch.bootstrap.Elasticsearch start       The text was updated successfully but these errors were encountered
allow for unset in kubectl.sh;Running clusterkubectl.sh with no arguments resulted in the followingerror.clusterkubectl.sh line unbound variableWith this change the kubectl binary is called without a commandwhich results in a printout of the the usage text.       The text was updated successfully but these errors were encountered
Allow specification of remote in hackcherrypickpull.sh;The hub tool seems to encourgae setting origin to be the upstream andusername to be your personal remote. Allow users that follow thisapproach to specify USERREMOTE when calling cherrypickpull.shThis change is        The text was updated successfully but these errors were encountered
Enable profiling on kubelet healthz port;This and scheduler are the last two kubeapps without an enableprofiling flag.       The text was updated successfully but these errors were encountered
Fed target cluster by label for sync controller;use clusterselector w federated configmap deploysWhat this PR does why we need it adds the ability to indicate objects are sent to subsets of federated clusters ref Release noteThe annotation federation.alpha.kubernetes.ioclusterselector can be used with Configmap Daemonset Secret objects to target federated clusters by label.       The text was updated successfully but these errors were encountered
kubectl run to produce deployment and job;Fixes .Implement generators for deployment deploymentvbeta and job jobvbeta.Make kubectl run default to produce rcs and jobs instead of rcs and pods. Will replace rcs with deployments once Deployment reaches beta in the future not in this PR.If restartAlways a rc will be generated otherwise a job will be generated.TODO finish jobdeployment related flags and help text for kubectl run cmd finish jobdeployment fields for generator add testskuberneteskubectl nikhiljindal ironcladlou       The text was updated successfully but these errors were encountered
fix certificates flake;Fixes Fixes        The text was updated successfully but these errors were encountered
Activate hairpin mode when sync'ing pods. Fixes;Fixes . This gets the ability to use iptables proxying one step closer.       The text was updated successfully but these errors were encountered
generated DeepCopy without a function on a struct pointer is wrong;in and out are both pointers to pointers so in has to be cast toType not Type.sttts hit this while debugging something else most everything should be generated but in this case the type is wrongThis change is        The text was updated successfully but these errors were encountered
Added instructions on turning on dynamic provisioning for testing.;HostPath volumes are not automatically provisioned unless we pass in enablehostpathprovisioner to the controller manager. This was not mentioned in the docs previously leading to questions like this.       The text was updated successfully but these errors were encountered
fix mesos unit tests;master ci is broken??£ kubernetes gitmaster ?£ù make test WHATcontribmesospkgschedulerpodtaskhacktestgo.sh contribmesospkgschedulerpodtask Running tests for APIVersion vextensionsvbetametricsvalpha with etcdPrefix registry Running tests without code coverage ks.iokubernetescontribmesospkgschedulerpodtaskoutputlocalgosrcks.iokubernetescontribmesospkgschedulerpodtaskportmappingtest.go too many arguments in call to NewFAIL ks.iokubernetescontribmesospkgschedulerpodtask build failed Error in hacktestgo.sh 'return rc' exited with status Call stack hacktestgo.sh main...Exiting with status make test Error        The text was updated successfully but these errors were encountered
declear roles as rolesarray internally when installing on ubuntu;There are actually two roles setting in ubuntu installation scripts.One is roles as string which can be set as env and then used in scripts.The other is roles as array which is used by internal handling tolocate specific role by offset.This patch tries to distinguish roles meaning by declearing the secondas rolesarray thus eliminating its ambiguity.       The text was updated successfully but these errors were encountered
Fix make help info;What this PR does why we need itfixes some incorrect help infoWhich issue this PR fixes optional in fixes issue number fixes issuenumber ... format will close that issue when PR gets merged fixes Special notes for your reviewerRelease noteNONE       The text was updated successfully but these errors were encountered
fix cross build for kubeletcm;Fixes a break in the cross buildpkgkubeletcmcgroupmanagerunsupported.go cannot use unsupportedCgroupManager literal type unsupportedCgroupManager as type CgroupManager in assignment unsupportedCgroupManager does not implement CgroupManager missing CgroupName method...pkgkubeletcmcontainermanagerunsupported.go cannot use unsupportedPodContainerManager literal type unsupportedPodContainerManager as type PodContainerManager in return argument unsupportedPodContainerManager does not implement PodContainerManager missing Destroy methodderekwaynecarr liggitt ncdcThis change is        The text was updated successfully but these errors were encountered
Fix update.sh;satnam filbranden       The text was updated successfully but these errors were encountered
Fix incorrect username;For work on issue My mistake used goog username rather than github. Duh.Wish we had a federated identity authority we all trusted PNONE       The text was updated successfully but these errors were encountered
Fix volume states out of sync problem after kubelet restarts;When kubelet restarts all the information about the volumes will begone from actualdesired states. When update node status with mountedvolumes the volume list might be empty although there are still volumesare mounted and in turn causing master to detach those volumes sincethey are not in the mounted volumes list. This fix is to make sure onlyupdate mounted volumes list after reconciler starts sync states process.This sync state process will scan the existing volume directories andreconstruct actual states if they are missing.This PR also fixes the problem during orphaned pods' directories. Incase of the pod directory is unmounted but has not yet deleted e.g.interrupted with kubelet restarts clean up routine will delete thedirectory so that the pod directoriy could be cleaned up it is safe todelete directory since it is no longer mountedThe third issue this PR fixes is that during reconstruct volume inactual state mounter could not be nil since it is required for creatingcontainer.VolumeMap. If it is nil it might cause nil pointer exceptionin kubelet.Detailed design proposal is Fix volume states out of sync problem after kubelet restartsThis change is        The text was updated successfully but these errors were encountered
Fix make test on mac pkgkubelet;No description provided.        The text was updated successfully but these errors were encountered
fix delete kubeadm token;fix kuberneteskubeadm       The text was updated successfully but these errors were encountered
Support node label update;This PR is a basic support for node label update. brendanburns In case of label change do we trigger a reschedule of current pods on updated node It's possible for the label change to break schedule predicate.derekwaynecarr What is the status of node namespace. Our api takes context obj but I didn't see how it is used in ks. Are we going to only use default for node kubectl will check for namespace when updating I'm not sure what namespace we'd use for node update.       The text was updated successfully but these errors were encountered
fix local flag for kubectl commands;Fixes Release noteNONEFixes the local flag for kubectl set ... subcommands.As of the . release PrinterForCommand was updated to use a mapper and typer for unstructured objects which further prevented the use of local when there was no connection to an api server.before with no connection to a server kubectl set resources f pod.json limitscpummemoryMi localerror unable to connect to a server to handle pods Get https...api dial tcp ... getsockopt connection refusedafter with no connection to a server kubectl set resources f pod.json limitscpummemoryMi localNAME READY STATUS RESTARTS AGEmypod unknowncc smarterclayton fabianofranz       The text was updated successfully but these errors were encountered
statssummary impl;Implement statssummary endpoint by filling in summary data from cAdvisor. Remaining work for this PR includesget more reliable container status info. current stats are missing some containers proxy and infraadd testsIgnore first commits they will be merged through separate PRs.       The text was updated successfully but these errors were encountered
Add SELinuxOptions to LinuxPodSandboxConfig;Without adding this there is no way that one can setcorrect SELinux labels for a podinfra like container.yujuhong PTALcc rhatdan yifangu euank feiskyerSignedoffby Mrunal Patel mpatelredhat.comThis change is        The text was updated successfully but these errors were encountered
Fix typo that caused an error at end of vagrant up;There was a regression made in a recent change that introduced this typo.       The text was updated successfully but these errors were encountered
Use config sources for Kubelet switch to podFullName;As discussed in and also a side discussion about abstracting the Kubelet from being directly dependent on etcd start refactoring config service to decouple sources of config from sync loop and switch from Manifest.ID Pod Full Name in the Kubelet.Simplifies the Kubelet Run step by requiring configuration to be defined up front and an update channel passed into the Kubelet.       The text was updated successfully but these errors were encountered
Fix kubectl run dryrun with i or attach;Don't attempt to attach to the pod in dry run mode.Fixes This change is        The text was updated successfully but these errors were encountered
Add some check about image garbagecollect;No description provided.        The text was updated successfully but these errors were encountered
allow kubectl proxy to handle specified reject methods and default to?Çª;What this PR does why we need itkubect proxy command had a bug and was not supporting feature to reject http methodsrejectmethods'POSTPUTPATCH'this was due to missing filter for RejectMethods in kubectlcmdproxy.goThis PR adds the desired flag however to retain the current behaviour of kubectl proxy the Default Rejected methods are changed from 'POSTPUTPATCH' to '' i.e. none.Issue not created and no existing issue found       The text was updated successfully but these errors were encountered
use dedent for configgetcontexts.go;use dedent for configgetcontexts.goThis change is        The text was updated successfully but these errors were encountered
pod spec was not validating envFrom;What this PR does why we need itadds missing validation for envFrom in a pod.spec.containers.envFromfixes validation of pod.spec.containers.env.configMapRef.namefixes validation of pod.spec.containers.env.secretRef.nameWhich issue this PR fixesFixes        The text was updated successfully but these errors were encountered
Fix conversion error in limit request ratio enforcement;The code that enforced the ratio between limit and request had a precision bug.For examplerequest was mlimit was maxLimitRequestRatio was We should have got an error because the ratio between limit and request was but we were computing a value of as what should be enforced. As a result was always .Fixed the code to not have this precision bug when enforcing ratio and added test case to enforce func.       The text was updated successfully but these errors were encountered
Change default maxpods in kubelet to;No description provided.        The text was updated successfully but these errors were encountered
Fix builds on selinux systems;The build was broken on SELinux enabled systems.       The text was updated successfully but these errors were encountered
Delete pool before getting Node Address unsuccessfully;What this PR does why we need itWhich issue this PR fixes optional in fixes issue number issuenumber ... format will close that issue when PR gets merged fixes Special notes for your reviewerRelease noteWhen calls getAddressByName ks returns error without deletingthe pool of openstack. So many lbpool will be left over. We shoulddelete it.This change is        The text was updated successfully but these errors were encountered
Address outstanding review comments in .;Address outstanding review comments in .       The text was updated successfully but these errors were encountered
to fix comment for apis.extensions.JobCondition;Nit and no real code here but the comment is erroneous. See       The text was updated successfully but these errors were encountered
fix master to pass hooksprecommit;thockin quintonhoole       The text was updated successfully but these errors were encountered
integrating labels selector in api step;bgrant smarterclayton thockinpkglabelsselector.go the labels.Selector is now a slice of labels.Requirement since the nil of the previous type was a mess.replaced mapstringstring selector with labels.Selectorin vbeta the selector are stored
Add protection for the pods member varaible.;Partially addresses        The text was updated successfully but these errors were encountered
Fix cockroachdb statefulset ee test by adding insecure flag;What this PR does why we need itThis fixes the cochroachdb statefulset ee test which are currently failing httpskstestgrid.appspot.comgooglegcegcigcestatefulsetincludefilterbyregexEOverallCTestIt sets the insecure flag on the cockroackdb command which is needed when no certificates are configured. Full error httpsksgubernator.appspot.combuildkubernetesjenkinslogscikuberneteseegcigcestatefulsetWhich issue this PR fixes optional in fixes issue number fixes issuenumber ... format will close that issue when PR gets merged fixes I failed to find a related issue.Special notes for your reviewerRelease note       The text was updated successfully but these errors were encountered
Bare metal loadblancers;Because fun. thockin       The text was updated successfully but these errors were encountered
Move pkgvolumetesting.go to pkgvolumetestingfakes.go;Fix It is the convention to use a specific testing directory within thepackage. This commit moves the file and also updates all references tothe elements of the package.Signedoffby mattjmcnaughton mattjmcnaughtongmail.comThis change is        The text was updated successfully but these errors were encountered
Do not prompt for gcloud update by default;No description provided.        The text was updated successfully but these errors were encountered
Fix new docker config format for private registries;Fix        The text was updated successfully but these errors were encountered
fix cluster scoped selflink;Might fix definitely fixes the clusterscoped resource problem. Looks like it was just a typo when compared against httpsgithub.comkuberneteskubernetesblobmasterstagingsrcks.ioapiserverpkgendpointsinstaller.goLadohe DirectXMan       The text was updated successfully but these errors were encountered
fix kubelet tls overwrite issue;lavalamp apply the same thing to kubelet. dchen ptal.This change is        The text was updated successfully but these errors were encountered
update kubectl help output for better organization;Pull Request GuidelinesPlease read our contributor guidelines.See our developer guide.Follow the instructions for labeling and writing a release note for this PR in the block below. Use the releasenote labels to set the release note state  Clear this block to use the PR title as the release note OR Enter your extended release note hereThis change is        The text was updated successfully but these errors were encountered
Move CIDR allocation logic away from nodecontroller.go;Refactoring for cc fgrzadkowski wojtekt mqliang       The text was updated successfully but these errors were encountered
GarbageCollector Adding garbage collector controller;Garbage collector is an alpha feature and is disabled by default. Garbage collector deletes the dependent objects when the owner object is deleted. The ownerdependent relationship is established by setting the metadata.ownerReferences field of the dependent object to the owner object. In . release the metadata.ownerReferences has to be set manually by the user. Garbage collector is disabled by default. It can be enabled by setting the enablegarbagecollectortrue when starting the controller manager.Adding the propagator and garbage processor of the gc.Design doc is at httpsgithub.comkuberneteskubernetesblobmasterdocsproposalsgarbagecollection.mdThis change is        The text was updated successfully but these errors were encountered
Refactor volume operation log and error messages;What this PR does why we need itAdds wrappers for volumespecific error and log messages. Each message has a simple version that can be displayed to the user and a detailed version that can be used in logs. I also tried to cleanup the messages that are used for events.Which issue this PR fixes optional in fixes issue number fixes issuenumber ... format will close that issue when PR gets merged fixes Special notes for your reviewerpkgkubeletvolumemanagerreconcilerreconciler.go can be refactored too. I can do that after this one.Release noteNONE       The text was updated successfully but these errors were encountered
Removed unused imports from mesos contrib.;Removed the unused imports from the main.gos.Fixes This change is        The text was updated successfully but these errors were encountered
Federationinitd Use the right service names in controller manager.;Please review only the last commit here. This is based on PR which will be reviewed independently.Design Doc PR cc kubernetessigclusterfederation nikhiljindalThis change is        The text was updated successfully but these errors were encountered
Fix reflector test;Fix piosz       The text was updated successfully but these errors were encountered
Munger;thockin these are my latest changes.       The text was updated successfully but these errors were encountered
fix kubectl edit f FILE;fix        The text was updated successfully but these errors were encountered
Update etcdclient godep to ..;This transitively level sets the godeps to yank in the .. client.Currently WIP bc it required some regen and I had some weird local permissions issue.xref cc xiang mml       The text was updated successfully but these errors were encountered
Refine kubectl doc;No description provided.        The text was updated successfully but these errors were encountered
Add locks in HPA test;Fixes        The text was updated successfully but these errors were encountered
add a return value for remove all test file;I think we should add a return value tempDir that we can remove all tmp files after the test case over.This change is        The text was updated successfully but these errors were encountered
CRI Implement Dockershim Checkpoint;refer kubernetescommunity       The text was updated successfully but these errors were encountered
Fixed incorectly displayed min replicas in kubectl get hpa;cc fgrzadkowski jszczepkowski       The text was updated successfully but these errors were encountered
modify loglevel;I think it's better to log in here as a warning level.Because it may cause the kubeporxy not to work properly.       The text was updated successfully but these errors were encountered
Fix a crash for kubelet when without EtcdClient.;Authored by dchen commit ef       The text was updated successfully but these errors were encountered
improve the osx build experience;give the dockermachine VM more memory and access to all CPU coresmake DOCKERMACHINENAME not readonly beacuse it is set by dockermachineredirect stderr to ignore unhelpful error messagesunquote 'dockermachine create' argumentI am on OSX and having a difficult time getting started. Is the precommit hook supposed to work on OSX       The text was updated successfully but these errors were encountered
Fix cadvisorunsupported and the crossbuild;Resolves a bug in the cadvisorunsupported.go code.Fixes Introduced by We should consider to cherrypick this as also was cherrypickedcc kubernetessigtesting vishh dashpole jessfrazFix cadvisorunsupported and the crossbuildThis change is        The text was updated successfully but these errors were encountered
Federation Segregate DNS related code to separate controller;What this PR does why we need itThis is the continuation of service controller refactor work as outlined in This PR segregates DNS related code from service controller to another controller servicedns controller which manages the DNS records on the configured DNS provider.servicedns controller monitors the federated services for the ingress annotations and createupdatedelete DNS records accordingly.servicedns controller can be optionally disabled and DNS record management could be done by third party components by monitoring the ingress annotations on federated services. This would enable something like federation middleware for CoreDNS where federation api server could be used as a backend to CoreDNS eliminating the need for etcd storage.Special notes for your reviewerRelease noteFederation A new controller for managing DNS records is introduced which can be optionally disabled to enable third party components to manage DNS records for federated services.cc kubernetessigfederationprreviews       The text was updated successfully but these errors were encountered
ensure pkgutilmount compiles crosses;What this PR does why we need itosx doesn't buildWhich issue this PR fixes optional in fixes issue number issuenumber ... format will close that issue when PR gets merged fixes Special notes for your reviewerRelease notemove compile time check from linux code to generic coderemove duplication of and to resolve This change is        The text was updated successfully but these errors were encountered
Add timeout in CLI waiting for autoremove;This makes sure the CLI doesn't hang in case for whatever reason anevent never comes.       The text was updated successfully but these errors were encountered
Update runc;Found some issues when working on which looked unrelated to that PRbut may be related to other changes.Signedoffby Justin Cormack justin.cormackdocker.com       The text was updated successfully but these errors were encountered
Send Name and ID when stating stopped containers;When docker stats stopped containers client will get empty stats datathis commit will gurantee client always get Name and ID field sothat it can format with ID and Name fields successfully.Signedoffby Zhang Wei zhangweihuawei.comThis commit fixes panic when execute stats commanduse format .Name with all when there're exited containers.use format .Name while stating exited container.The root cause is when stating an exited container the result from theapi didn't contain the Name and ID field which will make formatprocess panic.Panic log is like thispanic runtime error slice bounds out of range recoveredpanic runtime error slice bounds out of rangegoroutine runningpanicxbf xcusrlocalgosrcruntimepanic.go xatexttemplate.errRecoverxceusrlocalgosrctexttemplateexec.go xadpanicxbf xcusrlocalgosrcruntimepanic.go xgithub.comdockerdockerclicommandformatter.containerStatsContext.Namexcx xgosrcgithub.comdockerdockerclicommandformatterstats.goxreflect.Value.callxbaa xc x xbe xxbcf x x xdb x ...usrlocalgosrcreflectvalue.go xcreflect.Value.Callxbaa xc x xbcf x xxc xb xbusrlocalgosrcreflectvalue.go xatexttemplate.state.evalCallxc xbaa xcx xbaa xc x xfa xceaxcde ...usrlocalgosrctexttemplateexec.go xSignedoffby Zhang Wei zhangweihuawei.comIntroduced in ping vdemeester       The text was updated successfully but these errors were encountered
volume create error on conflict option;fixes Signedoffby Kun Zhang zkazuregmail.com       The text was updated successfully but these errors were encountered
Change shm mode to;Fixes DockerDCO.Signedoffby Michael Crosby michaelcrosbymichael.com github crosbymichael       The text was updated successfully but these errors were encountered
Fix ADD remote issue. Different file's content hit the same cache;Force reading of downloaded file contents to obtain the checksum used by cache validation.DockerDCO.Signedoffby German Del Zotto germndz.com.ar github GermanDZ       The text was updated successfully but these errors were encountered
Proposal docker ps add fields for ordering and column selection;apiclientcommands.go Refactor CmdPs to use a fields list ofcharacters to determine which columns to print on docker psinvocation.This adds an ability for the docker command to print the columns ofoutput in arbitrary order.This is nominally related to Signedoffby Jeff Mickey jcodemac.net       The text was updated successfully but these errors were encountered
Fix to avoid a compile error due to float to int truncation with GCCGO;The unit test pkgunitssizetest.go fails with GCCGO due to a compilation errorinagakiblackupstreamsrcgithub.comdockerdockerpkgunits go versiongo version gccgo GCC .. experimental linuxamdinagakiblackupstreamsrcgithub.comdockerdockerpkgunits go test homeinagakiupstreamsrcgithub.comdockerdockerpkgunits.sizetest.go error floating point constant truncated to integer assertEqualst . PB HumanSize.PB FAIL homeinagakiupstreamsrcgithub.comdockerdockerpkgunits build failedinagakiblackupstreamsrcgithub.comdockerdockerpkgunitsAccording to the discussion on GCC Bugzilla this is due to the difference between GCCGO and GC in the implementations of floating point constant expression. The language specifies that a compiler raises an error when a floating point constant expression is truncated to integer a precision of the internal representation is implementationdependent. While my workaround is modifying sizetest.go asassertEqualst . PB HumanSizeintfloat.PB is it better to modify the parameter of HumanSize from int to float like BytesSizeSignedoffby Tatsushi Inagaki ejp.ibm.com       The text was updated successfully but these errors were encountered
change url for jfrazellego;Signedoffby Jessica Frazelle acidburndocker.com       The text was updated successfully but these errors were encountered
add cpu.cfsperiodus support;Signedoffby Ma Shimiao mashimiao.fnstcn.fujitsu.comWe can use this to control cpu period and quota of a container.       The text was updated successfully but these errors were encountered
Remove lpthread and ldl from ldflags;There is no need in those flags now when we use amalgamated sqlite frommattngosqlite.       The text was updated successfully but these errors were encountered
load authConfig only when needed and fix useless WARNING;Fixes        The text was updated successfully but these errors were encountered
Allow mknod with systemd cgroup implementation;DockerDCO.Signedoffby Michael Crosby michaelcrosbymichael.com github crosbymichael       The text was updated successfully but these errors were encountered
Update instructions to build packages on Debian wheezy;This should fix issue        The text was updated successfully but these errors were encountered
Fix the bug of docker import command when import a image with a tag use format 'URL| REPOSITORYTAG';In latest version ..when use command 'docker import' to import a image with a tag use format 'URL|REPOSITORYTAG'it will return a error message shows that the repository name is invalidfor examplerootlocalhost images tar c . | docker import testv Invalid repository name testv only az. are allowedIn previous versionit will parse the Arg which value is 'REPOSITORYTAG' get the REPOSITORY and TAGthen check if REPOSITORY can be resolvedbut in the .. version when import a image with a tag use format 'URL| REPOSITORYTAG'it will check the variable 'repository' which value is Arg directlybut in fact the value of variable 'repository' is 'REPOSITORYTAG' which contains a colon and colon is not in character set az.so the error occurred.I add codes to call parsers.ParseRepositoryTag function to parse variable 'repository' and return the REPOSITORY which store in variable 'repo'then check the variable 'repo'.Fixes        The text was updated successfully but these errors were encountered
Fix racedeadlock in v plugin handlers;When a plugin is activated and then plugins.Handle is called toregister a new handler for a given plugin type a deadlock occurs for anything which calls waitActive including Get and GetAll.This happens because Handle is setting activated to false toensure that plugin handlers are run on next activation.Maybe these handlers should be called immediately for any plugins whichare already registered... but to preserve the existing behavior whilefixing the deadlock track if handlers have been run on plugins andreset when a new handler is registered.The simplest way to reproduce the deadlock with Docker is to add a v foo to the test container created for the external graphdriver tests.ping mavenugo anusharagunathan tiborvass       The text was updated successfully but these errors were encountered
exec docs syntax fix;The flags must come before the container name.       The text was updated successfully but these errors were encountered
Prevent DNS server conflicts in CreateBridgeIface;Fixes Read etcresolv.conf and extract listed nameservers. Format them as CIDR blocks ...Check for conflicts when generating a bridge network blockAdd tests to cover extensions in utils and network       The text was updated successfully but these errors were encountered
Fix positive case test.;Signedoffby Allen Madsen blatyogmail.com was incorrect. It was testing that two pointers were not equal instead that the structs were equal.       The text was updated successfully but these errors were encountered
Check if the container is running if no event;When there is no event for the container it can happen because of acrash and the container state on the persistent disk will have amismatch between what was in run machine crash .This situation will create an unkillable container in docker becausecontainerd does not see it and it is not running but docker thinks it isand you cannot tell it anything different.This fixes the issue by checking if containerd has the container runningif we do not have an event instead of just returning.Fixes the other half of Signedoffby Michael Crosby crosbymichaelgmail.com       The text was updated successfully but these errors were encountered
Finalize implementation of 'docker build';No description provided.        The text was updated successfully but these errors were encountered
make dockerengine RPM configuration backward compatible with older . docker RPMs;At some point in the conversion from the docker RPM tothe dockerengine RPM the ability to source configuration filesin etcsysconfigdocker etc was lost.This commit adds them back in.Specifically this is an issue in the CentOS dockerengine . RPMreferenced on this page httpsdocs.docker.cominstallationcentosRelated issues include       The text was updated successfully but these errors were encountered
Rebased Dockerignore;Close Fixes        The text was updated successfully but these errors were encountered
Clean up localhost resolv logic and add IPv support to regexp;Addresses This cleans up an error in the logic which removes localhost resolversfrom the host resolv.conf at container creation start time. Specificallywhen the determination is made if any nameservers are left afterremoving localhost resolvers it was using a string match on the wordnameserver which could have been anywhere including commented outleading to incorrect situations where no nameservers were left but thedefault ones were not added.This also adds some complexity to the regular expressions for findingnameservers in general as well as matching on localhost resolvers dueto the recent addition of IPv support. Because of IPv support nowavailable in the Docker daemon the resolvconf code is now aware ofIPv enabledisable state and uses that for both filtercleaning ofnameservers as well as adding default Google DNS IPv only vs. IPvand IPv if IPv enabled. For all these changes tests have beenaddedstrengthened to test these additional capabilities.DockerDCO.Signedoffby Phil Estes estesplinux.vnet.ibm.com github estesp       The text was updated successfully but these errors were encountered
Error on missing in docker host.;No description provided.        The text was updated successfully but these errors were encountered
overlayfs search for upstream filesystem name;upstream switched the word from overlayfs to overlay.httpsgit.kernel.orgcgitlinuxkernelgittorvaldslinux.gitcommitidefbdedbebbdedfebPing jfrazelle tiborvass unclejackMight should be cherrypicked since . will release during the docker.. cycleSignedoffby Vincent Batts vbattsredhat.com       The text was updated successfully but these errors were encountered
hackinstall.sh Add Linux Mint support;Linux Mint is based off Ubuntu. The above change renames the lsbdist and distversionvariables to the correct Ubuntu version Linux Mint was built on.       The text was updated successfully but these errors were encountered
Fix GET containersjson emtpy response regression;GET containersjson route used to reply with and empty array when nocontainers where available. Daemon containers list refactor introducedthis bug by declaring an empty slice istead of initializing it as welland it was now replying with null.Signedoffby Antonio Murdaca runcomlinux.com       The text was updated successfully but these errors were encountered
Fix bundle dir for integrationcli;What I didtest.main was unexpectedly created under dockerintegrationclibundlesVERSIONtestintegrationcli directory.This commit moves test.main to dockerbundlesVERSIONtestintegrationcli.cherrypick httpsgithub.comdockerdockerpull
Do not commit after ARG dockerfile command;Since the ARG Dockerfile command doesn't change anything in the imagewe're building there's no point in committing anything after processingthe command.Signedoffby Doug Davis dugus.ibm.com       The text was updated successfully but these errors were encountered
notary delegation integration into docker;Adds newest notary code into docker which includes delegations.Docker changesWe prioritize a releases delegation role as a highest priority but fall back to the targets role if the releases delegation role does not existUpdate integration tests to comply with new notary error formats and server configuration formatNotary changesAlso introduces remote snapshot signing the snapshot key will be maintained on the server to allow for delegation functionalityKey role information is now included in PEM headers rather than as a suffix on the key filename but the code is backwards compatible with older keys on old reposclientsCommand line key rotation for a single key andor having the server manage the snapshot keyCaveatsOld clients cannot push to repos created or updated by new clientsOld clients cannot read keys on new repos created by new clientsSignedoffby Riyaz Faizullabhoy riyaz.faizullabhoydocker.com       The text was updated successfully but these errors were encountered
Fix plugin file descriptor leaks;Ping cpuguyThis PR fixes a newly discovered issue where the retrieval of available plugins would cause file descriptor leaks. This issue is documented here rexrayrexray.The problem becomes worse as documented in dockerarchiveclassicswarm with Swarm since it constantly issues List calls. This eventually and quickly causes open files problems.The following is an example of the old behavior where a List or Get would result in newly initialized plugins and more file descriptors note the and .rootlocalhost vagrant docker volume lssudo lsof |grep rexray.sock|wc lDRIVER VOLUME NAMElocal ikdiidididlocal ikdiidididiiiirexray acabacaddrexray rexray ffebaefrexray defeacebaccbdrexray aafcfbbafedcfrexray ccafdddadfarexray bdacaarexray testabcrexray testabcrootlocalhost vagrant docker volume lssudo lsof |grep rexray.sock|wc lDRIVER VOLUME NAMElocal ikdiidididlocal ikdiidididiiiirexray acabacaddrexray rexray ffebaefrexray defeacebaccbdrexray aafcfbbafedcfrexray ccafdddadfarexray bdacaarexray testabcrexray testabcThe following is a trace after to List methods which shows the rexray.sock being opened initialized twice lstat stat connect getpeername. lstatrundockerpluginsrexray.sock stmodeSIFSOCK| stsize ...  statrundockerpluginsrexray.sock stmodeSIFSOCK| stsize ...  connect safamilyAFLOCAL sunpathrundockerpluginsrexray.sock  getpeername safamilyAFLOCAL sunpathrundockerpluginsrexray.sock  lstatrundockerpluginsrexray.sock stmodeSIFSOCK| stsize ...  statrundockerpluginsrexray.sock stmodeSIFSOCK| stsize ...  connect safamilyAFLOCAL sunpathrundockerpluginsrexray.sock  getpeername safamilyAFLOCAL sunpathrundockerpluginsrexray.sock This is after the fix consistently there are the same amount of descriptors open.rootlocalhost vagrant docker volume ls sudo lsof |grep scaleio|wc lDRIVER VOLUME NAMEscaleio testscaleio testscaleio testscaleio testabcrootlocalhost vagrant docker volume ls sudo lsof |grep scaleio|wc lDRIVER VOLUME NAMEscaleio testscaleio testscaleio testscaleio testabcSignedoffby Clinton Kitson clintonskitsongmail.com       The text was updated successfully but these errors were encountered
Fix testunit run without parallel;Testunit fails when running without parallel because BUILDFLAGSFILE is not created in this conditional branch. This PR moves the code outside of the conditional expression.Signedoffby Fabiano Rosas farosasbr.ibm.comCloses        The text was updated successfully but these errors were encountered
WIPmake remove multiple secret run normally;fix  What I didmake getCliRequestedSecretIDs returned slice have equal length of input sliceadd a secret remove test file How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouragedSignedoffby allencloud allen.sundaocloud.io       The text was updated successfully but these errors were encountered
cherrypick runc install path changed from usrlocalbin to usrlocalsbin;cherrypick into masterfixes closes        The text was updated successfully but these errors were encountered
DON'T PANIC when migrating to native drivers with lxcconf.;Addresses .       The text was updated successfully but these errors were encountered
Update the docker attach section of the Hello World example;This removes the description about sigproxytrue from the example in Hello World. I removed this from the example because it is not currently being used in the example when you use docker attach. Having the description for an option that is not being used in the Hello World example is confusing for new learners of Docker.       The text was updated successfully but these errors were encountered
Fix compilation errors with btrfsprogs.;btrfsprogs. introduces device delete by devidfor this reason btrfsioctlvolargsv's name was encapsulatedin a unionthis patch is for setting btrfsioctlvolargsv's nameusing a C function in order to preserve compatibilitywith all btrfsprogs versionsSignedoffby Julio Montes imc.codergmail.com       The text was updated successfully but these errors were encountered
Use defaultdocker when starting with systemd;No description provided.        The text was updated successfully but these errors were encountered
Add DOCKERHOST env var for client;This env var will set the H flag on the dockerclient.This is the same as doingdocker H ps orexport DOCKERHOSTdocker ps       The text was updated successfully but these errors were encountered
Fix Interactive container hangs when redirecting stdout;These two commits fix bothdocker run rm i ubuntu cat etcpasswd | grep root should not hang issue docker events tmpout should not print control characters to nonterminal STDOUT commit ba       The text was updated successfully but these errors were encountered
Use SSL to fetch the GPG key;If we're going to use curl then at least over https       The text was updated successfully but these errors were encountered
Remove daemon dependency from apiserver.;I think those are the last references to the daemon package we have in the api ?ÄëMove routers initialization to the docker package.Extract inspect types for docker exec.Remove coupling between server reload and daemon config.??£ docker gitremovelastdaemonreferences ag 'dockerdaemon' api??£ docker gitremovelastdaemonreferencesSignedoffby David Calavera david.calaveragmail.com       The text was updated successfully but these errors were encountered
Update ps.rst;I think that this update is correct.       The text was updated successfully but these errors were encountered
Use specParts for volumes from id;DockerDCO.Signedoffby Michael Crosby michaelcrosbymichael.com github crosbymichael       The text was updated successfully but these errors were encountered
update recommended kernel in checkKernel;We already changed docs Should change code as well.Signedoffby Qiang Huang h.huangqianghuawei.com       The text was updated successfully but these errors were encountered
Update in daemon.restore the last fields of globalMap in portallocator;Fixes DockerDCO.Signedoffby Tibor Vass teabeegmail.com github tiborvass       The text was updated successfully but these errors were encountered
Do not ping registry from the cli;Fixes This a problem because the cli was pinging the registry to inspect the transport if not provided. I moved this to the daemon so that all requests to the registries flow thought the daemon. This is true for every command even login expect for this first ping if a registry was provided.DockerDCO.Signedoffby Michael Crosby michaelcrosbymichael.com github crosbymichael       The text was updated successfully but these errors were encountered
Allow RHEL init script to detect daemon start pid failure;If you have some kind of bogus otherargs in etcsysconfigdocker the start script will report started but it's full of lies. This enhances the flow so that if the pidfile never shows up failure to start you get a proper failure message.I also added dots for fun.Signedoffby Jeff Minard jeff.minardcreditkarma.com       The text was updated successfully but these errors were encountered
Move integrationservertest tests to integrationcli;No description provided.        The text was updated successfully but these errors were encountered
Make docker cp bindmount volumes;Allows docker cp to work seamlessly and a lot more cleanly.       The text was updated successfully but these errors were encountered
Image checksums computed using tarsum v;DockerDCO.Signedoffby Josh Hawn josh.hawndocker.com github jlhawn       The text was updated successfully but these errors were encountered
Handle nonascii package names in state.formatlog;Fixes        The text was updated successfully but these errors were encountered
Set newrev var to avoid reference before assignment;Resolves a concern raised by jasonrm in . This should also make ready to close.       The text was updated successfully but these errors were encountered
Remove epoch from version string if present when installing with yum;yum install does not support epoch without the arch and we won't knowwhat the arch will be when it's not provided. It could either be the OSarchitecture or 'noarch' and we don't make that distinction in thepkg.listpkgs return data.Fixes .       The text was updated successfully but these errors were encountered
Make the value extraction a little smarter.;The previous method of splitting on then removing had the problem of leaving a trailing new line making the makeconf.present state always fail if given a valid comparison. It would also fail to cope with inline comments and leadingtrailing whitespace.This code isn't foolproof but works as long as there's no quotes in the comment or the string isn't quoted but the comment does have a quote in it.This is primarily a bug fix so I've submitted it against the . branch but it will want cherry picking over.       The text was updated successfully but these errors were encountered
iptables append rejectwith after jump;Fixes .Fixes .       The text was updated successfully but these errors were encountered
Fix traceback in salt.utils.network.getfqhostname;This traceback occurs when the lookup fails in some way raising anexception.This code is only in develop and does not need to be cherrypicked.       The text was updated successfully but these errors were encountered
factorize call;No description provided.        The text was updated successfully but these errors were encountered
Fix for crossplatform sysctl with test and custom config location when using systemd;When using a custom config path for sysctl states it would fail with an IOErroras it was looking for the defaults which also may not exist as shown below ID net.ipv.tcpkeepaliveintvlFunction sysctl.present Result False Comment An exception occurred in this state Traceback most recent call last File usrlibpython.sitepackagessaltstate.py line in call cdata'kwargs' File usrlibpython.sitepackagessaltstatessysctl.py line in present configured salt'sysctl.show'configfileTrue File usrlibpython.sitepackagessaltmoduleslinuxsysctl.py line in show for line in salt.utils.fopenconfigfilepath File usrlibpython.sitepackagessaltutilsinit.py line in fopen fhandle openargs kwargs IOError Errno No such file or directory 'etcsysctl.dsalt.conf'The corresponding state had a config file specified that was ignored. But this would hold true for anyminion meeting the systemd conditions and not having salt.conf. Now for normal highstate runs the currentand configured options are not run unless test is specified and if the configured check returns none theuser will be notified that there was an issue reading the defaultspecified file.Platforms other than linux also appeared to not have the configfile argument for show that would have probably I did not verify bail out with argument number errors during normal runs.       The text was updated successfully but these errors were encountered
nodedata is a libcloud Node instance which is unsubscriptable;No description provided.        The text was updated successfully but these errors were encountered
Fix lint issues;No description provided.        The text was updated successfully but these errors were encountered
Fix pacman.listupgrades for new pythonshell default.;. sets the default for pythonshell to False so the pipe used inpacman.listupgrades no longer works. The egrep invocation after thepipe has the effect of skipping the first output line which is aninformational message. Instead of piping to egrep we simply skip thefirst line of output when parsing for the available upgrades.       The text was updated successfully but these errors were encountered
salt utils aws encoding fix;What does this PR dorequests api says Response.encoding can sometimes be None httpdocs.pythonrequests.orgenmasterapirequests.Response.encoding and result.text.encode doesn't accept None expects a string.this change prevents unexpected type exceptions and defaults the encoding back to 'utf' the default prior to What issues does this PR fix or reference       The text was updated successfully but these errors were encountered
Revert Fixes secgroup return for ECVPC;As described in this change is dangerous and should be reverted.       The text was updated successfully but these errors were encountered
Prevent DBusException when snapper module is loaded and dbus is not running;What does this PR doThis PR fixes the snapper execution module and prevents from DBusException when loading the snapper module. e.g. dbus is present but is not runningTests writtenNo       The text was updated successfully but these errors were encountered
Restore old refresh logic;This was erroneously changed in aa causing a refresh to not beperformed when refresh is set to None or not passed topkg.latestpkg.installed states.       The text was updated successfully but these errors were encountered
yumpkg Ignore epoch in version comparison for explict versions without an epoch;Also properly handle comparisions for packages with multiple versions.Resolves        The text was updated successfully but these errors were encountered
Fix syntaxerror;No description provided.        The text was updated successfully but these errors were encountered
fixes causing lots of mayham onchange with .. for me;What does this PR donlines and slines were handled differently handle them the same.This causes changes to be present if a line ended with a whitespace. In turn causing mayham in my environment due to using onchange resulting in mutliple unneeded service restarts on every state.apply.What issues does this PR fix or referencePrevious Behavioralways changes if a file contained a line that had a whitespace at the end.New Behavioronly have changes on well actualy changesTests writtenNoAffected. untested but assumed. . and updevelopPlease review Salt's Contributing Guide for best practices.       The text was updated successfully but these errors were encountered
This corrects a syntax error for the sudo command;normally the parameters 'username c' is associated with 'su'       The text was updated successfully but these errors were encountered
set default user variable to the user cmd runs as;What issues does this PR fix or referenceTests writtenNo       The text was updated successfully but these errors were encountered
Backport to .;No description provided.        The text was updated successfully but these errors were encountered
Tweak network address comparisons;Punish ipv addresses that start with '.' more than other ipvaddresses to follow original logic before refactor.Related to Pull Request Signedoffby Sergey Kizunov sergey.kizunovni.com       The text was updated successfully but these errors were encountered
Fix unit tests mocking;What does this PR doFixes the unit tests mocking by not polluting the loader modules namespace and instead patch.       The text was updated successfully but these errors were encountered
Boto cfn;module state       The text was updated successfully but these errors were encountered
Default grains should contain kernel version;What does this PR doAdds a kernelversion grain to helps Debian users when checking for security notifications amongst other things.What issues does this PR fix or referencePrevious BehaviorThere was no kernelversion grain.New Behavior sudo salt 'testvm' grains.ls | grep kernelversion kernelversion sudo salt 'work' grains.get kernelversiontestvm SMP Tue Mar UTC Tests writtenNo apologies. This is really one of my first times investigating production python code.       The text was updated successfully but these errors were encountered
Use absolute imports in salt.utils.dns;Resolves .       The text was updated successfully but these errors were encountered
adding splitenv call to cp.hashfile to pick up saltenv in file quer?Çª;?Çªy parameterfixes issue        The text was updated successfully but these errors were encountered
Added Windows master related scripts;Added the following scripts to Windows installationssaltsaltkeysaltmastersaltrunFixed an issue where setup.py will not run at all in Windows due tothe script attempting to invoke os.uname which isn't supported onWindows.       The text was updated successfully but these errors were encountered
MongoDB lint;No description provided.        The text was updated successfully but these errors were encountered
vmware fix when resolvedips is None;       The text was updated successfully but these errors were encountered
Fix;Actually use rev argument in modules.git.rebase       The text was updated successfully but these errors were encountered
Check for blockDeviceMapping;Fixes .Addresses .       The text was updated successfully but these errors were encountered
Use os.access in grains.core to check a file for usage;The os.path.existspath just checks for the existence of a file. Theos.accesspath os.ROK for the existence and readability. The latteris preferred in cases where that functionality is wanted.Fixes a bug in ebSee ebdiffebbcbabeadRWhat does this PR doFixes a bug for linux containers where files exist but are not readable for root.What issues does this PR fix or referenceSee ebdiffebbcbabeadRTests writtenNoPlease review Salt's Contributing Guide for best practices.       The text was updated successfully but these errors were encountered
spm updaterepo doesn't always require arguments;No description provided.        The text was updated successfully but these errors were encountered
Requisite documentation;Fixes Make Requisites docs main source for requisite and other global state arguments the default landing pageCreate go here link to requisites page on Global State Arguments docs       The text was updated successfully but these errors were encountered
Fix salt.utils.vt import error in python .;Python . does not have subprocess.mswindows. Instead use sys.platform to detect Windows since no other imports from subprocess were being used.       The text was updated successfully but these errors were encountered
travis Test on PHP .;QABranch.Tests passlet's seeLicenseMITPHP . RC has been released today.       The text was updated successfully but these errors were encountered
allow TraceableEventDispatcher to reuse event instance in nested events;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed tickets LicenseMIT       The text was updated successfully but these errors were encountered
Workflow Clarify validator API fixed unknown scalar marking store;QABranchmasterBug fixyesNew featurenoBC breaksno if merged in .DeprecationsnoTests passyesFixed ticketscommaseparated list of tickets fixed by the PR if anyLicenseMITDoc PRreference to the documentation PR if anySee also httpsgithub.comsymfonysymfonyblobmastersrcSymfonyBundleFrameworkBundleDependencyInjectionCompilerValidateWorkflowsPass.phpL       The text was updated successfully but these errors were encountered
Form fixed ChoiceListCache made hash more unique;this PR refers to this issue Especially naming in the unittests wasn't that easy for me. I'm open for any better suggestions.QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRnone       The text was updated successfully but these errors were encountered
Security Improve deprecation logic to minimalize the changes required in .;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
WebProfilerBundle HttpKernel A static approach to version feedback;QABug fixyesNew featureyesBC breaksnoDeprecationsnoTests passyesFixed tickets LicenseMITDoc PRNAThis is an alternative approach for the version feedback feature of PR . The original PR performed a serverside HTTP request to symfony.com which might be problematic in certain environments see .This PR makes the following assumptionsSymfony's release roadmap is rarely changedAfter the first release of a branch the Symfony development team is committed to the announced support dates.The support period of a stable branch might be extended but it's usually not reduced.Given those assumptions the EOM and EOL dates may be shipped with the Symfony release and may be updated with a later bugfix release. The information would be available offline without any need to query Symfony's servers.If the user is running the latest bugfix release of a branch the EOMEOL dates should be accurate. If he's running an earlier version he might get a false positive warning about reaching EOM or EOL if the support period has been extended in the meantime. But since he's running an outdated version anyway would this really be a problem       The text was updated successfully but these errors were encountered
Updated copyright year;QABug fixnoNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsnaLicenseMITDoc PRnaHappy new year to you all I updated the copyright years in all licensefiles.PS. and the many others only cover the main LICENSE file but this one is more thorough. I might have missed some but I couldn't find any other occurrences of ''       The text was updated successfully but these errors were encountered
DependencyInjection Fixed bug in XmlFileLoader for xml with namespace prefix;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Form Fixed SubmitTypeValidatorExtension not correctly extending BaseValidatorExtension;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRAlthough stated in the documentation is was not actually possible to use validationgroups config on a submit form type. Turns out that although a BaseValidatorExtension had be created with the required functionality SubmitTypeValidatorExtension was not yet extending from it.This pull request corrects this issue adds tests for SubmitTypeValidatorExtension and as a bonus removes an unused import in FormTypeValidatorExtension.       The text was updated successfully but these errors were encountered
Fixed translation typos on the Security componente;HiIn my last PR I've introduced some translation typos on the Security component messages for the Spanish translation.So sorry.Christian.       The text was updated successfully but these errors were encountered
Routing added route compile check to identify a default value...;... of a required variable that does not match the requirementreopened version of        The text was updated successfully but these errors were encountered
Form Added additional data attributes for collections;QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsnaLicenseMITDoc PRWIP fix the tests as they have not been updated yet submit changes to the documentationI've added extra data attributes to collections in twig and php views for easier js manipulation.New attributesdataformwidget'collection' This is a collection and all children are form typesdatacollectionallowadd Allow adding of new elementsdatacollectionallowdelete Allow deletion of elements new and existingdataprototypename The prototype nameThis should make javascript integration much easier.Example js'dataformwidgetcollection'.eachfunction var collection this prototypeString collection.data'prototype' prototypeName collection.data'prototypeName' || 'name' prototypeNameRegx new RegExpprototypeNamelabelg count collection.children.length var deleteLink span  'class' 'jsdelete' 'text' 'Delete'  var addLink span  'class' 'jsadd' 'text' 'Add'  ifcollection.data'collectionAllowDelete'  collection .children .appenddeleteLink.clonetrue collection.on'click' '.jsdelete' function event.preventDefault this.parent.remove   ifcollection.data'collectionAllowAdd'  addLink.clickfunctionevent event.preventDefault var newPrototypeString prototypeString.replaceprototypeNameRegx count newPrototype newPrototypeString.appenddeleteLink.clonetrue newPrototype.insertBeforeaddLink count  collection.appendaddLink Replaces        The text was updated successfully but these errors were encountered
FrameworkBundle removed support for HHVM builtin web server as it is deprecated now;QABug fixnoNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRna       The text was updated successfully but these errors were encountered
Update session start check;No description provided.        The text was updated successfully but these errors were encountered
FrameworkBundle fix broken command registration;fixed        The text was updated successfully but these errors were encountered
BridgeDoctrine cannot use entity with noninteger ID as keyvalue in choicelist;Bug fix yesFeature addition noBackwards compatibility break noSymfony tests pass yesI updated the testSubmitSingleStringIdentifier test to contain a space in the identifier after which it would fail. The EntityChoiceList now only uses the ID as keyvalue when it is an Integer type.fixes        The text was updated successfully but these errors were encountered
HttpFoundationSecurity;I've changed the semantics of RequesthasSession slightly. This is an alternative fix for .       The text was updated successfully but these errors were encountered
FrameworkBundleValidator Fix apc cache service config;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRKeep track of commentNOTE This PR is on standby. If is merged this one might probably be closed as everything will be done during the merge.       The text was updated successfully but these errors were encountered
Validator Added Polish translations for IBAN and ISBN messages.;QABug fixnoNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
VarDumper Use symfony.com's colorscheme;As promised this PR changed the current colorscheme to something used in Symfony. This means developers have a consistent experience and the colorscheme is easier to read.While doings this I also improved the HtmlDumperstyle method to make it easier to understand and maintain. I also changed a bit of the output it created mostly adding visibility prefixes to properties.BeforeAfterQABug fixyesNew featureyesBC breaksDeprecationsTests passFixed ticketsLicenseMITDoc PRthe one about the VarDumper       The text was updated successfully but these errors were encountered
Fixed generation mistake in changelog;QABranchmasterFixed ticketsnaLicenseMITDoc PRna       The text was updated successfully but these errors were encountered
Validator;No description provided.        The text was updated successfully but these errors were encountered
Validator DateRange constraint added;Added DateRange constraint and appropriate translations in russian and english.Simple example  Assert\DateRange min  max    protected birthdayCustom format exampleDate format by default is dmY but easily can be overridden by 'format' property of constraint f.e.  Assert\DateRange min .. max .. format d.m.Y   protected birthdayThis is my first commit to symfony components so feel free to request any additionals write docs improve something and so on.       The text was updated successfully but these errors were encountered
VarDumper edge case fixes;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
ExpressionLanguage Added a failing test to prove that EL does not respect 'lazy operator';QABug fixnoNew featurenoBC breaksnoDeprecationsnoTests passnoFixed ticketsnoLicenseMITDoc PRno  MethodGET Routefoobar namefoobar Template Securityisgranted'ROLEUSER' and user.foobar  public function foobarAction  If the user is not connected this throw an exception RuntimeException Unable to get a property on a nonobject. in vendorsymfonysymfonysrcSymfonyComponentExpressionLanguageNodeGetAttrNode.php at line .       The text was updated successfully but these errors were encountered
Console Added three state long option;Console Added three state long optionQABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRA three state long option instead of the current state versionNot setting the longoption will make the default set to false just like a standard longoption.Setting the longoption without a value will set it to it's defaultSetting the longoption with a value will set it to that value.Let's say devphp tool.phparray  'dev'  boolfalsephp tool.php devarray  'dev'  'the default value'php tool.php devtestarray  'dev'  'test'A couple of notesI assume you guys agree that it's not a good idea to break current functionality. Therefor VALUEOPTIONAL will stay how it is and I added a new constant VALUEOPTIONULL.All the tests still workWe need to come up with a better name.I'll need to write new test for the new config option VALUEOPTIONULL.       The text was updated successfully but these errors were encountered
Validator Add deprecation message .;QABug fixnoNew featurenoBC breaksnoDeprecationsyesTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Ldap add some missing license file headers;QABug fixnoNew featurenoBC breaksnoDeprecationsnoTests passyesFixed tickets commentLicenseMITDoc PR       The text was updated successfully but these errors were encountered
HttpKernel ExceptionHandler is actually displaying all PHP errors;So there is no need to set displayerrors to true in that case.Partially fixes .       The text was updated successfully but these errors were encountered
Security RoleSecurityIdentity checks for instances of RoleInterface to allow custom Role implementation;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed tickets LicenseMITDoc PRnoHiWe are using a custom Role entity that's implementing the RoleInterface but when we tried to apply ACL on the application some SecurityContextisGranted calls were denying access when they should actually allow.After checking database our code Symfony code we got to the dead end where the following triple comparison was returning falsethisrole sidgetRoleOne thisrole was holding our custom object that implements the RoleInterface the other sidgetRole was holding a string the strict comparison would obviously fail.After updating the constructor and tests everything looks great.Thanks       The text was updated successfully but these errors were encountered
Console Make Helper\TablesetStyle chainable again;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMIT       The text was updated successfully but these errors were encountered
File Fix bug in TemporaryStorage. Make tempDir if it's not exist;Without this fix I have many warnings while trying to upload file then directory appcachedevupload doesn't exist.       The text was updated successfully but these errors were encountered
TwigBundle Fix bug where namespaced paths don't take parent bundles in account;QABranch.Bug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRCurrently namespaced paths for templates such as extends 'AppLayoutlayout.html.twig' do not work with bundles that have overruled templates using the getParent method in another bundle. See attached ticket. This change prepends the path of the bundle implementing getParent to the paths of the namespace of bundle returned as a parent.       The text was updated successfully but these errors were encountered
Validator Fixed UniqueEntityValidator to properly handle association fields;Issue If one of the fields in a UniqueEntity constraint is actually an association field use the value of the associated entity related field to perform the validation for uniqueness.This patch doesn't fix the case where the association field is a composite primary key entity. This will be fixed inside Doctrine in the future.       The text was updated successfully but these errors were encountered
Console ConsoleOuputisDecorated is detected from STDOUT and STDERR;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRIn a Symfony command the OutputInterface has wrong result for isDecorated in this very simple scenario appconsole vendorcommand outputHere output is a regular file so outputisDecorated should return false but it returns true. This happen because the the automatic detection is done on stdout first and then overridden by a second detection on stderr which is tty in the example above.I've added a test which hopefully make clear the scenario.       The text was updated successfully but these errors were encountered
Filesystem Fixed fabbot report about 'unix' comment;This is a minor coding standards PR. fabbot warning httphook.fabbot.ioreportsymfonysymfonydfcbcecfdbfeQABug fixnoNew featurenoBC breaksnoDeprecationsnoTests passnoFixed ticketsCoding standardsLicenseMITDoc PRNA       The text was updated successfully but these errors were encountered
FrameworkBundle A controller must be callable;Am I right to say that a controller must be callable ie methodexists is a bug No BC tests pass.The change is a one liner however I have rewritten some code tests to the current standards what a long way since the genesis of Sf I have also added a FIXME for Sf because returning false is too much PHP        The text was updated successfully but these errors were encountered
.Form Dereferenced Formall since it is not supported for PHP ..;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRsee bc       The text was updated successfully but these errors were encountered
Removed unused use statements.;No description provided.        The text was updated successfully but these errors were encountered
WebProfiler fix contenttype parameter;Bc break noThis fixes an error in that was raising a fatal error.It also adds the typehint for consistency because the typehint is also present in ResponseHeaderBag where the param is passed through. This should help that such errors are more unlikely to happen.       The text was updated successfully but these errors were encountered
TranslationForm Do not translate form labels and placeholders when 'translationdomain' is false;QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRSeems like this behaviour was already partially added as stated here to solve the problem of expanded choice widgets.       The text was updated successfully but these errors were encountered
Code coverage on HttpFoundationResponse;Added tests on HttpFoundationResponseAlso fixes the code coverage generation crash when the resources folder are more than folder deep.       The text was updated successfully but these errors were encountered
Console End of options signal support;QABug fixyesNew featureyesBC breaksyesishDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRThe first commit is only about support fixes a few other little issues I discovered while adding tests to cover my feature.The second commit makes use of the first in the Application class so that if you do console foo help for example it should not trigger the help anymore but simply have help available as a dummy arg.To keep BC I did this by adding a param to hasParameterOptiongetParameterOption instead of doing it by default. This creates another BC issue though in that it changes the InputInterface. I don't think that's a major concern but it's worth mentioning.The other only minor BC change is if you do getParameterOption of a flag option i.e. foo without a value. Before it was returning null in ArgvInput and true in ArrayInput. I normalized this to true for both since I think that makes more sense but strictly speaking while it improves interface interchangeability it's a BC break.       The text was updated successfully but these errors were encountered
Add TypeExtensions and TypeGuessers on FormIntegrationTestCase;QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRThis PR is a improvement suggestion about FormIntegrationTestCase.Based on the documentation we currently have to setUp again all the form builder process just to add a type extension to get for example constraints option working.With this modification we can simply do something like this.class ChangePasswordFormTypeTest extends TypeTestCase protected function getTypeExtensions  validator thisgetMock'Symfony\Component\Validator\Validator\ValidatorInterface' validatormethod'validate'willthisreturnValuenew ConstraintViolationList return array new FormTypeValidatorExtensionvalidator   ... Do your tests here.Much simpler isn't itI think this could be done also for type guessers. Will work on it.I'm excited to see yours review comments ?æìNote This should be cherrypick on .. Could be very useful to have it on . also because of new LTS. It's up to you.       The text was updated successfully but these errors were encountered
Displaying vardump with xdebug in exceptions;When debugging code I often use vardump to quickly look into variables. Since . alle output generated by vardump is displayed in one line. httpscreencast.comtLuIlIdHsvPIt seems to be no problem for small objects but it becomes a real pain when displaying huge arrays or objects.This is caused by the changed wordwrapping for the pre tag introduced in With fix httpscreencast.comtGdAdkpWxU       The text was updated successfully but these errors were encountered
WIP.Form Removed usage of deprecated form tag attributes;QABug fixyesNew featurenoBC breaksyesDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRWIP because it needs some adjustments after is merged       The text was updated successfully but these errors were encountered
.TwigBridge Fixes Issue in TwigBridge;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Extracted the DI loading of an array from the YamlFileLoader;QABug fixnoNew featuresort ofBC breaksnoDeprecationsnoTests passyesFixed ticketsnoneLicenseMITDoc PRnaThis allows to reuse the logic easily for other loaders needing to extract data from an array.Note that references and expressions are subject to the same syntax than in YAML files. the goal is to load arrays from a place where you might not be able to instantiate objects.currently only the YAMLFileLoader is using it but the PlainArrayLoader better named ArrayFileLoader btw submitted in could reuse it as well. This would make it benefit from the safeguards added in as well.I haven't added dedicated tests yet but the code is executed by the YamlFileLoader tests. I can add some tests if there is an interest in merging this.       The text was updated successfully but these errors were encountered
Form Allow NumberToLocalizedStringTransformerreverseTransform to accept intfloat;QABug fixnot sureNew featurenot sureBC breaksyesDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRWhen adding a form type integer with a emptydata aka with a int or float value the form field will never validate correctly because the NumberToLocalizedStringTransformer will throw a TransformationFailedException because the value is not a string.This PR fixes this problem by allowing int and float types as values in reverseTransform. Because the string only behavior was enforced by the transformer tests this is a BC change. Personally I think that this is not a BC break that would cause problems.Another possible fix is to add a normalizer for the emptydata option and transform a int or float to a LocalizedString but that looksfeels like a bad patch job.I hope this PR will have less people going through there validation schema just to figure out that it's the NumberToLocalizedStringTransformer causing the problem.       The text was updated successfully but these errors were encountered
TwigBundle Attempted to call an undefined method named getTemplate?Çª;?ÇªName of class TwigErrorRuntime. TwigBundle Attempted to call an undefined method named getTemplateName of class TwigErrorRuntime. QABranchmaster . . . or . Bug fixyesnoNew featureyesnoBC breaksyesnoDeprecationsyesnoTests passyesnoFixed tickets... LicenseMITDoc PRsymfonysymfonydocs...        The text was updated successfully but these errors were encountered
Form Fix legacy tests that break master;QABug fixnoNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Validator Added a format option to the DateTime constraint.;QABug fixnoNew featureyesBC breaksnoDeprecationsyesTests passyesFixed ticketsLicenseMITDoc PRsymfonysymfonydocsThis PR adds a new format option to the DateTime constraint and deprecate the Date and Time constraints in favor of this new option. update docs       The text was updated successfully but these errors were encountered
Security Fixed persistence of AuthenticationException;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsnaLicenseMITDoc PRnaDuring the refresh of an authenticated user the potential AuthenticationException is ignored now it is persisted in session just like after an authentication failure.       The text was updated successfully but these errors were encountered
HttpFoundation Added status code;QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesLicenseMIThttpsdatatracker.ietf.orgdocdraftietfhttpbislegallyrestrictedstatusincludetextThe HTTP status code was approved by the ISG a few days ago on the th December '.       The text was updated successfully but these errors were encountered
HttpFoundation Redis session handler;QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRsymfonysymfonydocs       The text was updated successfully but these errors were encountered
SecurityBundleSecurityFinder Remove deprecated code paths;QABranchmasterBug fixnoNew featurenoBC breaksyesDeprecationsnoTests passyesFixed ticketsbb aefd bfeLicenseMITDoc PRNARemoving my own deprecated stuff from .        The text was updated successfully but these errors were encountered
fixing BC break with validatePropertyValue;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRnone       The text was updated successfully but these errors were encountered
DomCrawler Create a getter for baseHref;QABranchmasterBug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRnaAs requested in I created a getter for baseHref. Happy Hack Day       The text was updated successfully but these errors were encountered
property access Fix issue for broken reference chain;For the 'property values' that corresponds to a property path in PropertyAccessorreadPropertiesUntil method if current element's 'ISREF' flag is true it means and only means that it is passed as a reference to its immediate parent in the property path.It does not guarantee that current element's reference will be automatically escalated to the top because if there is an element which is passed by value stands in its way of going back to the top the reference chain will be broken.However a broken reference chain does NOT necessarily break the reference itself.There are actually two scenariosCurrent element is an object this won't break the object's reference because object is always passed as reference even if the array that holds it is copied the object is still copied as reference.Current element is an array element this will also break the reference because when copying an array the array elements are copied as values instead of references. This means at this point the top element is referring to a different current element. In order to escalate current element back to the top its values must be copied explicitly.The original code of PropertyAccessor does not recognize the nd senario so it will raise issues in method setValue and isWritable.Let's explain this issue with some examples example class Foo protected value public function getValue  return thisvalue  public function setValuevalue  thisvalue value  public function constructvalue  thisvalue value pa new PropertyAccessorb new Foo'oldvalue'a new Foo array 'a' array 'b' array 'c' b   pasetValuea 'valueabc.value' 'newvalue' The reference chain is broken at a.value because array is passed as value. But since a.valueabc.value is an object which is always passed as reference the refernce itself is not broken the original code base works and the value of a.valueabc.value will be changed to 'newvalue' example .class Foo protected value public function getValue  return thisvalue  public function setValuevalue  thisvalue value  public function constructvalue  thisvalue value a new Foo array 'a' array 'b' 'oldvalue'  pa new PropertyAccessorpasetValuea 'valueab' 'newvalue' The reference chain is broken at a.value because array is passed as value and the reference of a.valueab is broken as well because when a.value is copied a.valueab is passed by value as well. But the original code base does not recognize this scenario and will terminate the process earlier which will fail to update the value of a.valueabThis issue is caused by the incorrect use of 'ISREF' flag the originalcode base only use the 'ISREF' flag to identify reference element butit does not care if it's an object or array element. For object it'ssafe to terminate the process earlier but for array element we shouldnot terminate the process unless we can confirm that its reference chainis not broken all of its ancient elements in the property path arepassed by reference.This issue affects both the setValue and the isWritable methods.So we need introduce a new flag 'ISREFCHAINED' to identify anelement that is passed as reference and all its ancient elements inthe property path are also passed as reference.And we can terminate the process as followsIf current element is an object then it's safe to terminate the value setting process here because object is always passed as reference.If current element is not an object and its 'ISREFCHAINED' flag is true then it's safe to terminate the value setting process because all the acient elements in the property path are referringto this object as reference so there is no need to copy values.Otherwise we should not terminate the value setting process hereso that the element value can be copied explicitly later.QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsnaLicenseMITDoc PRna       The text was updated successfully but these errors were encountered
Remove deprecated container injections and compiler passes;QABranchmasterBug fixnoNew featurenoBC breaksyesDeprecationsnoTests passyesFixed tickets LicenseMITDoc PRna       The text was updated successfully but these errors were encountered
DoctrineBridge Fixed nonutf recognition;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed tickets       The text was updated successfully but these errors were encountered
WebProfilerBundle Fix toolbar maxwidth for long ajax url;QABranch.Bug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesLicenseMITBefore After        The text was updated successfully but these errors were encountered
. Update required PHP to ..;QABug fixnoNew featurenoBC breaksyesDeprecationsnoTests passyesFixed tickets LicenseMITDoc PRThis PR upgrades composer.json files to php.... is the lowest version available on Travis and the version shipped with Ubuntu LTS ..We can change the php version later when we'll agree on some other requirement but currently this is required to safely merge in master without having some users reporting issues because they have a devmasterdev requirement.       The text was updated successfully but these errors were encountered
. Upgrade Guide Describing how to pass data to a form through options resolver;QABranchmasterBug fixnoNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PREnhanced the upgrade guide by adding details regarding passing data to a form through the options resolver.       The text was updated successfully but these errors were encountered
Fix hide button in toolbar;QABranch.Bug fixyesNew featurenoBC breaksnoDeprecationsnoTests passnoFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Added getter and setter of QuestionHelper to SymfonyStyle;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRCurrent SymfonyStyle implementation disallow to test interactively input of command according docs.       The text was updated successfully but these errors were encountered
FormType DateTime added choicetranslationdomain option.;QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed tickets and LicenseMIT add test       The text was updated successfully but these errors were encountered
TwigBundle properly set request attributes in controller test;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
BrowserKit Fix browser kit redirect with ports;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsNo ticket openedLicenseMITDoc PRNoneWhilst using Mink to do automated tests I encountered a problem where redirects with ports would not work as the port was removed in the updateServerFromURI method. This PR fixes the problem.During my testing I encountered clientfollowRedirectsfalse in the ClientTest class that was causing the redirectWithPort test to pass even though it should have been failing Removing the line caused the test to correctly fail before the patch was written       The text was updated successfully but these errors were encountered
. Form New CollectionType prototypedata option;QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRsymfonysymfonydocsHey       The text was updated successfully but these errors were encountered
ClassLoaderHttpKernel Remove ClassLoader component KernelloadClassCache;QABranchmasterBug fixnoNew featurenoBC breaksyesDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRNAAs deprecated in        The text was updated successfully but these errors were encountered
WIP OptionsResolver handle nested options;QABranchmasterBug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed tickets LicenseMITDoc PRtodo Gather feedback Address a doc PR Update CHANGELOG Add a lot of tests Summarycac fixes . Handle nested options resolvingadd OptionsResolvernested a private array of nested OptionsResolver instances by root namesadd OptionsResolversetNestedoption array defaults defines an option as a new self and returns the nested OptionsResolver instanceadd OptionsResolverisNestedoption returns whether an option name is a root name for a nested OptionsResolver instanceadd OptionsResolvergetNested an array of root names representing nested OptionsResolver instances.connexionResolver resolversetNested'connexion' array 'host' 'localhost' 'port' connexionResolversetRequired'user'connexionResolversetDefault'password' function Options connexion  return issetnested'user' '' nullconnexionResolversetDefault'secure' falseconnexionResolversetNormalizer'secure' function Options connexion secure  return nested'port' secureconnexionResolversetAllowedTypes'port' 'int'connexionResolversetAllowedTypes'user' 'string'resolversetRequired'connexion'resolversetNormalizer'connexion' function Options options resolvedConnexion  if 'localhost' resolvedConnexion'host'  resolvedConnexion'host' option'param'  return resolvedConnexion In a sub classparentconfigureOptionsresolverresolversetDefault'user' userconnexionResolver resolversetDefault 'connexion' function Options options previousDefaultConnexion  if options'user' instanceof UserInterface and 'localhost' previousDefaultConnexion'host' connexion'user' options'user'getUsername options resolverresolvearrayAllowed methods are not supported with root name of nested options since they always have to be an array sofad trigger warning throw BadMethodCallException what do you think eea fixes . Handle extra options resolving and addAllowedForAll rules with constant flagsadd OptionsNONE constantadd OptionsALL constant matches defined and extra optionsadd OptionsDEFINED constantadd OptionsNESTED constantadd OptionsEXTRA constant matches any undefined options helps dealing with anonymous options using a numerical indexadd OptionsResolverallowedValuesForAll a private array to validate all options even undefined but not root of nested options as they must always be an arrayadd OptionsResolverallowedTypesForAll a private array to validate all options as previousadd OptionsResolverresolveUndefined a private bool to allow extra options resolvingadd OptionsResolveraddAllowedValuesForAlloptions allowedValues replace false nested OptionsALL first argument may be an array of options names or any flag constant except OptionsNONE if a root name of nested options is passed asamong first argument the method will be recursive because the fourth argument default is OptionsALL prevent it by passing OptionsNONE insteadadd OptionsResolveraddAllowedTypesForAlloptions allowedTypes replace nested same as previous note that passing OptionsALL as first argument will not apply to root of nested options as they must always be arrays and on contrary will apply on extra options pass true as third argument to override previous allowed typesadd OptionsResolversetPrototypesstring|string types mixed values options OptionsEXTRA sets resolveUndefined to true and validate any extra options with the any given type with its corresponding allowed valuesadd OptionsResolverallowExtraOptionsallow trueresolversetNested'attachments' arrayattachments allowExtraOptions addAllowedTypesForAllOptionsALL '\SwiftAttachment' Another way by implicitly allowing extra optionsresolversetNested'emails' setPrototypes'string' function email use regex  return pregmatchregex email The difference is that in the second case implicitly the flag OptionsEXTRA is passed so previous defaults will not be validate by prototypes rules if that's not what you want pass OptionsALL as third argument.Note that setNested returns the nested OptionsResolver instance in this examples you could call these methods on the resolver as well but this not the same Any undefined global options can only be stringsresolver allowExtraOptions addAllowTypesForAllOptionsEXTRA 'string' true OptionsNONEccdce Harden dependency of nested options with an internal classadd NestedOptions class which extends OptionsResolveradd NestedOptionsroot the parent OptionsResolver instanceadd NestedOptionsrootName the root option nameadd NestedOptionsresolve overrides to throw an exception is parent OptionsResolver instance is not lockedadd OptionsResolverisLocked internal public method to check from NestedOptions if it can be resolved.Work in Progress RFCadd OptionsResolversetExtraNormalizerfunction Options options extraName extraValue ... to normalize any undefined options basically a shortcut for the currently supported setNormalizerOptionsExtra callable but with handling of extraNameadd a OptionsResolverprototypes private array holding allowed values by allowed types to validate extra options.be more strict on NestedOptions array type and indexing when setting defaults. Currently the implementation does not distinguish nested defaults using a numerical index instead of names which may cause problem when overriding them or to properly map validationnormalization.       The text was updated successfully but these errors were encountered
Cache Add MemcachedAdapter;QABranchmasterBug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
DependencyInjectionRouting add files used in FileResource objects;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed tickets commentLicenseMITDoc PRStarting with Symfony . the constructor of the FileResource classwill throw an exception when the passed file does not exist.       The text was updated successfully but these errors were encountered
Issue Added some CA and ES translations;Added some translations in CAFixed some translations in ES       The text was updated successfully but these errors were encountered
HttpKernel Container class name should start with letter or underscore;QABranch.Bug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRHi allthis PR tries to fix rather rare issue when generated Container Class name is starting with number which is the case when kernel name base name of root dir starts with one.Not sure if my solution is correct it's the easiest I could think off it just adds underscore in front of the generated class name.       The text was updated successfully but these errors were encountered
. Process Add getPid and sendSignal methods to Process;Bug fix noFeature addition yesBackwards compatibility break noSymfony tests pass yesLicense of the code MITThis method is particularly nice for sending posix signal to a processexample of use  send a SIGCONT signal to the related processposixkillprocessgetPid SIGCONTI've not implement the signal sender in the Process API because it requires posix environment but I think could be nice to have it and throw an exception in case it's not supported.What do you think about it        The text was updated successfully but these errors were encountered
Security sync translations and add a test for it;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Notice Undefined variable fixtures in ...;No description provided.        The text was updated successfully but these errors were encountered
. Validator added comparison constraints and validators;QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRThey work on a class level and you specify a list of properties. Included are the standard GreaterThan GreaterThanOrEqual LessThan LessThanOrEqual and Equal. e.g.php assertGreaterThandiedDate bornDate assertLessThanOrEqualbornDate firstSchoolDayDate diedDate class Person private bornDate private firstSchoolDayDate private diedDateI think it would also be useful if they worked on a property level rather than just class. I'm not sure what the default option should be though. e.g. is there a reliable way to determine what's a raw value and what's a property namephp assertGreaterThan private iq assertLessThan'dateDied' private bornDate assertLessThanOrEqual'C' private grade assertGreaterThanOrEqual 'ageStartedSchool' private age       The text was updated successfully but these errors were encountered
Validator Fixed constraint violation to string not handling array;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRThis bug was introduced on PR . Validator added comparison constraints and validatorsDue to the change on root to become the value context new ExecutionContextthiscreateVisitornull thistranslator thistranslationDomain context new ExecutionContextthiscreateVisitorvalue thistranslator thistranslationDomainhttpsgithub.comsymfonysymfonypullfilesdifffacdfcbaeacaedRMy change on class string isobjectthisroot getclassthisroot thisroot class isobjectthisroot getclassthisroot isarraythisroot 'Array' string thisrootIs inspired on TypeValidator       The text was updated successfully but these errors were encountered
HttpKernel Fix call to Memcachedset in MemcachedProfilerStorage;The existing code seems to have been copied from MemcacheProfilerStorage. Memcacheset includes a flag argument but Memcachedset omits that. Seehttpphp.netmanualenmemcached.set.phphttpphp.netmanualenmemcache.set.phpI assume TravisCI didn't catch the MemcachedProfilerStorageTest failures because those tests are skipped httptravisci.orgsymfonysymfonyjobsL       The text was updated successfully but these errors were encountered
Validator Added context object method callback to choice validator;QABranchmasterBug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Routing allow URLs to be generated that include the default param;BC break yes even if no test needed to be changed so the old behavior was probably not even intended as no test for it existedFixes This can be achieved by explicitly passing the parameter. Previously it just ignored the parameter that equals the default value. You can still omit optional variables by not passing it at all or passing null as param value.ExampleGiven the route new Route'index.format' array'format' 'html'Previously generating this route with params array'format' 'html' resulted in index which means one could not generate index.html at all. This has been changed. You can of course still generate just index by passing array'format' null or not passing the param at all.I'm certain this is the best solution to the problem even if it slightly breaks bc. But IMO this is how it is supposed to work. Because when I pass a parameter explicitly I want it to be included in the URL.       The text was updated successfully but these errors were encountered
SecurityBundle Support autowiring for AccessDecisionManagerInterface;QABranch.Bug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsnaLicenseMITDoc PRna       The text was updated successfully but these errors were encountered
PhpUnitBridge Make ClockMock match namespaces that begin with Tests\\;QABranch.Bug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsNALicenseMITDoc PRsymfonysymfonydocsSee symfonysymfonystandard       The text was updated successfully but these errors were encountered
Fix check the version of intl instead of the version of PHP;No description provided.        The text was updated successfully but these errors were encountered
Filesystem Add two methods isFile and isDirectory;QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Validator Fix caching of constraints derived from nonserializable parents;QABranch.Bug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRThis change allows to still cache constraints even when an uncachable constraint i.e. Callbackis added to a parent class at runtime.This is achived by caching only the constraints that are loaded for the class in question onlyand merging parent and interface constraints after reading from cache.       The text was updated successfully but these errors were encountered
HttpFoundation Fixed the way path to directory is trimmed;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsre LicenseMITDoc PR       The text was updated successfully but these errors were encountered
issue adding support to retrieve PEARinstalled classes within the UniversalClassLoader;As discussed here it would be cool as a final fallback to try include classes with streamresolveincludepath to for example autoload classes installed via PEAR.I wrote a small patch including a protected method in the UniversalClassLoader which formats a PEARstyle class name in a FS relative path this snippet was used times with this patch times so I refactored and added a test.Since I can't check classexists'PEAR' because PHP would say yes using the include path but the universal class loader would however not load it I checked if the findFile method finds the PEAR class which should be installed in almost every PC running the tests I don't know if there is a better way to test it.       The text was updated successfully but these errors were encountered
Yaml Fixed double quotes escaping in Dumper;Issue is caused by DumperescapeWithDoubleQuotes which uses strreplace.From the php docsBecause strreplace replaces left to right it might replace a previously inserted value when doing multiple replacements.We should be very careful in deciding about the order of elements in escapees array. I'd really appreciate if someone reviewed my fix. Tests say I didn't break anything but I'm not sure what percentage of Yaml specification is covered by tests.Bug fix yesFeature addition noBackwards compatibility break not that I knowSymfony tests pass Fixes the following tickets        The text was updated successfully but these errors were encountered
Fix profiler throwing javascript errors on IE IE;No description provided.        The text was updated successfully but these errors were encountered
. FrameworkBundle Tag support in container debug;Bug fix noFeature addition yesBackwards compatibility break noSymfony tests pass yesFixes the following tickets naLicense of the code MITThis PR allows finding all services with a specified tag in the container appconsole containerdebug tagform.typecontainer Public servicesService Id Scope Class Nameform.type.birthday container Symfony\Component\Form\Extension\Core\Type\BirthdayTypeform.type.checkbox container Symfony\Component\Form\Extension\Core\Type\CheckboxTypeform.type.choice container Symfony\Component\Form\Extension\Core\Type\ChoiceTypeform.type.collection container Symfony\Component\Form\Extension\Core\Type\CollectionTypeform.type.country container Symfony\Component\Form\Extension\Core\Type\CountryType ... Also it adds more info on used tags when requesting info of a serviceBefore appconsole containerdebug datacollector.requestcontainer Information for service datacollector.requestService Id datacollector.requestClass Symfony\Bundle\FrameworkBundle\DataCollector\RequestDataCollectorTags kernel.eventlistener datacollectorScope containerPublic yesSynthetic noRequired File After appconsole containerdebug datacollector.requestcontainer Information for service datacollector.requestService Id datacollector.requestClass Symfony\Bundle\FrameworkBundle\DataCollector\RequestDataCollectorTags kernel.eventlistener event kernel.controller method onKernelController datacollector template WebProfilerBundleCollectorrequest id request priority Scope containerPublic yesSynthetic noRequired File        The text was updated successfully but these errors were encountered
Added more verbose message for exception when form types have wrong getName;PR based on discussion of commit introduces exception when custom form type have no getName method. a       The text was updated successfully but these errors were encountered
FrameworkBundle Clean unnecessary methodexists calls in descriptors;QABranch.Bug fixno only cleanup right nowNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsNALicenseMITDoc PRNAThose checks look useless as soon as the FrameworkBundle v. already requires the DI component . version in which were introduced these methods.I also spotted the fact the shared property is missing from the TextDescriptor at least should appear when a service is not shared IMHO and the autowiringTypes are also missing from the XmlDescriptor.WDYT about fixing this here too as a bug fix Or should we actually consider the whole thing clean missing info in descriptors as an enhancement and target master instead       The text was updated successfully but these errors were encountered
WebServerBundle Mark ServerCommand as internal;QABranch.Bug fixnoNew featurenoBC breaksnoDeprecationsnoTests passyesFixed tickets commentLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Form Added additional data attributes for collection type output;Refactored and up to date w master version of QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsnaLicenseMITDoc PRWIP fix the tests as they have not been updated yet submit changes to the documentationI've added extra data attributes to collections in twig and php views for easier js manipulation.New attributesdataformwidget'collection' This is a collection and all children are form typesdatacollectionallowadd Allow adding of new elementsdatacollectionallowdelete Allow deletion of elements new and existingdataprototypename The prototype nameThis should make javascript integration much easier.Example js'dataformwidgetcollection'.eachfunction var collection this prototypeString collection.data'prototype' prototypeName collection.data'prototypeName' || 'name' prototypeNameRegx new RegExpprototypeNamelabelg count collection.children.length console.logthis count prototypeString var deleteLink span  'class' 'jsdelete' 'text' 'Delete'  var addLink span  'class' 'jsadd' 'text' 'Add'  ifcollection.data'collectionAllowDelete'  collection .children .appenddeleteLink.clonetrue collection.on'click' '.jsdelete' function event.preventDefault this.parent.remove   ifcollection.data'collectionAllowAdd'  addLink.clickfunctionevent event.preventDefault var newPrototypeString prototypeString.replaceprototypeNameRegx count newPrototype newPrototypeString.appenddeleteLink.clonetrue newPrototype.insertBeforeaddLink count  collection.appendaddLink Replaces        The text was updated successfully but these errors were encountered
FrameworkBundle Handle project dir in cacheclear command;QABranch.Bug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Introduce dumpdie to directly output result;QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRsymfonysymfonydocs       The text was updated successfully but these errors were encountered
Fixed the phpdoc in the DependencyInjection component;I was sick of having a warning in my IDE each time I used DefinitionDecorator because of an invalid phpdoc in the constructor so I took some time and fixed it in the whole DI component.       The text was updated successfully but these errors were encountered
HttpFoundation MongoDB driver support for sessions;QABranch.Bug fixnoNew featureYes MongoDB driver supportBC breaksnoDeprecationsnoTests passyesFixed ticketsNALicenseMITDoc PRNAAdding support for the new MongoDB php driver in the mongodb sessions' handler.phpref MongoDB drivermongoref official mongophp library       The text was updated successfully but these errors were encountered
FrameworkBundle Enable assets by default;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRThis should make the tests pass again.There are two templates from TwigBundle that are used with functional tests and require the asset helpersrcSymfonyBundleTwigBundleResourcesviewsExceptionexceptionfull.html.twigsrcSymfonyBundleTwigBundleResourcesviewslayout.html.twig       The text was updated successfully but these errors were encountered
. Decouple mimetypetoextension logic from File class;This allows guessing the extension from a given mime typewithout requiring the existence of a local file.If a file's meta information mimetype etc. is already available i.e. it'sbeen extracted once and stored in some persistent data store it would benice to be able to make a bestguess on the extension based on the known mimetype.A concrete use case of this is for the symfonycmf where a file has been storedin the jackrabbit data store. When delivering this file or saving it to disk we'd like touse an extension that's created based on the known mime type of the file.       The text was updated successfully but these errors were encountered
Form Fix submitting checkboxes and radios with PATCH method;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed tickets LicenseMITDoc PR Confirm this is the right fix Update tests for . with FQCN Update tests for . by flipping choice keys and valuesThe bug seems to make it impossible to submit an expanded ChoiceType with a PATCH method see .       The text was updated successfully but these errors were encountered
ProxyManager Add FC layer;QABranch.Bug fixnoNew featurenoBC breaksyes minorDeprecationsyes made a class finalTests passyesFixed ticketsLicenseMITDoc PRThis makes PRoxyDumper compatible with DumperInterface v..Technically this is a BC break but since I really don't expect anyone to extend ProxyDumper I think we should do it on . to close the gap as early as possible.       The text was updated successfully but these errors were encountered
Locale Fixed the StubLocaleTest for ICU versions lower than .;Bug fix noFeature addition noBackwards compatibility break noSymfony tests pass no but for other reason in an another componentFixes the following tickets Todo License of the code MITDocumentation PR Symbol for Brazilian Real is BR only in ICU .. All previous and later versions use R.Links to the relevant data fileshttpsource.icuproject.orgreposicuicutagsreleasesourcedatacurren.txthttpsource.icuproject.orgreposicuicutagsreleasesourcedatacurren.txthttpsource.icuproject.orgreposicuicutagsreleasesourcedatacurren.txt       The text was updated successfully but these errors were encountered
consoleArrayInput avoid return array value for getFirstArgument.;QABug fixyesNew featurenoBC breaksnoDeprecationsnoFixed ticketsTests passyesLicenseMIT       The text was updated successfully but these errors were encountered
Added in support to ConfirmationQuestion;QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRsymfonysymfonydocsFor instance when creating a dutch cli app you want this to be j from Ja instead of the english y.       The text was updated successfully but these errors were encountered
FrameworkBundleTranslation allow register custom resources paths.;QABug fixnoNew featureyesBC breaksnoDeprecationsnoFixed ticketsTests passyesLicenseMITThis allow to add custom resources path via prepend config or in config.ymlframework translator paths kernel.rootdir..vendorSymfonyComponentFormResourcestranslations       The text was updated successfully but these errors were encountered
Config Allow nonexistent file resources;QABranchmasterBug fixyesNew featureyesBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRUpdates FileResource to also evaluate freshness against file existence.Currently FileResource assumes that the file always exists. I have a use case where this is not necessarily true for tests purposes I create a TestKernel class that uses MicroKernelTrait to define all the configs directly except some values that are defined in phpunit.xml and phpunit.xml.dist files. Since the tests can pass with the default values from phpunit.xml.dist creating the phpunit.xml file is not required. So in TestKernel I have to do thisif fileexists'phpunit.xml'  containeraddResourcenew FileResource'phpunit.xml' else  containeraddResourcenew FileExistenceResource'phpunit.xml'Maybe it should be a new class instead WDYT       The text was updated successfully but these errors were encountered
WebProfilerBundle Fixed collapsed profiler menu icons;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRAdded missing CSS and JS modifications from        The text was updated successfully but these errors were encountered
Security These interface allways send deprecated because of wrong inheritance;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Validator Fix propertyPath with nested collections in the LegacyExecutionContext;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed tickets LicenseMITDoc PRSome tests are failing for other reasons.       The text was updated successfully but these errors were encountered
BrowserKit Use a regex to guess if a URI is absolute or not.;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMIT       The text was updated successfully but these errors were encountered
Form setReadOnly and setAttribute on a Form after creation;Bug fix noFeature addition yesBackwards compatibility break noSymfony tests pass Fixes the following tickets Todo In a From EventSubscriber i can manage to get the form via eventgetForm but i am pretty limited about what i can do with that form. If i only want to change the readonly property i can't because it's private so i end up creating the field again with the same name and overwriting it withformaddthisfactorycreateNamed'text' 'name' null array'readonly' falsewhich is a bit time consuming since i only wanted to set the readonly property of that field to false.I must say that i found it a bit strange that there weren't any options for doing this so please tell me if there is any powerful reason for not being able to change the readonly or other attributes when the form is already created.       The text was updated successfully but these errors were encountered
DoctrineBridgeForm Fix IdReader when indexing by primary foreign key;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRPort to Symfony . of PR . The IdReader class can now resolve association and determine the real id value.There is still room for improvement though. Since I've added a new IdReader in the constructor it is better to declare IdReader as final just to be safe.PS sorry to keep you waiting webmozart . When merging both commit don't forget to add the deprecated annotation and that SingleAssociationToIntIdEntity.php is duplicated.       The text was updated successfully but these errors were encountered
BrowserKit Fix BrowserKit is broken when using ip as host;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITAs documented in httpphp.netmanualenfunction.pregreplace.php we have to use the notation for replacing the backreferenceWhen working with a replacement pattern where a backreference is immediately followed by another number i.e. placing a literal number immediately after a matched pattern you cannot use the familiar \ notation for your backreference. \ for example would confuse pregreplace since it does not know whether you want the \ backreference followed by a literal or the \ backreference followed by nothing. In this case the solution is to use . This creates an isolated backreference leaving the as a literal.       The text was updated successfully but these errors were encountered
FrameworkBundle Refactored assetsinstall command and apply Symfony styles;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRReplaces        The text was updated successfully but these errors were encountered
github Tweak PR template;QABranch.Bug fixnoNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRRelated to        The text was updated successfully but these errors were encountered
Security Fixed a variable name. Closes;No description provided.        The text was updated successfully but these errors were encountered
WebProfilerBundle Add missing use statement.;QABranch.Bug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRThe RouterController creates a Request in getTraces but does not have a use statement which causes an exception when trying to view profile routing in ..       The text was updated successfully but these errors were encountered
Extend AbstractFactory for easy extending;by this way it is possible to use the hole abstract class and just override the last getter functions. it will this class more reuseable       The text was updated successfully but these errors were encountered
Security ACL Allows ObjectIdentity and UserSecurityIdentity to work with proxies;Right now ACL doesn't really work with Doctrine either ORM ODM etc. because it tries to retrieve the actual class of the objects. We can still create new ObjectIdentity and UserSecurityIdentity with the constructors but most people just use the static methods which are easier to use.This PR is far from perfect but it is IMO the only thing we can do in the . branch without too many modifications.For . I suggest creating a new service able to retrieve an ObjectIdentityInterface from a given object.This service would be given a list of other services with a given DIC tag and would iterate on this list until one gives a valid Identity. At last we would call a default one the actual implementation.Bundles like Doctrine ORM ODM etc. would then each have to create a new service correctly tagged which would check if the given object is supported etc.This would maybe also allows for instance Doctrine to retrieve an object identity even if the primary key is not retrieved through getId since the EntityManager knows what identifier identifies which object.       The text was updated successfully but these errors were encountered
HttpKernel Use VarDumper in the profiler;QABranchmasterBug fixnoNew featureyesBC breaksnoDeprecationsyesTests passyesFixed ticketspart of LicenseMITDoc PRcc javiereguiluz nicolasgrekas As you're the main maintainers of the changed features.SummaryThe varToString method is deprecated in favor of cloneVar using the VarCloner and dump using the VarDumper.This allows to show more detailed and better formatted data in the profiler.The Data class of VarDumper is made serializable to reduce the size of the stored profiler data.ScreenshotsFurther ImprovementsChange the dump colors I've now implemented a very basic light theme but my colorskills are close to zero so a proper designer should look at it       The text was updated successfully but these errors were encountered
FrameworkBundleValidator Fix apc cache service deprecation;QABug fixyesNew featurenoBC breaksnoDeprecationsyesTests passyesFixed ticketsLicenseMITDoc PRRelated to I guess the deprecation was on the wrong service.Also no deprecation notice was triggered about using apc as the value of the framework.validation.cache configuration option. This PR adds the missing deprecation.?ô¥ NOTE The standard edition will need to be updated here.       The text was updated successfully but these errors were encountered
Profiler Fix text selection click on file links on exception pages;QABranch. Bug fixyesNew featureno BC breaksnoDeprecationsno Tests passyesFixed tickets LicenseMITDoc PRNAI don't really know the purpose of this css rule here but I admit it's quite frustrating not to be able to select something here.This PR also prevents the following annoying behavior selecting text collapsesuncollapses tracesAbout the trick used I think the browser support is safe enough httpscaniuse.comsearchwindow.getSelectionEDIT new commit added which allows to fix        The text was updated successfully but these errors were encountered
VarDumper fix .sfdump zindex debug bar conflict;QABug fixnoNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRJust changed the zindex because the twig dump is actually displaying over the debug bar .       The text was updated successfully but these errors were encountered
Form fix deprecated use;QABug fixnoNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRA mistake made on master only       The text was updated successfully but these errors were encountered
Security Adding toString method to Role class;QABug fixnoNew featureyesBC breakspossibly DeprecationsnoTests passyesFixed ticketsNALicenseMITThis PR proposes adding the toString method to the \Symfony\Component\Security\Core\Role\Role class. This should ease the comparison of role strings and instances of Role itself. For example in the FOSUserBundle the User model contains roles which are represented as strings. This makes comparisons between arrays of Role objects and role strings difficult without creating your own Role class with a toString and this isn't always desirable.I found some conversation around adding the \Seriazable interface to the Role class and I realise that this might also be considered a BC break if people are relying on the fact that it will not cast to a string.       The text was updated successfully but these errors were encountered
Form Add allowextrafields option on forms;This is specially useful when creating different nameless GET forms on the same page ex pagination and search.       The text was updated successfully but these errors were encountered
Form Fix choice field validation;To validate a choice field we use an array of allowed values. It can be guessed from Choice constraint or specified when calling add on the FormBuilder.The validation is currently done using values of the given array. With this pull request we validate with the keys of the array which makes much more sense as this is what is transfered in the POST request.Without this patch guessing is useless validation always fails and we're forced to give the list of allowed values arraykeys on what's given to Choice constraint when calling add on the FormBuilder.This commit fixes issues and .       The text was updated successfully but these errors were encountered
WebProfiler Added deprecation message and original color back;For some reason the deprecation message and its original yellow color were removed. This means that you don't know the error without a stack you would just see an empty bar and they aren't easy to find anymore in a long list of logs yeah the filter can be used....BeforeAfterQABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Fixed pathinfo calculation for requests starting with a question mark.;QABranch.Bug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRWith improper strpos result check calculated pathinfo for requests starting with '' equals to request itself.Correct pathinfo for those requests should be ''.       The text was updated successfully but these errors were encountered
Update srcSymfonyComponentConfigLoaderFileLoader.php;from KniasConfigac       The text was updated successfully but these errors were encountered
VarDumper implemented expanding of all children;Fixes It was not possible to expand all children of a big collection. This made the VarDumper component unpracticle if youwant to get an overview on a deeply nested datastructure.This PR shows a second double arrow infront of the single arrow. Clicking on it expands the whole subtree.QABug fixnoNew featureyesBC breaksnoDeprecationsnoTests passyesFixed tickets LicenseMIT       The text was updated successfully but these errors were encountered
Form Improved debugger icon;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesLicenseMITChanges the form icon in the toolbar to be pixel perfect.beforeafter       The text was updated successfully but these errors were encountered
Security Revert PR due to issue;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
Translation Added unescaping of ids in PoFileLoader;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsnaLicenseMITDoc PRnaAlthough it is not directly described in gettext docs msgid should be unescaped too. The other reason to unescape msgid is symmetry between PoFileLoader and PoFileDumper. The dumper escapes both msgid and msgstr values but the loader unescapes only msgstr.       The text was updated successfully but these errors were encountered
Serializer enable property info in framework bundle;QABranch.Bug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRI've been wondering why the datetime normalizer won't work in combination with object normalizer in symfony . by default. I also found nothing in the documentation. Only httpsymfony.comblognewinsymfonydatetimenormalizer but here is not described how to use it with the object normalizer and how to configure the config.yml.After debugging i found out that the object normalizer don't use the new property info component. With my change you can enabled it with following config serializer enabled true propertyinfo Should i add analog to enableannotation an enablepropertyinfo option serializer enabled true enablepropertyinfo true propertyinfo        The text was updated successfully but these errors were encountered
Create PULLREQUESTTEMPLATE.md;QABug fixnoNew featurenoBC breaksnoDeprecationsnoTests passnaFixed ticketsnaLicenseMITDoc PRnaGithub has support for issue and template files issuetemplate.md and pullrequesttemplate.md. The contents of these files will autopopulate new issuesPRs.This PR creates a PULLREQUESTTEMPLATE.md file using the Symfony Pull Request Template.See httpsgithub.comblogissueandpullrequesttemplates       The text was updated successfully but these errors were encountered
Form Improve triggering of the setDefaultOptions deprecation error;Bundles wanting to support both Sf . and Sf . which is a common requirement as both have at least more years of maintaince would have custom form types with both option methods defined setDefaultOptions for . support and configureOptions for .. support. In such case I don't think there is anything wrong with the code and a deprecation error shouldn't be triggered.QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PR       The text was updated successfully but these errors were encountered
TwigBundle fix configuration tree for paths;QABug fixyesNew featurenoBC breaksnoDeprecationsnoTests passyesFixed ticketsLicenseMITDoc PRnaThis is a joint effort with mdavis and cordoval ?æ? pairing up and warming for hacking day in Warsaw       The text was updated successfully but these errors were encountered
Form Choice fix;Form Remove choice or choicelist requirement as the following conditions already check enough and this condition prevents empty select forms populated by ajax for example       The text was updated successfully but these errors were encountered
FrameworkBundle Fix init bundle command;Fixed UtilMustache to GeneratorGeneratorsee commit fbcb       The text was updated successfully but these errors were encountered
Updated checkconfig with cgroupv controllers;Fixes  What I didAdded cgroupv available controllers and check for CONFIGCGROUPBPF in contribcheckconfig.sh How I did itReading the sysfscgroupcgroup.controllers file for available controllersAdded a new CheckFlag for CONFIGCGROUPBPF to BPFCGROUPDEVICE support How to verify itOutput Ran on Linux ..generic Description for the changelogUpdate in contribcheckconfig.sh cgroupv controllers and CONFIGCGROUPBPF A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
docker info silence unhandleable warnings;fixes  What I didThe following warnings in docker info are now discarded because there is no action user can actually take.On cgroup vWARNING No blkio weight supportWARNING No blkio weightdevice supportOn cgroup vWARNING No kernel memory TCP limit supportWARNING No oom kill disable supportdocker run still prints warnings when the missing feature is being attempted to use. How I did itSee the code How to verify itRun docker info Description for the changelogdocker info silence unhandleable warnings A picture of a cute animal not mandatory but encouraged?Éº       The text was updated successfully but these errors were encountered
rootless support pidhost;What I didrootless support pidhostFix Also port TestRunModePIDHost from CLI test to API test How I did itBy substituting procfs mount with rbind httpsgithub.comcontainerspodmanblobv..rcpkgspecgengenerateoci.goLL
pkgarchive allow mknodding FIFO inside userns;What I didFix Also attempt to mknod devices.Mknodding devices are likely to fail but still worth trying when running with a seccomp user notification. How I did itBy allowing mknodding FIFO inside userns. How to verify itdocker pull dock
profiles seccomp update to Linux . syscall list;These syscalls some of which have been in Linux for a while but weremissing from the profile fall into a few bucketscloserange epollwait are just extensions of existing safefor everyone syscalls.The mountv API syscalls fs movemount opentree areall equivalent to aspects of mount and thus go into theCAPSYSADMIN category.processmadvise is similar to the other process syscalls andthus goes in the CAPSYSPTRACE category.Signedoffby Aleksa Sarai asaraisuse.de       The text was updated successfully but these errors were encountered
Fix spurious error from docker load;What I didFixed the spurious error ...is not a valid parent for... when using docker load. Closes  How I did itAdded an Equal method to History which normalizes UTCequivalent times into UTC before comparison. This is used instead of reflec
volumeslocal gofmt;What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but t
Fix builder inconsistent error on buggy platform;addresses dockerforlinuxWhen pulling an image by platform it is possible for the image'sconfigured platform to not match what was in the manifest list.The image itself is buggy because either the manifest list is incorrector the image config is incorrect. In any case this is preventing peoplefrom upgrading because many times users do not have control over thesebuggy images.This was not a problem in . because we did not compare on platformbefore. It just assumed if we had the image it was the one we wantedregardless of platform which has its own problems.Example Dockerfile that has this problemFROM platformlinuxarm ks.gcr.iobuildimagedebianiptablesbusterv..RUN echo helloThis fails the first time you try to build after it finishes pulling butbefore performing the RUN command.On the second attempt it works because the image is already there anddoes not hit the code that errors out on platform mismatch Actually itignores errors if an image is returned at all.Must be run with the classic builder DOCKERBUILDKIT.This should mostly be safe and certainly safer than . since we only check this immediately after a pull.Example output before the fixrootdfffgosrcgithub.comdockerdocker DOCKERBUILDKIT docker build t test .Dockerfile.fix Sending build context to Docker daemon .kBStep FROM platformlinuxarm ks.gcr.iobuildimagedebianiptablesbusterv..busterv.. Pulling from buildimagedebianiptablesbdba Pull complete eacba Pull complete eeae Pull complete ccbdfe Pull complete eadafc Pull complete ecdcd Pull complete Digest shacaeedcbebbdfccacfcbddfefaeaeaStatus Downloaded newer image for ks.gcr.iobuildimagedebianiptablesbusterv..image with reference ks.gcr.iobuildimagedebianiptablesbusterv.. was found but does not match the specified platform wanted linuxarm actual linuxamdrootdfffgosrcgithub.comdockerdocker Example output after the fixrootdeagosrcgithub.comdockerdocker DOCKERBUILDKIT docker build t test .Dockerfile.fix Sending build context to Docker daemon .kBStep FROM platformlinuxarm ks.gcr.iobuildimagedebianiptablesbusterv..busterv.. Pulling from buildimagedebianiptablesbdba Pull complete eacba Pull complete eeae Pull complete ccbdfe Pull complete eadafc Pull complete ecdcd Pull complete Digest shacaeedcbebbdfccacfcbddfefaeaeaStatus Downloaded newer image for ks.gcr.iobuildimagedebianiptablesbusterv..WARNING Pulled image with specified platform linuxarm but resulting image's configured platform linuxamd does not match.This is most likely caused by a bug in the build system that created the fetched image ks.gcr.iobuildimagedebianiptablesbusterv...Please notify the image author to correct the configuration. eeeStep RUN echo hello Running in ebhelloRemoving intermediate container eb cdcadbceSuccessfully built cdcadbceSuccessfully tagged testlatest       The text was updated successfully but these errors were encountered
contribcheckconfig.sh fixes for cgroup v and kernel v.x;fixes fixes contribcheckconfig.sh support for cgroupvBeforeGenerally Necessarycgroup hierarchy nonexistentsee httpsgithub.comtianoncgroupfsmountAfterGenerally Necessarycgroup hierarchy cgroupvMake check for various CONFIG options recently removed from the kernel conditional.See individual commits for details.       The text was updated successfully but these errors were encountered
integration fix TestBuildUserNamespaceValidateCapabilitiesAreV not using frozen image;Commit ff added this test to verify loading of images that were built with usernamespaces enabled.However because this test spins up a new daemon not the daemon that's set up by the testsuite's TestMain which loads the frozen images.As a result the debianbullseye image was pulled from Docker Hub when running the testCalling POST v.imagesloadquietApplying tar in gosrcgithub.comdockerdockerbundlestestintegrationTestBuildUserNamespaceValidateCapabilitiesAreVddbbroot.overlayffacafbcbcffedccccaddiff storagedriveroverlayApplied tar shafeedbcadccafbeaaccfdc to ffacafbcbcffedccccad size Calling POST v.buildbuildargsnullcachefromnullcgroupparentcpuperiodcpuquotacpusetcpuscpusetmemscpusharesdockerfilelabelsnullmemorymemswapnetworkmodermshmsizetcapabilitiesA.targetulimitsnullversionTrying to pull debian from httpsregistry.docker.io vFetching manifest from remote digestshafdbadcfcbedaafabaeedd errornil remotedocker.iolibrarydebianbullseyePulling ref from V registry debianbullseye...This patch updates TestBuildUserNamespaceValidateCapabilitiesAreV to load the frozen image. StartWithBusybox is also changed to Start because the test is not using the busybox image so there's no need to load it.In a followup we should probably add some utilities to make this easier to set up and to allow passing the list frozen images that we want to load without having to hardcode the image name to load.       The text was updated successfully but these errors were encountered
builder ensure libnetwork state files do not leak;Apparently calling sandbox.Delete is not enough to remove all the libnetwork state files eg. the hosts and resolv.conf file. So to avoid leaks clean up the sandbox state directory manually.Looking at what happens on regular containers it seems that netns is cleaned up by finalized and not directly by code. This could be investigated more in the future as could leak on restarts etc. The hostsresolv.conf is stored in container state directory and cleaned up with container afaics.Signedoffby Tonis Tiigi tonistiigigmail.com       The text was updated successfully but these errors were encountered
Fix Error in daemonunix.go and dockerclirununittest.go;Signedoffby gunadhya gunadhyausers.noreply.github.comfixes  What I did   mobyintegrationclidockerclirununixtest.go   Line  in dbc       expected Minimum memory reservation allowed is MB       mobydaemondaemonunix.go   Line  in c       return warnings fmt.ErrorfMinimum memory reservation allowed is MB    Fixed the error message as requested comment How I did itChanged the error message from MB to MB How to verify itgunadhyaf Description for the changelogerror message stating the minimum memory reservation allowed is changed from MB to MB A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Make test work with rootless mode;Using d.Kill with rootless mode causes the restarted daemon to notbe able to start containerd it times out.Originally this was SIGKILLing the daemon because we were hoping to nothave to manipulate on disk state but since we need to anyway we canshut it down normally.I also tested this to ensure the test fails correctly without the fixthat the test was added to check for.       The text was updated successfully but these errors were encountered
Add shim config for custom runtimes for plugins;This fixes a panic when an admin specifies a custom default runtimewhen a plugin is started the shim config is nil.Fixes dockerforlinuxfixes dockerforlinux       The text was updated successfully but these errors were encountered
docs fix typos in API docs;carry of closes        The text was updated successfully but these errors were encountered
Reject null manifests during tar import;What I didI was using kaniko to build images which erroneously produced a tarball with a manifest containing null. Surprisingly docker accepted the manifest but... didn't do anything.This is not outlined in the docker spec but I believe null manife
cmddockerd sdnotify STOPPING when shutting down;Signal systemd when we start shutting down to complement the READY notifythat was originally implemented in eb related to From sdnotifySTOPPINGTells the service manager that the service is beginning its shutdown. This is usefulto allow the service manager to track the service's internal state and present it tothe user. Description for the changelog systemd send sdnotify STOPPING when shutting down A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
overlay pageSize Fix an offbyone bug;fixes dockerforlinux Overlay mount fails for larger Dockerfiles when length of dataroot is The code was not considering that C strings are NULLterminated so we need to leave one extra byte.Without this fix the testcase in dockerforlinux fails withStep RUN echo  Running in ddeacbeRemoving intermediate container ddeacbe aaaStep RUN echo error creating overlay mount to overlaydabccdcebcffaedddcbdbeabdfinitmerged no such file or directorywith the output of dmesg T asSat Dec overlayfs failed to resolve 'overlayeabcabbeabfadbfaefcfaainitwor' with this fix you get the expectedStep RUN echo  Running in fedaemax depth exceeded What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Fix a potential hang when starting after a nonclean shutdown;What I didThis fixes a hang discovered by Docker Desktop users when migrating to v.. when docker is stopped abruptly which can happen on Windows Restart with WSL restarting could potentially hang. How I did itPrevious startup sequence used t
fuseoverlayfs fix godoc;fuseoverlayfs storage driver had wrong godoc comments that were copied from overlay.       The text was updated successfully but these errors were encountered
Fix service job mode filter;What I didPreviously filtering based on mode would fail with jobs because users expect to filter on mode replicatedjob or globaljob but the filtering code was checking for replicatedjob or globaljob. Now the filter matches the correct mode string.
Vendor in Libnetwork changes;Brings in mobylibnetworkfixes Upgrade to . fails to release ports published to IPv literal addresses       The text was updated successfully but these errors were encountered
vendor opencontainersselinux v..;keeping the remove selinux tag changes separate in in case we need the Go . changes into . but not want the buildtag changesfull diff opencontainersselinuxv.....v..Implement getdefaultcontextwithlevel from libselinuxWrap some syscalls lgetattr lsetattr fstatfs statfs to retry on EINTR.Improve code quality by turning fixing many problems found by lintersUse bufio.Scanner for parsing labels and policy confilabelgCache the value for SELinux policy directorytest on ppcle and go .       The text was updated successfully but these errors were encountered
daemon improve log messages during startup shutdown;Consistently set container ID as a field for log messages so that logs can be associated with a container.For example to correlate messages like belowTZ dockerd timeT.Z leveldebug msgcontainer mounted via layerStore varlibdockeroverlayfaeecabadfdcefebabcdfcfbemerged xad xadWith this patch logs look likeINFOT.Z Loading containers start.DEBUT.Z processing event stream modulelibcontainerd namespacemobyDEBUT.Z loaded container containerdecfddabcebcfaebcefbcdebc pausedfalse runningfalseDEBUT.Z loaded container containerffacddeceedadfddbdcc pausedfalse runningfalseDEBUT.Z loaded container containereccbbcecbaebfbeffecddfad pausedfalse runningfalseDEBUT.Z loaded container containerdeeeaebeebcbecdecacaaeaffeacd pausedfalse runningfalseDEBUT.Z loaded container containerddbdcadeebcbacecdbadacc pausedfalse runningfalseDEBUT.Z loaded container containerbccccfcfbbefadacadebb pausedfalse runningfalseDEBUT.Z loaded container containerbafbfffafabadbfaaaadbdbfacc pausedfalse runningfalseDEBUT.Z loaded container containerbfffcfdefbdefcbfbdceaffac pausedfalse runningfalseDEBUT.Z restoring container containerbfffcfdefbdefcbfbdceaffac pausedfalse runningfalseDEBUT.Z restoring container containerdeeeaebeebcbecdecacaaeaffeacd pausedfalse runningfalseDEBUT.Z restoring container containerbafbfffafabadbfaaaadbdbfacc pausedfalse runningfalseDEBUT.Z restoring container containerbccccfcfbbefadacadebb pausedfalse runningfalseDEBUT.Z restoring container containerffacddeceedadfddbdcc pausedfalse runningfalseDEBUT.Z restoring container containerdecfddabcebcfaebcefbcdebc pausedfalse runningfalseDEBUT.Z restoring container containerddbdcadeebcbacecdbadacc pausedfalse runningfalseDEBUT.Z restoring container containereccbbcecbaebfbeffecddfad pausedfalse runningfalse...INFOT.Z Loading containers done.       The text was updated successfully but these errors were encountered
Vendor buildkit to v..;Signedoffby Tibor Vass tibordocker.comDiff mobybuildkitd...v..llb make sure fileop uses the platform for current state mobybuildkitsolver delay before discarding job mobybuildkitfix building from git url without a protocol mobybuildkit not affecting mobyflightcontrol fix possible invalid cancellation mobybuildkitsolver fix slowcache status tracking with preprocess mobybuildkithandle foreign mediatypes on push mobybuildkit not affecting mobyexporter return config digest when exporting singlearch image mobybuildkit not affecting mobyallow nil return from frontend mobybuildkit       The text was updated successfully but these errors were encountered
vendor bump etcd v..;fixes Bump etcd to v.. which includes etcdioetcdto fix Full diff etcdioetcdv.....v..This is a draft pending a .. release etcdioetcd       The text was updated successfully but these errors were encountered
Dockerfile switch to stable dockerfile frontend;The RUN mount options have been promoted to the stable channel so we can switch from experimental to stable.Note that the syntax directive should no longer be needed now but it's good practice to add a syntaxdirective to allow building on older versions of docker.       The text was updated successfully but these errors were encountered
vendor opencontainersselinux v.. and remove selinux buildtag and stubs;followup to relates to opencontainersselinuxfull diff opencontainersselinuxv.....v..Remove selinux build tag       The text was updated successfully but these errors were encountered
Vendor in libnetwork changes;Vendor in IPTables fixesmobylibnetworkmobylibnetworkSignedoffby Arko Dasgupta arko.dasguptadocker.com What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Fix converting status code to error canceled;closes  How to verify itgo test errdefshttphelperstest.go Description for the changelogFix converting status code to error canceled       The text was updated successfully but these errors were encountered
Revert Add multiuser.target to After;This reverts commit cawhich caused the docker service to not be starting or delayedstarting the service in certain conditions.relates to introduced in dockerdockercepackaging systemd add multiuser.target to After listrelates to systemctl docker start get stuck in cloudinitrelates to dockerforlinux Docker service not starting in centos .relates to dockerforlinux Docker . daemon takes minutes to start after rebootrelates to dockermachine Latest docker release .. doesn't work with dockermachine       The text was updated successfully but these errors were encountered
docs add API v.;This copies the current swagger.yaml to the docs as v..       The text was updated successfully but these errors were encountered
compression add support for the zstd algorithm;zstd is a compression algorithm that has a very fast decoder whileproviding also good compression ratios. The fast decoder makes itsuitable for container images as decompressing the tarballs is a veryexpensive operation.opencontainersimagespec added supportfor zstd to the OCI image specs.Signedoffby Giuseppe Scrivano gscrivanredhat.com What I didadded read support for layers compressed with zstd How I did itadded a new zstd compression format to pkgarchive How to verify ittry pulling an image compressed with zstd e.g. docker pull gscrivanozstdchunkedfedora Description for the changelogsupport zstd compressed layers A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Remove more registry v code carry;closes rebasecarry of with an extra commit to check if preserving some of the fallback behavior fixes the failures on that PR       The text was updated successfully but these errors were encountered
daemon remove migration code from docker . to .;This code was added in c to fix upgrades from docker . to . with existing containers .Given that any container after . should have the correct configuration already it should be safe to assume this upgrade logic is no longer needed.       The text was updated successfully but these errors were encountered
Add fallback for pull by tag;Some registries seem to be nonconformant and return a not found errorwhen pulling by digest which docker now does all the time.To work around this fallback when all of the following are trueImage reference is a tagTagdigest resolution succeedsFetch by resolved digest fails with a not found error.This is intentionally not caching the manifests to reduce complexity forthis edge case.Closes        The text was updated successfully but these errors were encountered
vendor remove vendored golang.orgxtools as it's not needed;This dependency was added in cdbfbedaddfbfbbeeca but looks like the code was vendored manually or vendored then removed from vendor.conf.This commit removes the vendored files as they are not needed to build our binaries.       The text was updated successfully but these errors were encountered
vendor BuildKit daaebfffbecafa;Followup to .Also updates containerd commentEDIT by tiborvass see comment       The text was updated successfully but these errors were encountered
Fix jobsrelated bug in task conversion;NOM
Dishonoured capabilities test;What I didTests so that the fix in can be verified. How I did itAdds debianbullseye as a frozen image debianbuster doesn't support the n option to getcap.The test would be much harder to write otherwise and much uglier.As it sta
update containerd binary to v.. CVE;full diff containerdcontainerdv.....v..Release notesWelcome to the v.. release of containerdThe third patch release for containerd . is a security release toaddress CVE. See GHSAxwfxcr for more detailsGHSAxwfxcrSignedoffby Sebastiaan van Stijn githubgone.nl What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
. update containerd binary to v.. address CVE;update containerd binary to v..full diff containerdcontainerdv.....v..Release notesWelcome to the v.. release of containerdThe ninth patch release for containerd . is a security release to addressCVE. See GHSAxwfxcr for more detailsGHSAxwfxcrupdate containerd binary to v..full diff containerdcontainerdv.....v..Release notesWelcome to the v.. release of containerdThe eighth patch release for containerd . includes several bug fixes and updates.Notable UpdatesFix metrics monitoring of v runtime tasksFix nil pointer error when restoring checkpointFix devmapper device deletion on rollbackFix integer overflow on WindowsUpdate seccomp default profile       The text was updated successfully but these errors were encountered
Networking add regression test for networks endpoint with trailing slash;relates to relates to closes This adds a regression test for make DOCKERGRAPHDRIVERvfs TESTFILTER'TestNetworkList' testintegrationINFO Testing against a local daemon RUN TestNetworkList RUN TestNetworkListnetworks PAUSE TestNetworkListnetworks RUN TestNetworkListnetworks PAUSE TestNetworkListnetworks CONT TestNetworkListnetworks CONT TestNetworkListnetworks PASS TestNetworkList .s PASS TestNetworkListnetworks .s PASS TestNetworkListnetworks .sPASS       The text was updated successfully but these errors were encountered
Use v capabilities in layer archives;What I didFixes When building images in a usernamespaced container v capabilities arestored including the root UID of the creator of the usernamespace.This UID does not make sense outside the build environment however. Ifthe image is run
Fix permissions oci fixtures;Fix permission for oci fixture files ie. remove executable bit on these json files       The text was updated successfully but these errors were encountered
Skip some root tests;Hello here are two patches to conditionally skip tests that require root for you to consider.More contextIn Debian we have a patch that skips privileged tests under one big ugly patch httpssalsa.debian.orgdockerteamdockerblobmasterdebianpatchestestskipprivilegedunittests.patchI'm working on splitting this patch into smaller patches so that I can submit what's relevant here in this PR.Thanks        The text was updated successfully but these errors were encountered
update containerd binary to v..;NOTE the Dockerfile currently uses a single version of Golang for allstages. This means that currently all binaries are built with Go..x including the containerd binary upstream containerd switchedto use Go ..full diff containerdcontainerdv.....v..Release notesWelcome to the v.. release of containerdThe second patch release for containerd . includes multiple minor fixesand updates.Notable UpdatesFix bug limiting the number of layers by default containerdcriFix selinux shared memory issue by relabeling devshm containerdcriFix unknown state preventing removal of containers containerdcontainerdFix nil pointer error when restoring checkpoint containerdcontainerdImprove image pull performance when using HTTP . containerdcontainerdUpdate default seccomp profile for pidfd containerdcontainerdUpdate Go to .WindowsFix integer overflow on Windows containerdcontainerdFix lcow snapshotter to read trailing tar data containerdcontainerd Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
vendor libnetwork to fix mix up between IPv and IPv;Signedoffby Tibor Vass tibordocker.comRelated to        The text was updated successfully but these errors were encountered
testing update dockerpy ..;run dockerpy integration tests of the latest releasefull diff dockerdockerpy.......       The text was updated successfully but these errors were encountered
vendor gotest.tools v..;assert fixes a bug that would cause a panic if there were anyfunction calls before assert.Check on the same linegolden create the directory if it does not exist when run withtest.updategoldenfull diff gotestyourselfgotest.toolsv.....v..       The text was updated successfully but these errors were encountered
replace json.Unmarshal with NewFromJSON in Create;fixes  What I didReuse NewFromJSON to handle no rootfs key situation in imagestore.go to solve the issue in  How I did itSimply replace the json.Unmarshal function with NewFromJSON in imageimage.go How to verify itRunning this mainly modified from will show invalid image JSON no RootFSpackage mainimport  github.comdockerdockerimage os ioioutil runtime github.comdockerdockerlayer fmttype mockLayerGetReleaser structfunc ls mockLayerGetReleaser Getlayer.ChainID layer.Layer error  return nil nilfunc ls mockLayerGetReleaser Releaselayer.Layer layer.Metadata error  return nil nilfunc main tmpdir err ioutil.TempDir imagesfsstore defer os.RemoveAlltmpdir if err nil  fmt.Printerr os.Exit  fsBackend err image.NewFSStoreBackendtmpdir if err nil  fmt.Printerr os.Exit  mlgrMap makemapstringimage.LayerGetReleaser mlgrMapruntime.GOOS mockLayerGetReleaser store err image.NewImageStorefsBackend mlgrMap if err nil  fmt.Printerr os.Exit  err store.Createbyte if err nil  fmt.Printerr os.Exit  Description for the changelogHandle an image json that rootfs key is not present. A picture of a cute animal not mandatory but encouraged?Éò       The text was updated successfully but these errors were encountered
Move container exit state to after cleanup.;Before this change there is no way to know if container runtimeresources have been cleaned up unless you actually remove the container.This change allows callers of the wait API or the events API to knowthat all runtime resources for the container are released e.g. IPaddresses.       The text was updated successfully but these errors were encountered
dockerdrootlesssetuptool.sh show more helpful error messages;What I diddockerdrootlesssetuptool.sh show more helpful error messages How I did itPrint how to show daemon logsPrint a workaround for . This error happens only when Rootless Docker was installed as RPM on Fedora with SELinux enabled.
vendor github.commobyterm beabbebfdfdffdf;full diff mobytermfaf...beabbeFix windows integer overflow on GOOSwindows GOARCHarmgo.mod github.comcreackpty v..v.. Add arm support for OpenBSDv.. Fix CTTY to work with go.CI fix Go version matrix and drop go . add go .CI remove sudo to fix incorrect Go versions incorrect PATH GOROOT Description for the changelog Fix windows integer overflow on GOOSwindows GOARCHarm A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
vendor update github.comMicrosofthcsshim v.. back to tagged release;This switches the hcsshim dependency back to tagged releases instead of the specialmoby branch. This makes the dependency align with both BuildKit and containerdwhich use these versions.The switch to the moby branch was done in to bring in a fix for image import without having to bring in additional changes commentWe changed to the moby branch for a couple of reasonsAllows us to take this important change without needing to also pull in allof the other work that has been going on in the repo.moby uses an older set of APIs exposed from hcsshim based on the HCS vfunctionality. Going forwards we have discussed deprecatingremoving theseAPIs from the mainline branch in hcsshim so our thinking was we could keepthis moby branch around to ensure we don't break compatibility there.... Long term the best path here is to get moby using containerd as thebackend on Windows which should alleviate these issues.full diff httpsgithub.comMicrosofthcsshimcomparedcbffdbaebbaa..v..       The text was updated successfully but these errors were encountered
vendor BuildKit v..rc containerd and dependencies;vendor golang.orgxcrypto cffbffccfcaaabcdincluded from full diff golangcryptob...cffrelevant changespkcs document that we use the wrong PEM typepkcs drop PKCS attributes with unknown OIDsocsp Improve documentation for ParseResponse and ParseResponseForCertssh improve error message for KeyboardInteractiveChallengessh remove slow unnecessary diffiehellmangroupexchange primality checkother changes not in vendorsshterminal replace with a golang.orgxterm wrapperDeprecates sshterminal in favor of golang.orgxtermsshterminal add support for zossshterminal bump xterm dependency to fix jsnaclnaclauth use Size instead of KeySize for Sum outputsha remove gonocheckptr annotationvendor github.comtonistiigifsutil fbbefbbfafacadaactonistiigifsutilcedf...fcopy use Clonefileat from golang.orgxsysunix on macOSgo.mod update opencontainersgodigest v..Add github action CIgithub test go.vendor github.comcontainerdttrpc v..full diff containerdttrpcv.....v..fix bug failed to assert net error due to error wrapfixes ttrpc client receive read connection reset by peer unknownclient add UserOnCloseWait functiontravis add go .vendor github.comcontainerdfifo cbcfbbacabfcadacbfull diff containerdfifofa...cAdd OpenFifoDupuse golang.orgxsysunix for dup fixes build on armvendor github.comcontainerdcgroups bcffdadddefcdfffull diff containerdcgroupsa...bcvstats add all fields of memory.oomcontrolmemory remove wrong memory.kmem.limitinbytes checkCI test against Go .vendor github.comcontainerdcontainerd edcdccedffebadbcfull diff containerdcontainerdde...edcintegrates containerdcri into main containerd repositoryseccomp add pidfdopen and pidfdsendsignalseccomp add pidfdgetfd syscall gated by CAPSYSPTRACEdocker don?ÇÖt hide pusher response errorvendor github.commobybuildkit v..rcfull diff mobybuildkitf...v..rcdockerfile rename experimental channel to labsdockerfile build fix not exit when meet error in load config metadatacopy containerd.UnknownExitStatus to local const to reduce dependency graph in clientexecutor switch to docker seccomp profileadd retry handlers to pushpullSSHbased auth for llb.Git operationsAllow gateway execing into a failed solve with an exec opFix parsing sshbased git sourcesFix sshkeyscan to work with ipvfix assumption that ssh port must be digitsvendor github.comMicrosoftgowinio v..vendor github.comtonistiigifsutil v..fbbvendor containerd v...edcdcvendor golang.orgxcrypto v..cffbffc       The text was updated successfully but these errors were encountered
. dockerlibnetwork ebaacdeaefcf bump. branch;Bumping . libnework to address nil deference mobylibnetwork       The text was updated successfully but these errors were encountered
vendor dockerlibnetwork bdfbbbaccdeababaafaf;Bumping libnework to address nil deference mobylibnetwork       The text was updated successfully but these errors were encountered
vendor github.comMicrosoftgowinio v.. was tagged;Same commit as we were already vendoring so only updating the comment httpsgithub.commicrosoftgowinioreleasestagv.. Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Fix error handling;closes  What I didadded Unwrap How I did itmagic How to verify itdaf Description for the changelogFix error handling        The text was updated successfully but these errors were encountered
seccomp add pidfd syscalls;What I didAdded pidfdgetfd open sendsignal syscalls into default seccomp profile closes issue . How I did itBy adding syscall names into the json file. How to verify itSee dockerforlinux reproduction steps. Description for t
Jenkinsfile remove ee image stage;The image that's built is not pushed anywhere and is justbuilding the same as the main image already builds so didn'tadd value.       The text was updated successfully but these errors were encountered
pkgsystem fix compile on darwin macOS;relates to dockercli       The text was updated successfully but these errors were encountered
testutil remove remaining use of deprecated pkgmount;looks like I missed this one in        The text was updated successfully but these errors were encountered
daemon unexport internal functions and some minor refactoring;daemon unexport IsRunningSystemdThis utility was added after . and is only used in the daemon codeitself so we can unexport it until there's an external use for it.Also updated the description because the runc code already copied itfrom coreosgosystemd so better to describe the actual source.daemon use sync.Once for systemd detectiondaemon unexport VerifyCgroupDriverdaemon unexport ModifyRootKeyLimitdaemon move DefaultShimBinary DefaultRuntimeBinary to config package       The text was updated successfully but these errors were encountered
DEL remove useless assert;remove useless assert keep code clean.       The text was updated successfully but these errors were encountered
use containerdcgroups to detect cgroups v;libcontainer does not guarantee a stable API and is not intended for external consumers. This patch replaces some uses of libcontainercgroups with containerdcgroups.relates to containerdcontainerd comment and some other discussions about libcontainer usesLooks like the remaining uses of libcontainercgroups are now to initialise the cpurt controller and to detect which cgroups are supported for docker info I didn't find equivalents for that yet in containerdcgroups but possibly we can add those       The text was updated successfully but these errors were encountered
builder fix detection of experimental stream option deprecated;fixes Commit caec deprecated the experimental stream option for the legacy builder adding an error message is a client attempted to use this feature.However the detection used the sessionID sessionxxx query parameter which happens to be set automatically by the CLI if it detects that the daemon has session support. Because of this builds fail when trying to perform them on a daemon with the experimental flag set.This patch changes the detection to look for the remote query parameter which is set to clientsession when using the stream option with the classic nonBuildkit builder.Before this change running docker build with an older . or older cli against a daemon with experimental enabled caused an error dockerd experimental  docker pull docker. docker run it rm v varrundocker.sockvarrundocker.sock docker. sh c 'echo FROM scratch | docker build 'Sending build context to Docker daemon .kBError response from daemon experimental session with v builder is no longer supported use builder version v BuildKit instead docker run it rm v varrundocker.sockvarrundocker.sock w foo docker. sh c 'echo FROM scratch Dockerfile docker build stream .'Error response from daemon experimental session with v builder is no longer supported use builder version v BuildKit insteadWith this patch the error only occurs when trying to use the experimental stream option dockerd experimental  docker pull docker. docker run it rm v varrundocker.sockvarrundocker.sock docker. sh c 'echo FROM scratch | docker build 'Step FROM scratch No image was generated. Is your Dockerfile empty docker run it rm v varrundocker.sockvarrundocker.sock w foo docker. sh c 'echo FROM scratch Dockerfile docker build stream .'Error response from daemon experimental session with v builder is no longer supported use builder version v BuildKit instead Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Don't set image on containerd container.;We aren't using containerd's image store so we shouldn't be settingthis value.This fixes container checkpoints where containerd attempts tocheckpoint the image since one is set but the image does not exist incontainerd.Fixes        The text was updated successfully but these errors were encountered
Unhide containerdnamespace flags;The daemon expects to managehandle everything going into the containerd namespace it uses and things break when it shares that namespace with a second instance so we should expose these flags and expect users that want two daemons sharing a containerd instance to use separate namespaces for them. Description for the changelogexpose containerdnamespace for running multiple daemons against the same containerd instance A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Reinstate Windows CI Pipeline usefulness;What I didFixed falsegreen state from the Windows CI pipeline when unit tests failed.This should apply to integration tests too.Fixed failing unit tests that snuck into master due to the falsegreen CI results.Supplants  How I did it
Set GB default sandbox size for WCOW and ensure storageopts is honoured on all paths under WCOW and LCOW;What I didApplied the GB WCOW default sandbox size for RUN introduced in to all WCOW sandboxes.Also ensured this default applies whether WCOW was chosen by explicit platform windows or by imagebased or defaulted platform choice.En
. backport bump up rootlesskit to v..;Backport        The text was updated successfully but these errors were encountered
bump up rootlesskit to v..;Important fix Lock state dir for preventing automatic cleanup by systemdtmpfilesrootlesscontainersrootlesskitFull changesrootlesscontainersrootlesskitv.....v..       The text was updated successfully but these errors were encountered
vendor github.comcreackpty v.. includes fixes for go .;full diff creackptyv.....v..v.. Add arm support for OpenBSDv.. Fix CTTY to work with go.       The text was updated successfully but these errors were encountered
pkgdevicemapper fix invalid usage of reflect.SliceHeader;The current usage of reflect.SliceHeader violates rule th ofunsafe.Pointer conversion. In short reflect.SliceHeader could not beused as plain struct.See httpsgolang.orgpkgunsafePointer       The text was updated successfully but these errors were encountered
handleContainerExit timeout on containerd DeleteTask;Also move c.Lock below containerd delete task as it doesn't seem thatthere is any necessity to hold the container lock while containerd isdeleting the corresponding task.This fixes a potential edgecase where containerd delete task hangs andthereafter all operations on the container would hang forever as thisfunction is holding onto the container lock.Signedoffby Cam ghsparr.email What I didWe ecs are not sure how this situation arose but we have encountered an issue with a customer where the containerd DeleteTask operation was hanging. This led to the container lock being held forever and thereafter all calls to StopContainer or KillContainer would hang forever. Description for the changelogbug fix container deadlock if containerd.DeleteTask hangs A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
IPv iptables config option;Note This requires pull request to be merged first already merged What I didAdded an config option to enable the IPv iptables rule creation based on mobylibnetwork.This should close .fixes  How I did itAdd a config option iptables like iptables for IPv which can be used to enable the IPv iptables rule creation.By default this option is disabled too keep backward compatibility. How to verify itTo enable this functionality it is required to enable ipv set a fixed cidr and enable the ipitpables.This can be done for example via CLI parameters on the daemondockerd ipv fixedcidrv fddeadbeef iptablesor by setting the configurations inside the daemon.json.Now a container can be started and if a port is published the IPv NAT iptables rules are also created. Description for the changelogiptables enables IPv iptables rules only if experimental       The text was updated successfully but these errors were encountered
container make hostconfig.json nonworldreadable;fixes permissions for config.json and the like security issue together with which updated permissions for config.v.jsonWhen writing container's hostconfig.json permissions were set to worldreadable. While this is not a security concern as the varlibdockercontainers directory has or permissions there is no need to have these permissions as this file is only accessed by the daemon.Looking at history for file permissionsbe first implementation used worldwritablecfac refactored the code and removed explicit permissionseacbd introduced atomic writes and brought back the explicit permissionsecfed removed worldwritable bits but kept worldreadableThis patch updates the permissions to matching what's used for config.v.json which was updated in aecea but forgot to update hostconfig.json.The second commit is some small cleanuprefactoring Description for the changelog change permissions on container hostconfig.json files to was  A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
opts unify hostoptions and use consts;I should've seen this when working on but I didn't so opening as a followup PR ?ÿà       The text was updated successfully but these errors were encountered
Added container ID to containerd task delete event messages;Signedoffby Cam ghsparr.email What I didcapture TaskDelete messages in the switch statement so we can add the container ID context to them as this can help users see at what time exactly containerd deleted the container.logs look like this before changetimeT.Z levelinfo msgignoring event modulelibcontainerd namespacemoby topictasksdelete typeevents.TaskDeleteto this after changetimeT.Z levelinfo msgignoring event containercdfbccbffabafdbccdaaecbdeafb modulelibcontainerd namespacemoby topictasksdelete typeevents.TaskDelete Description for the changelogAdded container ID to containerd task delete event messages       The text was updated successfully but these errors were encountered
Move HostGatewayName const to opts and change vars to consts;This prevents consumers of the opts package to also having todepend on daemonnetwork and everything related.We can probably change some of the other constants to stringsfor easier concatenating and need to review the windowsspecific... instead of localhost which may no longer beneeded.       The text was updated successfully but these errors were encountered
cache manifests on pull;The tag service does a HEAD request to get the manifest digest wherewe can then do a GET against the digest.The GET by tag is not cacheable but the GET against the digest is.This allows proxies to work way better.This is also how containerd works.It also caches the manifest in containerd's content store so if HEAD returns a manifest we already have we don't need to hit the registry again.Caches are cleaned up when all images using that manifest are removed.It also saves a round trip on pull by digest when the manifest is already cached.Before this change mitmdump... clientconnect... GET httpsregistry.docker.iov Unauthorized b... clientdisconnect... clientconnect... GET httpsauth.docker.iotokenscoperepositoryAlibraryFbusyboxApullserviceregistry.docker.io OK .k... clientconnect... clientdisconnect... GET httpsregistry.docker.iovlibrarybusyboxmanifestslatest OK .k... clientdisconnect... clientconnect... GET httpsregistry.docker.iovlibrarybusyboxmanifestsshacfdffdeaeeecbffceabebc OK b... clientdisconnectWith this change mitmdump... clientconnect... GET httpsregistry.docker.iov Unauthorized b... clientdisconnect... clientconnect... GET httpsauth.docker.iotokenscoperepositoryAlibraryFbusyboxApullserviceregistry.docker.io OK .k... clientconnect... clientdisconnect... HEAD httpsregistry.docker.iovlibrarybusyboxmanifestslatest OK b... clientdisconnect... clientconnect... GET httpsregistry.docker.iovlibrarybusyboxmanifestsshaadefababadbaedbcbeeebfebbdaeded OK .k... clientdisconnect... clientconnect... GET httpsregistry.docker.iovlibrarybusyboxmanifestsshacfdffdeaeeecbffceabebc OK b... clientdisconnect       The text was updated successfully but these errors were encountered
replace pkgsymlink with github.commobysyssymlink;followup to        The text was updated successfully but these errors were encountered
registry.loginV minor cleanup;just some minor cleaning up construct the endpointpath once instead of twice and grouping all variable declarations at the start.       The text was updated successfully but these errors were encountered
Vendor in Libnetwork changes;Bring in changes from mobylibnetwork to mobySignedoffby Arko Dasgupta arko.dasguptadocker.com       The text was updated successfully but these errors were encountered
vendor buildkit ffdefefdeedaa;Signedoffby Tibor Vass tibordocker.com       The text was updated successfully but these errors were encountered
contrib remove downloadfrozenimagev script;I don't think we still had a use for this script and if someone needs this it'll still be accessible in older tagsreleases. Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Cleanup v registry code that is not used for searching;See individual commits for details. This will likely conflict with which also removes the fallback errors but I think that's causing that PR to fail i.e. when using insecure registries and connecting to https fails it should continue with the next endpoint.       The text was updated successfully but these errors were encountered
Pass through GOCACHE to testenv;Otherwise the cache gets written to bundles instead of to the volumethat we setup in the Makefile as expected.Found this because vscode did not like having these huge objects inbundlesfakeHOME... it didn't harm anything just that it noticed and said hey I don'tlike that.This enables cachereuse when building the test binaries.       The text was updated successfully but these errors were encountered
. backport docs fix builderversion swagger;backport of        The text was updated successfully but these errors were encountered
docs fix builderversion swagger;The field is called BuilderVersion    mobyapiserverroutersystemsystemroutes.go   Line  in ee       w.Header.SetBuilderVersion stringbv    Signedoffby Tonis Tiigi tonistiigigmail.com       The text was updated successfully but these errors were encountered
docker kill fix bug where failed kills didnt fallback to unix kill;fixes removes potential infinite Wait and goroutine leak at end of killfunctionrefactored container state waiting out of containeroperationsunix.goand into kill.go for consistencyfixes Signedoffby Cam ghsparr.emailbefore changedocker kill would just return error if the first sigkill function failed docker kill ktError response from daemon Cannot kill container kt foo errorafter changedocker falls back to unix kill and container exits docker kill ktktdocker logsOct ip.uswest.compute.internal dockerd timeT.Z levelerror msgContainer failed to exit within seconds of kill trying direct SIGKILL containerfdfdbafbadffcedfceefdfffbcbacfc errorcontext deadline exceededOct ip.uswest.compute.internal dockerd timeT.Z levelinfo msgignoring event modulelibcontainerd namespacemoby topictasksdelete typeevents.TaskDelete Description for the changelogfix bug where docker kill would not properly fallback to unix sigkill A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Fix hung docker stop if stop signal and daemon.Kill both fail;replaces this refactors the Stop command to fix a few issues and behaviors thatdont seem completely correctfirst it fixes a situation where stop could hang forever fixes a behavior where if sending thestop signal failed then the code directly sends a signal. If thatfails it returns without waiting for the process to exit or goingthrough the full docker kill codepath.fixes a behavior where if sending the stop signal failed then thecode sends a signal. If that succeeds then we still go through thesame stop waiting process and may even go through the docker kill pathagain even though we've already sent a .fixes a behavior where the code would wait the full seconds aftersending a stop signal even if we already know the stop signal failed. and were both fixed to not send a directly and instead rely on the docker kill codepathfixes  What I didremove waiting without a timeout when docker kill fails within docker stopbefore changecli docker stop hangs foreverOct ip.uswest.compute.internal dockerd timeT.Z levelinfo msgContainer edecadadebabcbbdfafcbbeefc failed to exit within seconds of signal using the forceafter changecli docker stop ktError response from daemon cannot stop container kt foo errordocker logsOct ip.uswest.compute.internal dockerd timeT.Z levelinfo msgContainer failed to exit within seconds of signal using the force containeraeefcdebebabcfbdbdcfdfefcOct ip.uswest.compute.internal dockerd timeT.Z levelerror msgError killing the container containeraeefcdebebabcfbdbdcfdfefc errorfoo errorOct ip.uswest.compute.internal dockerd timeT.Z levelerror msgHandler for POST v.containersktstop returned error cannot stop container kt foo error Description for the changelogFix hung docker stop if SIGTERM and SIGKILL both fail A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
docker stats fix 'panic close of closed channel';Signedoffby fanjiyun fan.jiyunzte.com.cn What I didWhen executing ?Ç£docker stats?Ç¥ and ?Ç£docker rm?Ç¥ in parallel there is a certain probability that problems panic close of closed channelwill occur.docker rm f call this func   mobypkgpubsubpublisher.go   Lines to  in cfdfc       func p Publisher Close     p.m.Lock     for sub range p.subscribers     deletep.subscribers sub     closesub          p.m.Unlock        docker stats call this func   mobypkgpubsubpublisher.go   Lines to  in cfdfc       func p Publisher Evictsub chan interface     p.m.Lock     deletep.subscribers sub     closesub     p.m.Unlock        Once this panic occurs the lock of Collector will not be released and all docker stats and docker rm will be blocked.So I added a step to check the channel before closing it. How I did itIn the func Evict??î check whether the channel exists in the map p.subscribers. How to verify itRepeated execution ?Ç£docker stats cid?Ç¥.At the same time execution docker rm f cid to delete container.However the probability of problems is very small.Adding time.sleep in the code can increase the recurrence probability. after this line add time.sleep   mobydaemondelete.go   Line  in cfdfc       daemon.statsCollector.StopCollectioncontainer     before this line add time.sleep   mobydaemonstats.go   Line  in cfdfc       daemon.statsCollector.Unsubscribec ch     Description for the changelogIn the func Evict check the channel before closing it. A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
vendor golang.orgxsys eeedfffdeebaffa;golangsysaeed...eeedfall add GOOSiosunix add back IoctlCtlInfo on darwinwindows add SetConsoleCursorPositionunix update Dockerfile to Linux . and Go .. adds CAPCHECKPOINTRESTORE       The text was updated successfully but these errors were encountered
vendor github.comcontainerdconsole v..;full diff containerdconsolev.....v..Fixes compatibility with current versions of golang.orgxsys       The text was updated successfully but these errors were encountered
Update array length check logic for preventing offbyone error;Array length should be greater than or equal to when accessing index  What I didPrevent offbyone error.Though procpidmountinfo has somewhat fixed format this change will decrease possibility of runtime panic. How I did itUpdate array length verification logic. How to verify itpackage mainimport fmtstringsfunc main mountinfo if fields strings.Fieldsmountinfo lenfields mnt fieldsfmt.PrintlnmntCode above will make a runtime panic. Description for the changelogUpdate array length check logic for preventing offbyone error A picture of a cute animal not mandatory but encouraged?Éê       The text was updated successfully but these errors were encountered
Temporarily disable CAPPERFMON CAPBPF and CAPCHECKPOINTRESTORE;fixes This prevents docker from setting CAPPERFMON CAPBPF and CAPCHECKPOINTRESTOREcapabilities on privileged or CAPALL containers on Kernel . and up.While these kernels support these capabilities the current release of runc ships with an older version of gocapabilitycapability and does not know about them causing an error to be produced.We can remove this restriction once opencontainersruncdfbeb is included in a runc release and once we stop supporting containerd ..x which ships with runc v..rc.Thanks to aiordache for reporting. Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Dockerfile fix golangcilint installer;Similar fix as We were using go get whith would try to fetch some dependencies that are not in the version we're installinggo get d github.comgolangcigolangcilintcmdgolangcilintCausing the build to failpackage d.comgochecknoglobalschecknoglobals unrecognized import path d.comgochecknoglobalschecknoglobals parse httpsd.comgochecknoglobalschecknoglobalsgoget no goimport meta tags        The text was updated successfully but these errors were encountered
. backport dockerdrootless.sh support new containerd shim socket path convention;The new shim socket path convention hardcodes runcontainerd containerdcontainerddockerdrootless.sh is updated to hide the rootful runcontainerd from the mount namespace of the rootless dockerd.Cherrypick        The text was updated successfully but these errors were encountered
Don't set default platform on container create;fixes This fixes a regression based on expectations of the runtimedocker pull armvalpinedocker run armvalpineWithout this change the docker run will fail due to platformmatching on nonarmv systems even though the image could runassuming the system is setup correctly.This also emits a warning to make sure that the user is aware that aplatform that does not match the default platform of the system is beingrun for the cases likedocker pull platform armhf busyboxdocker run busyboxNot typically an issue if the requests are done together like that butif the image was already there and someone did docker run without anexplicit platform they may very well be expecting to run a nativeversion of the image instead of the armhf one.This warning does add some extra noise in the case of platform specificimages being run such as armvalpine but this can be supressed byexplicitly setting the platform.       The text was updated successfully but these errors were encountered
Bump vndr v..;full diff LKDvndrv.....v..cleanVCS prevent panicConsider '.syso' as a Go file for vendoring       The text was updated successfully but these errors were encountered
vendor github.comspfcobra v..;full diff spfcobrav.....v..Notable changesExtend Go completions and revamp zsh compAdd completion for help commandComplete subcommands when TraverseChildren is setFix stderr printing functionsfix fish output redirectionfix manpage building with new gomdman Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Fix checkpoint on v runtime;CheckpointRestore is horribly broken all around.But on the now default v runtime it's even more broken.This at least makes checkpoint equally broken on both runtimes.Closes        The text was updated successfully but these errors were encountered
. backport pkgaaparser support parsing version like ..beta;backport of and fixes        The text was updated successfully but these errors were encountered
Also trim ... from AppArmor versions;What I didAsked Canonical who in turn had spoken to AppArmor upstream maintainers whether we needed to trim ... from AppArmor versions too comment. ?ÿä How I did itI found httpsgitlab.comapparmorapparmorcommitbcadddd
testing Init plugin config when for tests;fixes This fixes a panic when running this test for me locally.This is not panicing on CI because CI has TESTSKIPINTEGRATIONCLI ?æÄ       The text was updated successfully but these errors were encountered
vendor github.comgofrsflock v..;full diff gofrsflockv.....v..Relevant changesfix closeUnlock won't close the file descriptor if not lockedfix license text update yearNote that there's also a v.. release that release only adds aix supportwhich is currently of no interest to us so skipping that version for now. Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Remove default oom score adj;Related dockerdockercepackaging systemd set OOMScoreAdjust for dockerd dockerlibrarydocker Explicitly set oomscoreadjust to  What I didThis removes the default oomscoreadjust from the daemon. The test utilities are updated to keep the old default as our tests start the daemon manually not through systemd How I did it How to verify it Description for the changelogRemove default oom score for dockerd. When starting the daemon manually not through systemd users should set the oomscoreadjust daemon option to preserve the old behavior. A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
daemon don't adjust oomscore if score is;relates to addresses dockerforlinuxThis patch makes two changes if oomscoreadj is set to do not adjust the oomscoreadjust cgroup for dockerddo not set the hardcoded score for containerd ifcontainerd is running as child processBefore this changeoomscoreadjdockerdcontainerd as childprocess same as dockerd same as dockerd hardcoded defaultWith this changeoomscoreadjdockerdcontainerd as childprocess same as dockerd same as dockerdnot adjustednot adjusted Description for the changelogDo not adjust the OOMscore for the daemon and containerd if oomscoreadj is  A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Update documentation to reflect deprecation of NewEnvClient;What I didAs NewEnvClient is deprecated in favor of NewClientWithOpts the client package documentation should reflect this. This is also the text that appears on godoc.org so it's quite important that it is correct for newbies like me How I did it
. backport Fix gcplogs memoryconnection leak;backport of fixes The cloud logging client should be closed when the log driver is closed. Otherwise dockerd will keep a gRPC connection to the logging endpoint open indefinitely.This results in a slow leak of tcp sockets and memory Kb any time that a container using logdrivergcplogs is terminates. Description for the changelog Fix gcplogs memoryconnection leak A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
pkgaaparser support parsing version like ..beta;Fix        The text was updated successfully but these errors were encountered
seccomp implement marshalunmarshall for MinVersion;A little lunchtime experiment as alternative approach to        The text was updated successfully but these errors were encountered
Fix gcplogs memoryconnection leak;The cloud logging client should be closed when the log driver is closed. Otherwise dockerd will keep a gRPC connection to the logging endpoint open indefinitely.This results in a slow leak of tcp sockets and memory Kb any time that a container using logdrivergcplogs is terminates.fixes TestingTested locally in docker dev environment docker run rm logdrivergcplogs helloworld no longer grows the connection count of dockerd. Description for the changelogFix gcplogs memoryconnection leak       The text was updated successfully but these errors were encountered
vendor sirupsenlogrus v..;full diff sirupsenlogrusv.....v..removes dependency on github.comkonsortengowindowsterminalsequencesFeaturesa new buffer pool management API has been addeda set of LogLevelFn functions have been added       The text was updated successfully but these errors were encountered
vendor github.comcoreospkg v;full diff coreospkgv...vcapnslog fix compatibility with pflag A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Add TARGETARCH var to frozen images stage;This allows the arch that buildkit passes through to be used for thefrozen image downloader.Don't know why I didn't think about this on the last PR ?ÿä       The text was updated successfully but these errors were encountered
seccomp remove dependency on oci package;followup to and        The text was updated successfully but these errors were encountered
seccomp add test for loading old JSON format;Commit ffad changed the JSON format that's used for seccomp profiles but keeping the code backward compatible to allow both the old or new format.This patch adds a new test which loads the old format. It takes the default seccomp profile before the format was changed. A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
. backport awslogs Update awssdkgo to support IMDSv;backport of AWS recently launched a new version of the EC Instance MetadataService which is used to provide credentials to the awslogs driver whenrunning on Amazon EC. This new version of the IMDS addsdefenseindepth mechanisms against open firewalls reverse proxies andSSRF vulnerabilities and is generally an improvement over the previousversion. An updated version of the AWS SDK is able to handle the boththe previous version and the new version of the IMDS and functions wheneither is enabled.More information about IMDSv is available at the following linkshttpsaws.amazon.comblogssecuritydefenseindepthopenfirewallsreverseproxiesssrfvulnerabilitiesecinstancemetadataservicehttpsdocs.aws.amazon.comAWSEClatestUserGuideconfiguringinstancemetadataservice.htmlCloses Signedoffby Samuel Karp skarpamazon.comcherry picked from commit aeSignedoffby Sebastiaan van Stijn githubgone.nl What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
seccomp remove dependency on pkgparserskernel;Followup to This removes the dependency on the pkgparserskernel package because secomponly needs to consider Linux and no parsing is needed for Windows or Darwin kernelversions.This patch implements the minimum requirements for this implementationonly kernel and major versions are consideredminor version flavor and rcXX suffixes are ignoredSo for example...longterm kernel major ..generic kernel major .....el.x kernel major Some systems also omit the minor andor have oddformatted versions. In contextof generating seccomp profiles both versions below are considered equal..gentoo kernel major .amd kernel major Note that rcX suffixes are also not considered and thus e.g. kernel .rc.rc and . are all considered equal.The motivation for ignoring minor versions and flavors is thatThe upstream kernel only does kernel.major releasesWhile releasecandidates exists for kernel e.g. .rc we don't expect usersto write profiles that target a specific releasecandidate and therefore considere.g. kernel .rc .rc and . to be equal.Generally a seccompprofile should either be portable or written for a specificinfrastructure in which case the writer of the profile would know if the kernelflavorsused doesdoes not support certain things. Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
api clarify v option behavior in the container remove endpoint;Current description of the v option doesn't explain what happens to the volumes that are still in use by other containers. Turns out that the only volumes that are removed are unnamed ones    mobydaemonmounts.go   Lines to  in aac       Do not remove named mountpoints     these are mountpoints specified like docker run v namefoo     if m.Spec.Source     continue        Perhaps a good way of clarifying this behavior would be adapting the description from docker rm help.As for the docsapiv..yaml changes ?Çö they seem to be applicable since the origin of this behavior dates way back to the or v..       The text was updated successfully but these errors were encountered
plugin.Manager.setupNewPlugin remove unused blobsums argument;What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but t
Remove redundant os.IsNotExist checks on os.RemoveAll;os.RemoveAll should never return this error. From the docsIf the path does not exist RemoveAll returns nil no error. A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
daemongraphdrivercopy use IoctlFileClone from golang.orgxsysunix;Vendor the latest version of golang.orgxsysunix full diff golangsysbba...aeed to get unix.IoctlClone and use it in copyRegular. This allows to drop the cgobased implementation.       The text was updated successfully but these errors were encountered
Windows CI Add support for testing with containerd;What I didSet Windows Server Preview Build and later to use ContainerD as default runtime like agreed on comment and provided CI for it by modifying Win CI added by .Updated to working with  How I did itSome pre
pkgsystem make EnsureRemoveAll unixspecific;The tricks performed by EnsureRemoveAll only make sense for Linux andother Unices so separate it out and make EnsureRemoveAll for Windowsjust an alias of os.RemoveAll.This makes sure RecursiveUnmount is not called on Windows.Related to        The text was updated successfully but these errors were encountered
Windows CI Force DownloadFile function to use TLS . fix to RS CI;What I didI noticed that RS CI from master have been broken for a while that is because .NET version which RS uses does not have TLS . enabled by default and nuget.org does not have TLS . enabled anymore.This PR will set both RS and RS to use
Allow downloadfrozenimages to work without go;Currently we use the go command to read GOARCH and use the value formatching manifests.This change allowsSpecifying the arch through TARGETARCHFalling back to dpkg if go is not availableFalling back to uname m if dpkg is not availableA default value amd if none of these commands is available.Some of these fallbacks could definitely be better.       The text was updated successfully but these errors were encountered
seccomp refactor to use runtimespec types where possible;What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but t
vendor opencontainersgodigest v..;to match the version used in containerdfull diff opencontainersgodigestv..rc...v..       The text was updated successfully but these errors were encountered
vendor dockerlibnetwork dbfafcfbfbeebab;full diff mobylibnetworkeaf...dmobylibnetwork types remove some dead codemobylibnetwork clientmflag remove use of dockerdockerpkghomedirmobylibnetwork Skip redundant kernel version checksmobylibnetwork vendor update docker to ca and reduce dependency graph       The text was updated successfully but these errors were encountered
Windows CI Fix collecting the logs of the daemon under test;What I didThis PR fixes an issue we discussed in . Sometimes the logs of the daemon under test couldn't be found. How I did itI first ran a test to show me the current dir in the script and indeed in some cases the script was a sub folder an
vendor github.comsyndtrgocapability cbfdefcadebfeaffb;full diff syndtrgocapabilityd...cbUpdate CapabilitiesAdd CAPPERFMONAdd CAPBPFAdd CAPCHECKPOINTRESTORE Description for the changelogAdd support for CAPPERFMON CAPBPF and CAPCHECKPOINTRESTORE on supported kernels A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
ocicaps refactor remove unused code and improved error messages;ocicaps rename some vars that conflicted with imports builtinsocicaps minor optimization in initocicaps generate list of all capabilities on initocicaps use map for capabilities to simplify lookupocicaps improve error message for unsupported capabilitiesA capability can either be invalid or not supported by the kernel on which we're running. This patch changes the error message produced to reflect if the capability is invalidunknown or a known capability but not supported by the kernel version.ocicaps remove unused GetCapability and ValidateCapabilitiesocicaps simplify and remove types that were not neededThe CapabilityMapping and Capabilities types appeared to be only used locally and added unneeded complexity. This patch removes those types and simplifies the logic to use a map that maps names to capability.Capsocicaps remove hack for RHEL kernelsWe no longer support these kernels so we can remove the workaround       The text was updated successfully but these errors were encountered
vendor mobysys mountinfov..;full diff mobysysmountinfov.....mountinfov..Note that this dependency uses submodules providing github.commobysysmountand github.commobysysmountinfo. Our vendoring tool vndr currently doesn'tsupport submodules so we vendor the toplevel mobysys repository which containsboth and pick the most recent tag which could be either mountinfovXXX ormountvXXX.github.commobysysmountinfo v..Breaking changesPidMountInfo is now deprecated and will be removed before v. users should switch to GetMountsFromReaderFixes and improvementsrun filter after all fields are parsedcorrect handling errors from bufio.Scandocumentation formatting fixesgithub.commobysysmountinfo v..mount use MNT flags from golang.orgxsysunix on freebsdvarious godoc and CI fixesmountinfo make GetMountinfoFromReader LinuxspecificAdd support for OpenBSD in addition to FreeBSDmountinfo use idiomatic naming for fieldsgithub.commobysysmountinfo v..Bug fixesFix path unescaping for paths with double quotesImprovementsMounted speed up by adding fast paths using openat Linuxonly and statMounted relax path requirements allow relative noncleaned paths symlinksUnescape fstype and source fieldsDocumentation improvementsTestingCIUnit tests exclude darwinCI run tests under Fedora to test openatTestGetMounts fix for Ubuntu build systemMakefile fix ignoring test failuresCI add cross buildgithub.commobysysmount v..httpsgithub.commobysysreleasestagmountFv..ImprovementsRecursiveUnmount add a fast path Unmount improve docfix CI linter warning on WindowsTestingCIUnit tests exclude darwinMakefile fix ignoring test failuresCI add cross build       The text was updated successfully but these errors were encountered
vendor github.commobyterm fafefecefddfaacde;full diff mobytermfe...fafupdate gotest.tools to vUse unix.IoctlGetSetTermios on all unix platformsMake Termios type alias remove castsvendor golang.orgxsys bbaacbfedabfull diff golangsysedf...bba       The text was updated successfully but these errors were encountered
. vendor buildkit v..gdfddc;full diff mobybuildkitv..gdafbf...v..gdfddcno local changes in the daemon code actual fix is for the CLI dockercli       The text was updated successfully but these errors were encountered
update containerd vendor and binary to v..;relates to containerdcontainerdfull diff httpsgithub.comcontainerdcomparev.....v..Welcome to the v.. release of containerdThe first patch release for containerd . includes a fix for v shims hangingon exit and exec when the log pipe fills up along with other minor changes.Notable UpdatesAlways consume shim logs to prevent logs in the shim from blockingFix error deleting v bundle directory when removing rootfs returns ErrNotExistFix metrics monitoring of v runtime tasksFix incorrect stat for Windows containersFix devmapper device deletion on rollbackUpdate seccomp default profile       The text was updated successfully but these errors were encountered
Unify same fromStatT implementation for FreeBSD and NetBSD;Suggested by Sebastiaan van Stijn thaJeztah thanksPossible bugs are mine though What I didI shared a PR to add NetBSD implementation for fromStatTand in the review Sebastiaan van Stijn thaJeztah kindly pointed outthat the implementation is the same and we can share both in a singleone. How I did itSee above. How to verify itSee above. Description for the changelogUnify same fromStatT implementation for FreeBSD and NetBSD A picture of a cute animal not mandatory but encouragedNo cute animal this time too sorry but here a nice cat emoji?É?       The text was updated successfully but these errors were encountered
daemonlisteners use pkgerrors;taking the second commit from        The text was updated successfully but these errors were encountered
. backport swagger fix MemTotal units in SystemInfo endpoint;backport of MemTotal represents bytes not kilobytes. See Linux and Windowsimplementations.Signedoffby Nikolay Edigaryev edigaryevgmail.comcherry picked from commit ebaSignedoffby Sebastiaan van Stijn githubgone.nl What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
fix integration test case TestExternalGraphDriver failed in mips arch;Signedoffby limeidan limeidanloongson.cn What I didmake the integration test case TestExternalGraphDriver pass in mips arch. How I did itreplace the specified image with one support mips arch's version How to verify itrun integration test case in mips arch Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Add fromStatT implementation for NetBSD;What I didWhen packaging amazonecscli in pkgsrcwip I have noticed build failure due nonexistent statnetbsd.go. How I did itOn a NetBSD machine that supports Go assuming pkgsrc tree andpkgsrcwip tree are checked out try cd pkgsrcwipamaz
Remove mkimage.sh and associated scripts;I looked at fixing httpsbugs.debian.org but these scripts haven't been materially changed in years and better alternatives exist elsewhere so we should probably just remove them instead.Consider this a request for comment from Moby maintainers andor community members who might be using them ?ÿàIMO it would also make sense to remove the other mkimage.sh scripts alpine x arch ?¥ù crux pld yum but I've been less directly involved in those so I'm not positive how much use they've seen happy to throw them in here too if maintainers agree.       The text was updated successfully but these errors were encountered
replace pkglocker with github.commobylocker;closes        The text was updated successfully but these errors were encountered
swagger fix MemTotal units in SystemInfo endpoint;MemTotal represents bytes not kilobytes.Linux implementation   mobypkgsystemmeminfolinux.go   Line  in fae       meminfo.MemTotal bytes    Windows implementation   mobypkgsystemmeminfowindows.go   Line  in fae       MemTotal intmsi.ullTotalPhys           The text was updated successfully but these errors were encountered
vendor containerd v..;followup to This is just to align to a tagged version but given that the containerdgoapi is not considered stable we may switch back to a commit frommaster at some point if needed.No local changes.       The text was updated successfully but these errors were encountered
Revendor Microsoftgowinio for gB file fix when importing or committing image layers;What I didRevendored httpsgithub.commicrosoftgowinio to pull microsoftgowinio which replaces a bundled fork of archivetar for Go . with use of vanilla archivetar.There's more context on this issue on microsoftWindowsContainers.F
Simplify seccomp logic;Simplifies the existent seccomp code without impacting behaviour.This is a followup PR from which adds test coverage.img source httpswww.dogbreedinfo.comaussiedoodle.htmSignedoffby Paulo Gomes pjbgflinux.com       The text was updated successfully but these errors were encountered
add partial metadata to journald logs;add all partial metadata available to journald logs to allow easier reassembly of partial messages in downstream logging systemsfixes Signedoffby Christian Becker christian.beckersixt.com What I didprovide all details about partial messages to downstream services How I did itforward all information from the relevant struct How to verify itcheck that the fields are present in journaldimport jsonprintjson.dumpsmessage a tag foobarResults in the following logTue . UTC sbedfbfebfaabfaibbaecbcdecaamataeeccdxfdfdc PRIORITY TRANSPORTjournal COMMdockerd IMAGENAMEpython CONTAINERPARTIALMESSAGEtrue CONTAINERPARTIALORDINAL CONTAINERPARTIALLASTfalse MESSAGEmessage aaaaaasnipaaa CONTAINERIDcbb CONTAINERNAMEheuristicfermi CONTAINERIDFULLcbbcbcaefecfeeaccfafdaebde CONTAINERTAGcbb CONTAINERPARTIALIDabcbebcfdfdefeecabddbfTue . UTC sbedfbfebfaabfaibbaecbcdecaamftaeecfxcebbabbe PRIORITY TRANSPORTjournal COMMdockerd IMAGENAMEpython CONTAINERPARTIALORDINAL CONTAINERPARTIALLASTtrue MESSAGEaaasnipaaaa tag foobar CONTAINERIDcbb CONTAINERNAMEheuristicfermi CONTAINERIDFULLcbbcbcaefecfeeaccfafdaebde CONTAINERTAGcbb CONTAINERPARTIALIDabcbebcfdfdefeecabddbf Description for the changelogimprove partial log message support for journald       The text was updated successfully but these errors were encountered
vendor github.comopencontainersselinux v..;full diff opencontainersselinuxv.....v..this also adds github.comwillfbitset as a dependency What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
vendor github.comgorillamux v..;full diff gorillamuxv.....v.. What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Remove dependency in dockerd on libseccomp;This was just using libseccomp to get the right arch but we can useGOARCH to get this.The nativeToSeccomp map needed to be adjusted a bit for mipsle vs mipselsince that's go how refers to it. Also added some other arches to it.Closes        The text was updated successfully but these errors were encountered
pkgidtools refactor to avoid stringsplitting;fixes The package used a lot of stringformatting followed by stringsplitting.This looked to originate from attempts to use templating to allow futureextensibility aab .Looking at the history of the package only a single update was made tothese templates years go which makes it unlikely that more templatingwill be needed.This patch simplifies the handling of arguments to use string insteadof a single string and splitting to a string. This both simplifiesthe code somewhat and prevents usergroupnames containing spaces to besplitted causing e.g. getent to fail.Note that usergroupnames containing spaces are invalid or at leastdiscouraged there are situations where such names may be used so weshould avoid breaking on such names.Before this change a usergroup name with a space in its name would faildockerd usernsremapuserdomain usersINFOT. Starting upError during groupname lookup for domain users getent unable to find entry domain in group databaseWith this change Add some possibly problematic usernames for testing need to do this manually as adduser useradd won't accept these namesecho 'user namexhomeonebinfalse' etcpasswd \echo 'user namex' etcgroup \echo 'user name' etcsubuid \echo 'user name' etcsubgid \echo 'userHOMExhomeonebinfalse' etcpasswd \echo 'userHOMEx' etcgroup \echo 'userHOME' etcsubuid \echo 'userHOME' etcsubgid \echo 'user'''namexhomeonebinfalse' etcpasswd \echo 'user'''namex' etcgroup \echo 'user'''name' etcsubuid \echo 'user'''name' etcsubgid \echo 'usernamexhomeonebinfalse' etcpasswd \echo 'usernamex' etcgroup \echo 'username' etcsubuid \echo 'username' etcsubgid Start the daemon using those usersdockerd usernsremapuser nameuser namedockerd usernsremap'userHOMEuserHOME'dockerd usernsremapuser'nameuser'namedockerd usernsremap'username''username' What I did How I did it How to verify it Description for the changelogFix handling of looking up user and groupnames with spaces A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Builder Add buffer to two channels to avoid blocking goroutine;What I didAvoid two potential goroutine leaks by adding buffer to the channels.In the code below if the function returns at line then the child goroutine created at Line will be leaked.   mobybuilderdockerfilecontainerbackend
opts simplify ValidateEnv to use os.LookupEnv;os.LookupEnv was not available yet at the time that this was implemented ab but now provides the functionality we need so replacing our custom handling. A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Add openat and faccessat to default seccomp profile.;follow up to commentNote openat first appeared in Linux .. And Glibc does not provide a wrapper for this system call call it usingsyscall.ref httpsman.orglinuxmanpagesmanopenat..html       The text was updated successfully but these errors were encountered
Add solaris support to lstat;Signedoffby Till Wegm??ller toastersongmail.com What I didAdd missing function to convert syscall.Statt to system.Stat for Solaris based systems How to verify itOn my illumosSolaris machine the test related to the functionality passesgo test v . run TestLstattesting warning no tests to runPASSok github.comdockerdockerpkgsystem .s no tests to run       The text was updated successfully but these errors were encountered
vendor runc rc;vendor containerd to v..rc.full diff containerdcontainerdef...v..rc.vendor runc to v..rcfull diff opencontainersrunca...ffcgolangcryptoaac...bgolangnetdecce...abgolangsysdaef...edf       The text was updated successfully but these errors were encountered
Wait for container exit before forcing handler;This code assumes that we missed an exit event since the container isstill marked as running in Docker but attempts to signal the process incontainerd returns a process not found error.There is a case where the event wasn't missed just that it hasn't beenprocessed yet.This change tries to work around that possibility by waiting to see ifthe container is eventually marked as stopped. It uses the container'sconfigured stop timeout for this.Fixes        The text was updated successfully but these errors were encountered
Update dockerpy to ..;full diff dockerdockerpy....... Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Update tini v..;full diff krallintiniv.....v..Release notesmipsel buildinclude checksums in releasesppcle alias for the ppcel build Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
apparmor permit signals from unconfined programs;Otherwise if you try to kill a container process from the host directlyyou get EACCES. Also add a comment to make sure that the profile codewhich has been replicated by several projects doesn't get out of sync.Signedoffby Aleksa Sarai asaraisuse.de       The text was updated successfully but these errors were encountered
daemon.setupPathsAndSandboxOptions skip resolving symlinks;This came up in a review of ad but for some reason that comment didn't find its way to GitHub andor I forgot to push the change.These files are copied by reading their content with ioutil.Readfile resolving the symlinks should therefore not be needed and paths can be passed asisfunc copyFilesrc dst string error sBytes err ioutil.ReadFilesrcif err nil return errreturn ioutil.WriteFiledst sBytes filePerm Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
. backport Bump Golang ..;backport of full diff golanggogo.....go..go.. released includes security fixes to the encodingbinarypackage. See the Go .. milestone on the issue tracker for details.httpsgithub.comgolanggoissuesqmilestoneAGo..labelACherryPickApproved       The text was updated successfully but these errors were encountered
Bump Golang ..;full diff golanggogo.....go..go.. released includes security fixes to the encodingbinarypackage. See the Go .. milestone on the issue tracker for details.httpsgithub.comgolanggoissuesqmilestoneAGo..labelACherryPickApproved       The text was updated successfully but these errors were encountered
Add size option to volumes on linuxunix via xfs pquota;NOM
Add more error message for ops when container limit use an device whi?Çª;This relates to Signedoffby Jeff Zvier zviergmail.com       The text was updated successfully but these errors were encountered
Builder print relative path if COPYADD source path was not found;relates to Before this change the error returned to the user would include the physicalpath inside the tmp dir on the daemon host. These paths should be consideredan implementation detail and provide no value to the user. Printing the tmppath can confuse users and will be even more confusing if the daemon is runningremotely or in a VM such as on Docker Desktop in which case the path in theerror message does not exist on the local machineecho e FROM busybox\nCOPY somenonexistingfile.txt . | DOCKERBUILDKIT docker build f .Sending build context to Docker daemon .kBStep FROM busybox ccStep COPY somenonexistingfile.txt .COPY failed stat varlibdockertmpdockerbuildersomenonexistingfile.txt no such file or directoryWhen copying files from an image or a build stage using from the erroris similarly confusingecho e FROM busybox\nCOPY frombusybox somenonexistingfile.txt . | DOCKERBUILDKIT docker build f .Sending build context to Docker daemon .kBStep FROM busybox cdbbStep COPY frombusybox somenonexistingfile.txt .COPY failed stat varlibdockeroverlayefccbafaeaedbfcbdfdcdaemergedsomenonexistingfile.txt no such file or directoryThis patch updates the error messages to be more userfriendly. Changes are slightlydifferent depending on if the source was a local path or an image or buildstageusing from.If from is used only the path is updated and we print the relative pathinstead of the full pathecho e FROM busybox\nCOPY frombusybox somenonexistingfile.txt . | DOCKERBUILDKIT docker build f .Sending build context to Docker daemon .kBStep FROM busybox cdbbStep COPY frombusybox somenonexistingfile.txt .COPY failed stat somenonexistingfile.txt file does not existIn other cases additional information is added to mention build context and.dockerignore which could provide the user some hints to find the problemecho e FROM busybox\nCOPY somenonexistingfile.txt . | DOCKERBUILDKIT docker build f .Sending build context to Docker daemon .kBStep FROM busybox cdbbStep COPY somenonexistingfile.txt .COPY failed file not found in build context or excluded by .dockerignore stat somenonexistingfile.txt file does not existecho e FROM busybox\nADD somenonexistingfile.txt . | DOCKERBUILDKIT docker build f .Sending build context to Docker daemon .kBStep FROM busybox cdbbStep ADD somenonexistingfile.txt .ADD failed file not found in build context or excluded by .dockerignore stat somenonexistingfile.txt file does not existThis patch only improves the error for the classic builder. Similar changes couldbe made for BuildKit which produces equally or even more confusing errorsecho e FROM busybox\nCOPY somenonexistingfile.txt . | DOCKERBUILDKIT docker build f . Building .s FINISHED internal load build definition from Dockerfile .s transferring dockerfile B .s internal load .dockerignore .s transferring context B .s internal load metadata for docker.iolibrarybusyboxlatest .s internal load build context .s transferring context B .s CACHED FROM docker.iolibrarybusyboxshafc... .s ERROR COPY somenonexistingfile.txt . .s COPY somenonexistingfile.txt .failed to compute cache key failed to walk varlibdockertmpbuildkitmountsomenonexistinglstat varlibdockertmpbuildkitmountsomenonexisting no such file or directoryecho e FROM busybox\nCOPY frombusybox somenonexistingfile.txt . | DOCKERBUILDKIT docker build f . Building .s FINISHED internal load build definition from Dockerfile .s transferring dockerfile B .s internal load .dockerignore .s transferring context B .s internal load metadata for docker.iolibrarybusyboxlatest .s FROM docker.iolibrarybusyboxlatest .s resolve docker.iolibrarybusyboxlatest .s CACHED stage FROM docker.iolibrarybusyboxshafc... .s ERROR stage COPY frombusybox somenonexistingfile.txt . .s stage COPY frombusybox somenonexistingfile.txt .failed to compute cache key failed to walk varlibdockeroverlayadefccfbdfdeebefebcefbadmergedsomenonexistinglstat varlibdockeroverlayadefccfbdfdeebefebcefbadmergedsomenonexisting no such file or directory Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
builderremotecontext use lowercase for error;Errors should not be capitalized. This error was marked as being compatible with the old error However looking at the original error that was in place before dfafd I noticed that the error was lowercase before so it should be ok to change it back to be lowercase.       The text was updated successfully but these errors were encountered
Add test coverage to seccomp.;Created tests to make seccomp behaviour explicit and increase our regression cover.This relates to Signedoffby Paulo Gomes pjbgflinux.com       The text was updated successfully but these errors were encountered
Update runc binary to v..rc;full diff opencontainersruncv..rc...v..rcThis release contains a hotfix to solve a regression in v..rc thatconcerns Docker this only affects Docker's vendoring of libcontainernot the usage of runc as the runtimeFix helpers used by Docker to correctly handle symlinks in dev when runningwith privileged containers.As well as some other improvementsUpdates to CRIU support.Improvements to cgroupfs performance and correctness.Static Linking NoticesThe runc binary distributed with this release are statically linked withthe following GNU LGPL. licensed libraries with runc actingas a work that uses the LibrarylibseccompThe versions of these libraries were not modified from their upstream versionsbut in order to comply with the LGPL. ?ºa we have attached thecomplete source code for those libraries which when combined with the attachedrunc source code may be used to exercise your rights under the LGPL..However we strongly suggest that you make use of your distribution's packagesor download them from the authoritative upstream sources especially sincethese libraries are related to the security of your containers.       The text was updated successfully but these errors were encountered
Update authors and mailmap;Updated and sorted .mailmap and regenerated authors       The text was updated successfully but these errors were encountered
. backport testfixes for flaky test TestCheckCapacityAndRotate;fixes flaky test TestCheckCapacityAndRotatebackports of Fix flakey test for log file rotate Fix log file rotation testMinor conflict in the imports because . is not yet on gotest.toolsv       The text was updated successfully but these errors were encountered
. backport Check for context error that is wrapped in url.Error;backport of        The text was updated successfully but these errors were encountered
fix TestDaemonNoSpaceLeftOnDeviceError for mipsle;Signedoffby wanghuaiqing wanghuaiqingloongson.cn What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
update containerd to v..;Release note httpsgithub.comcontainerdcontainerdreleasestagv..       The text was updated successfully but these errors were encountered
Supplement the omission of pr;Signedoffby wanghuaiqing wanghuaiqingloongson.cn What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
fix buildkit nil panic when frontend image exists;What I didFix the nil panic in buildernext How I did itI got a nil panic with these stepsDockerfile  cat Dockerfile syntax dockerdockerfile.experimentalFROM redisCOPY a The frontend image exists on the server docker images |g
docker.service Add multiuser.target to After in unit file;After installing docker on Arch and enabling the docker.service I noticed that the time to boot my computer increased substantially. I traced this down to a dependency chain involving docker and I believe that I have a solution that maintains the correct functionality of the docker.service unit file while also preventing the hang when booting. What I didI noticed on my Arch machine that the time to reach multiuser.target was delayed by several seconds because docker.service was waiting for a network connection. This was preventing the launch of the graphical environment until my WiFi was connected adding about six seconds to my boot.I added the multiuser.target to the After list on the docker.service unit file in hopes that it would allow multiuser.target to complete before docker.service. This seemed to work and I think that it would make a good contribution to the unit file. The docker.service still starts up at boot but it no longer stalls the graphical environment. How I did itI used systemdanalyse and systemctl to locate what was causing my slow boot problem. I found that because socker.service requires networkonline.target and is wanted by multiuser.target the critical chain of services for the graphical.target included waiting for NetworkManagerwaitonline.service. This meant that my computer was waiting until after my wifi connection was established to show me a login screen. By adding multiuser.target to the After list on my unit file this situation was avoided. How to verify itAdd multiuser.target to the After list in docker.service so that multiuser.target does not wait for docker.service and consequently wait for networkonline.target. Description for the changelog Afternetworkonline.target docker.socket firewalld.service Afternetworkonline.target docker.socket firewalld.service multiuser.target       The text was updated successfully but these errors were encountered
Disable manifest v schema push;temporary alternative for For CI a temporary DOCKERALLOWSCHEMAPUSHDONOTUSE environment variable was added while we work out a solution for testing schema pulls which currently require pushing them to a local registry first for testing. What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
. backport oci correctly use user.GetExecUser interface;backport of A nil interface in Go is not the same as a nil pointer that satisfiesthe interface. libcontaineruser has special handling for missingetcpasswdgroup files but this is all based on nil interface checkswhich were broken by Docker's usage of the API.When combined with some recent changes in runc that made read errorsactually be returned to the caller this results in spurrious EINVALerrors when we should detect the situation as there is no passwd file. Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Pass underlying network error in ErrorConnectionFailed;What I didI changed the check for context error returned by nethttp.Client.Do How I did itby using github.compkgerrors.Is that searches for desired error in err's chain How to verify itI've encountered shallow error message telling me to check
ocideviceCgroup remove redundant variable;noticed this when looking at another PRWas also wondering why Device is exported as it's only used within this package it was added in bb but didn't see a mention why it was exportedtiborvass       The text was updated successfully but these errors were encountered
Simplify getUser to use libcontainer builtin functionality;Followup to        The text was updated successfully but these errors were encountered
oci correctly use user.GetExecUser interface;extracting this from as it's an existing bug. This patch was provided by cyphar on opencontainersrunc commentA nil interface in Go is not the same as a nil pointer that satisfiesthe interface. libcontaineruser has special handling for missingetcpasswdgroup files but this is all based on nil interface checkswhich were broken by Docker's usage of the API.When combined with some recent changes in runc that made read errorsactually be returned to the caller this results in spurrious EINVALerrors when we should detect the situation as there is no passwd file. Description for the changelog       The text was updated successfully but these errors were encountered
. backport vendor vishvanandanetns dbceaaecccfacbdacd;backport of . Added one extra commit to account for the netns bump not in . from eecc full diff vishvanandanetnsabb...dbceUse golang.orgxsysunix instead of syscallSet OCLOEXEC when opening a network namespaceFixes the container?Çÿs netns fds leak causing the container netns to notclean up successfully after the container stopsAllows to create and delete named network namespaces Description for the changelog       The text was updated successfully but these errors were encountered
Sterner warnings and deprecation notice for unauthenticated tcp access;People keep doing this and getting pwned because they accidentally leftit exposed to the internet.The warning about doing this has been there forever.This introduces a sleep after warning.To disable the extra sleep users must explicitly specify tlsfalseor tlsverifyfalseWarning also specifies this sleep will be removed in the next releasewhere the flag will be required if running unauthenticated.       The text was updated successfully but these errors were encountered
Support ulimits on Swarm services.;What I didBump swarmkit to dddefdaaadffcbbab to include dockerswarmkit Ulimits field has been added to the ContainerSpec API type such that the Docker daemon API can now take ulimits when declaring new services updatin
vendor vishvanandanetns dbceaaecccfacbdacd;full diff vishvanandanetnsabb...dbceUse golang.orgxsysunix instead of syscallSet OCLOEXEC when opening a network namespaceFixes the container?Çÿs netns fds leak causing the container netns to notclean up successfully after the container stopsAllows to create and delete named network namespaces Description for the changelog       The text was updated successfully but these errors were encountered
vendor dockerswarmkit aaeacbfdebaacff;full diff dockerswarmkitd...aaeFix bad comment on capabilitydrop field in protobuf def       The text was updated successfully but these errors were encountered
vendor update containerdcontinuity efbcdfebdcbdebddba;full diff containerdcontinuityc...efbcRelevant changessysxxattr fix and improvefix getxattrAll change initial buffer size to to prevent unneedediterations and change the logic to get the real size in case we get ERANGErather than doubling the bufferimprove listxattrAll refactor for readability prevent calling listxattrtwice. Handle condition when attributes size is changed in between the twocalls to listxattr.Remove Windows' Readlink forkDrops support for Go . and underFix sameFile to recognize empty files as the samefixes Empty files can diff as modified even when they're not       The text was updated successfully but these errors were encountered
. vendor mobybuildkit v..gdafbf;full diff mobybuildkitaef...dafbfmobybuildkit v. backport cache avoid nil dereferencefixes mobybuildkit panic interface conversion interface is nil not int       The text was updated successfully but these errors were encountered
. backport bump up rootlesskit to v..;Fix port forwarder resource leak rootlesscontainersrootlesskit.Changes rootlesscontainersrootlesskitv.....v..Cherrypick        The text was updated successfully but these errors were encountered
bump up rootlesskit to v..;Fix port forwarder resource leak rootlesscontainersrootlesskit.Changes rootlesscontainersrootlesskitv.....v..       The text was updated successfully but these errors were encountered
. backport plugin fix a double RLock bug;backport of        The text was updated successfully but these errors were encountered
. backport Assorted swagger fixes;backport of Swagger fix type for BuildCache CreatedAt and LastUsedAtfixes for the . branch Swagger move system version response to definitionscloses        The text was updated successfully but these errors were encountered
. backport Remove apt.dockerproject.org from test;backport of        The text was updated successfully but these errors were encountered
Remove apt.dockerproject.org from test;to address comment       The text was updated successfully but these errors were encountered
. vendor mobybuildkit v..gaefe;full diff mobybuildkitcbe...aefBrings in the cherrypicks from mobybuildkit and mobybuildkit Add force flag in git fetch commandFix socket handling during copy Treat unix sockets as regular filesRemotecache Only visit each item once when walking results.       The text was updated successfully but these errors were encountered
Swagger fix type for BuildCache CreatedAt and LastUsedAt;fixes        The text was updated successfully but these errors were encountered
API add prune events;Relates to linuxkitlinuxkitThis patch adds a new prune event type to indicate that pruning of a resourcetype completed.This eventtype can be used on systems that want to perform actions afterresources have been cleaned up. For example Docker Desktop performs an fstrimafter resources are deleted httpsgithub.comlinuxkitlinuxkittreev.pkgtrimafterdelete.While the current remove destroy events can provide information on mostresources there is currently no event triggered after the BuildKit buildcacheis cleaned.Prune events have a reclaimed attribute indicating the amount of space thatwas reclaimed in bytes. The attribute can be used for example to use as athreshold for performing fstrim actions. Reclaimed space for network eventswill always be but the field is added to be consistent with prune events forother resources.To test this patchCreate some resourcesfor i in foo bar baz do \ docker network create networki \ docker volume create volumei \ docker run d name containeri v volumeivolume busybox sh c 'truncate s M somefile truncate s M volumefile' \ docker tag busyboxlatest imagei \donedocker pull alpinedocker pull nginxalpineecho e FROM busybox\nRUN truncate s M bigfile | DOCKERBUILDKIT docker build Start listening for prune events in another shelldocker events filter eventprunePrune containers networks volumes and buildcachedocker system prune af volumesSee the events that are returneddocker events filter eventpruneT.Z container prune reclaimedT.Z network prune reclaimedT.Z volume prune reclaimedT.Z image prune reclaimedT.Z builder prune reclaimed Description for the changelogGET events now returns prune events after pruning resources have completed. Prune events are returned for container network volume image and builder and have a reclaimed attribute indicating the amount of space reclaimed in bytes. A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Deprecate KernelMemory;What I didDeprecate Kernel Memory.Kernel memory limit is not supported on cgroup v. Even on cgroup v kernel memory limit kmem.limitinbytes has been deprecated since kernel ..torvaldslinuxFix  How to verify it docker run
statsV implement Failcnt;What I didImplemented MemoryStats.Failcnt for cgroup v How I did itUsed the oom field of memory.events file How to verify it docker run it rm name foo memory M alpine dd ifdevurandom ofdevnull bsM countKilled dd if
Replace swarm Capabilites API with cap adddrop API;Replace service Capabilities w adddrop APIAfter dicussing with maintainers it was decided putting the burden ofproviding the full cap list on the client is not a good design.Instead we decided to follow along with the container API and use capadddrop.This brings in the changes already merged into swarmkit.       The text was updated successfully but these errors were encountered
. backport Swagger Updates;Backports of swagger clarify the meaning of Image field in ContainerInspect endpoint swagger reformat and wrap to chars swagger add DeviceRequests to container create inspect example docs add example calculations to container stats APIfixes dockerdocker.github.io docs sync swagger changes to v. and v. swagger sync v. and v. formatting with current version       The text was updated successfully but these errors were encountered
docs sync swagger changes to v. and v.;Updates the v. and v. swagger files with updates from swagger clarify the meaning of Image field in ContainerInspect endpoint swagger add DeviceRequests to container create inspect example docs add example calculations to container stats API Document message parameter to imagescreate Swagger add missing container Health docs and add ContainerState as definition       The text was updated successfully but these errors were encountered
docs add example calculations to container stats API;Signedoffby Velko Ivanov vivanovdeeperplane.comaddresses dockerdocker.github.io What I didAdded some formulas to the docs for calculating container stats from data obtained by the API. They are the same that are used in the cli tool for the stats command. Description for the changelogAdded examples for calculating container stats from data obtained by the API       The text was updated successfully but these errors were encountered
Fix log file rotation test.;fixes The test was looking for the wrong file name.Since compression happens asyncronously sometimes the test wouldsucceed and sometimes fail.This change makes sure to wait for the compressed version of the filesince we can't know when the compression is going to occur.Taken from        The text was updated successfully but these errors were encountered
apitypes omit empty DefaultAddressPools;Also a small followup to I was revendoring moby in the CLI and realised that we didn't add an omitempty to this field I think it would be ok to add that       The text was updated successfully but these errors were encountered
docs add mention of DefaultAddressPools to API history;small followup to . I didn't want to block merging of that PR because of this ?ÿà       The text was updated successfully but these errors were encountered
Swagger move system version response to definitions;Also made the same change to the v. and v. swagger files used in the docscloses        The text was updated successfully but these errors were encountered
. backport Bump Golang ..;backport of and        The text was updated successfully but these errors were encountered
vendor update buildkit to dfe;full diffsmobybuildkitdfe...dfmobybuildkit use containerdsys to detect UserNamespacesmobybuildkit git support for token authenticationmobybuildkit image export Use correct media type when creating new layer blobsmobybuildkit progressui fix logs time formattingmobybuildkit push dedupe push handlerswork around containerd issue on parallel pushes containerdcontainerdmobybuildkit secrets allow providing secrets with envSupport secret idfooenvMYENV as an alternative for storing a secret value to a file.secret idGITAUTHTOKEN will load env if it exists and the file does not.mobybuildkit solver fix marking already cached vertex as cancelledmobybuildkit session track sessions with a group constructFixes issues described in mobybuildkit commentmobybuildkit Update Executor interface for Run and Execmobybuildkit inline cache fix handling of duplicate blobsFixes mobybuildkit cachefrom working unreliablyFixes Image built from cached layers is missing datamobybuildkit Use containerd's default runtime shim instead of hardcoded runtime vmobybuildkit Split LocalMounter.Mount into Windows and Unixmobybuildkit remotecache Only visit each item once when walking resultsImproves performance and CPU use on bigger graphsmobybuildkit add RunExec to FrontendLLBBridge interfacetonistiigifsutilccdb...aeadDrop support for go. and use errors.Is for errordetectionUpdate dependencies       The text was updated successfully but these errors were encountered
Use IsServing to determine if cd client is ready;Instead of sleeping an arbitrary amount of time using the client totell us when it's ready so we can start processing events sooner.       The text was updated successfully but these errors were encountered
Work around missing shim event;Call DeleteTask when processe is not foundIn this case we are sending a signal to the container typically thiswould be SIGKILL or SIGTERM but could be any signal but containerreports that the process does not exist.At the point this code is happening dockerd thinks that the containeris running but containerd reports that it is not.Since containerd reports that it is not running try to collect the exitstatus of the container from containerd and mark the container asstopped in dockerd.Repro this problem like soiddocker run d busybox toppkill containerd pkill topdocker stop idWithout this change docker stop id will first try to send SIGTERMwait for exit then try SIGKILL.Because the process doesn't exist to begin with no signal is sent andso nothing happens.Since we won't receive any event here to process the container cannever be marked as stopped until the daemon is restarted.With the change docker stop succeeds immediately since the process isalready stopped and we mark the container as stopped.There are definitely some other places in the stack that could use someimprovement here but this helps people get out of a sticky situation.With io.containerd.runc.v no event is ever recieved by docker becausethe shim quits trying to send the event.With io.containerd.runtime.v.linux the TastExit event is sent beforedockerd can reconnect to the event stream and we miss the event.No matter what we shouldn't be reliant on the shim doing the rightthing here nor can we rely on a steady event streamRelated to        The text was updated successfully but these errors were encountered
Bump Golang ..;full diff golanggogo.....go..go.. released includes fixes to the compiler vet and thedatabasesql nethttp and reflect packages. See the Go .. milestone onthe issue tracker for detailshttpsgithub.comgolanggoissuesqmilestoneAGo..labelACherryPickApproved       The text was updated successfully but these errors were encountered
. vendor mobybuildkit v..gcbef;full diff mobybuildkitdcafa...cbemobybuildkit contenthash ignore system and security xattrs in calculationfixes mobybuildkit COPY cache not reused depending on SELinux environmentfixes commentmobybuildkit contenthash allow security.capability in cache checksummobybuildkit inline cache fix handling of duplicate blobsfixes mobybuildkit cachefrom working unreliably       The text was updated successfully but these errors were encountered
testing bump dockerpy ..;full diff dockerdockerpy.......       The text was updated successfully but these errors were encountered
Add more error details on plugin get;Seeing this ErrNotImplements in some of our logs and it's not veryhelpful because we don't know what plugin is causing it or even what therequested interface is.messagelegacy plugin Plugin does not implement the requested driver       The text was updated successfully but these errors were encountered
Remove unused useShimV;This function was removed in the Linux code as part of ffa but was not removed in the Windows code.       The text was updated successfully but these errors were encountered
hackvendor add check for vendored archivetar;relates to relates to        The text was updated successfully but these errors were encountered
Bump Go ..;Includes security fixes to the cryptox and nethttp packages.httpsgithub.comgolanggoissuesqmilestoneAGo..labelACherryPickApproved       The text was updated successfully but these errors were encountered
cgroup v change the default runtime to io.containerd.runc.v;What I didChanged the default runtime to io.containerd.runc.v.Fix Replace The previous default runtime io.containerd.runtime.v.linux is being deprecated containerdcontainerdio.containerd.runc.v is available since containerd v
Remove use of mattngoshellwords;This dependency was only used in two locations and didn't appear to be really needed for how it was used.supersedes closes        The text was updated successfully but these errors were encountered
Remove some outdated terminology where possible;Replace uses of blacklistwhitelist where possibleReplace uses of masterslave where possibleThere's still some occurrences in the code that are not under our control rslave mount propagation master branches in git repositories we reference and our own master branch masterslave for IPVlan interfaces and whitelist used by vndr I'll open a PR for that       The text was updated successfully but these errors were encountered
. backport vendor hcsshim dcbffdbaebbaa;CherrypickFixes  Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
vendor libnetwork eafdfcaedca;supersedes closes full diff mobylibnetworkeaed...eafmobylibnetwork Add docker interfaces to firewalld docker zonefixes dockerforlinux DNS Not Resolving under Network CentOSfixes mobylibnetwork Port Forwarding does not work on RHEL with Firewalld running with FirewallBackendnftablesstore.getNetworksFromStore remove unused error returnmobylibnetwork Fix 'failed to get network during CreateEndpoint'fixesaddresses dockerforlinux failed to get network during CreateEndpointmobylibnetwork master bridge disable IPv router advertisementsmobylibnetwork log error instead if disabling IPv router advertisement failedfixes dockerforlinux Shouldn't be fatal Unable to disable IPv router advertisement open procsysnetipvconfdockeracceptra readonly file systemSignedoffby Sebastiaan van Stijn githubgone.nl What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
daemonstats use const for clockTicksPerSecond;See the discussion on commentThe value comes from C.sysconfC.SCCLKTCK and on Linux it's a constant which is safe to be hard coded. See for example in the Musl libc source code httpsgit.musllibc.orgcgitmusltreesrcconfsysconf.cnThis removes the github.comopencontainersrunclibcontainersystem dependency from this package.       The text was updated successfully but these errors were encountered
. vendor buildkit dcafaffcbbefdfffbeccb v..gdcafaf;full diff mobybuildkitadbf...dcafasolver avoid recursive loop on cacheexportfixes mobybuildkit exportcache option crashes buildkitd on custom frontendfixes mobybuildkit Dockerd buildkit in a infinite loop and burning cpufixes .. goroutine stack exceeds byte limitfixes Multistage docker build fails with unexpected EOF Description for the changelog Builder Next avoid recursive loop on cacheexport A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Runtime configure shim;What I didMove all shim config into runtime type and adds new builtin runtimes to allow explicitly switching from runcshimv and runcshimv How I did itAdd a ShimConfig type to types.Runtime which stores the shim config.The daemon then uses
vendor runc libraryv..rcgad;full diff opencontainersruncv..rc...v..rcvendor containerd efafebbabdbcaef containerdcontainerdcd...efcontainerdfifoffa...favendor runc adffdaebacbeef opencontainersruncv..rc...avendor bbolt v.. etcdiobboltv.....v..add go.modfix panic runtime error unsafe pointer conversion Go .vendor prometheus dependency.vendor protobuf v.. golangprotobufv.....v..ptypes regenerate with v.. update for go. gofmtgo.mod set go version to go.       The text was updated successfully but these errors were encountered
swagger sync v. and v. formatting with current version;To allow for easier comparing between versions. Some followups may be coming noticed some differences that I need to look into       The text was updated successfully but these errors were encountered
swagger add DeviceRequests to container create inspect example;swagger move NetworkingConfig to definitionsswagger add DeviceRequests to container create inspect examplefixes        The text was updated successfully but these errors were encountered
update containerd to v..;Full diff containerdcontainerdv.....v..The sixth patch release for containerd . includes a release process fix to not require the latest libseccomp. Priorreleases in this series were pinned to libseccomp .. and this update corrects the error in the v.. release whichlinked to the latest libseccomp.Notable UpdatesPin libseccomp to .. for the GH Actionsbased release.yml containerdcontainerdThere are no substantive changes in this upgrade.        The text was updated successfully but these errors were encountered
Set minimum memory limit to M to account for higher startup memory use;fixes low memory on start causing strange failure conditionaddresses Containers with memory limit M fail with obscure error messagerelates to opencontainersrunc CVE Runc uses more memory during start up after the fixFor some time we defined a minimum limit for memory limits to account foroverhead during startup and to supply a reasonable functional container.Changes in the runtime runc introduced a higher memory footprint during containerstartup which now lead to obscure errormessages that are unfriendly for usersrun rm memorym alpine echo successdocker Error response from daemon OCI runtime create failed containerlinux.go starting container process caused processlinux.go container init caused \processlinux.go setting cgroup config for procHooks process caused \\\failed to write \\\\\\\\\\\\\\ to \\\\\\\sysfscgroupmemorydockercdfebdfffceebdbdddbdmemory.limitinbytes\\\\\\\ write sysfscgroupmemorydockercdfebdfffceebdbdddbdmemory.limitinbytes device or resource busy\\\\ unknown.ERRO error waiting for container context canceledContainers that fail to start because of this limit will not be marked as OOMKilledwhich makes it harder for users to find the cause of the failure.Note that after this memory is only required during startup of the container. Afterthe container was started the container may not consume this memory and limitscould manually be lowered for example an alpine container running only a shellcan run with k of memoryecho sysfscgroupmemorydockeracddfbebcfccdfbddaefaaeeacacmemory.limitinbytesHowever restarting the container will reset that manual limit to the container'sconfiguration. While docker container update would allow for the updated limit tobe persisted restarting the container after updating produces the same error messageagain so we cannot use different limits for docker run docker create and docker update.This patch raises the minimum memory limnit to M so that a better errormessage isproduced if a user tries to create a container with a memorylimit that is too lowdocker create memorym alpine echo successdocker Error response from daemon Minimum memory limit allowed is MB. Description for the changelog Raise minimum memory limit to M to account for higher memory use by runtimes during container startup A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Fix status code for missing volumesfrom container;fixes dockercli Misleading error when using volumesfrom DOESNOTEXIST docker complains about the imageIf the container specified in volumesfrom did not exist theAPI returned a status which was interpreted by the CLI as thespecified image to be missing even if that was not the case.This patch changes these error to return a bad requestBefore this change make sure the image is presentdocker pull busyboxdocker create volumesfromnosuchcontainer busybox Unable to find image 'busyboxlatest' locally latest Pulling from librarybusybox Digest shacffcdfaafbbbeacffa Status Image is up to date for busyboxlatest Error response from daemon No such container nosuchcontainerAfter this change make sure the image is presentdocker pull busyboxdocker create volumesfromnosuchcontainer busybox Error response from daemon No such container nosuchcontainer Description for the changelog Fix incorrect status code being returned by the API leading to docker run and docker create triggering am image pull when using volumesfrom that's pointing to a nonexisting container. A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
update containerd to v..;Full diff containerdcontainerdv.....v..The fifth patch release for containerd . includes bug fixes related to cleanup of IO and shim processes.Notable UpdatesCleanup allocated resources in case of a binary IO error containerdcontainerdFix image usage calculation error containerdcontainerdMake killing shims more resilient containerdcontainerdshim v runc propagate options.Root to Cleanup containerdcontainerdBump Golang .. containerdcontainerd       The text was updated successfully but these errors were encountered
seccomp allow 'rseq' syscall in default seccomp profile;Restartable Sequences rseq are a kernelbased mechanism for fastupdate operations on percore data in userspace. Some libraries likethe newest version of Google's TCMalloc depend on it .This also makes dockers default seccomp profile on par with systemd'swhich enabled 'rseq' in early . httpsgoogle.github.iotcmallocdesign.html systemdsystemdfeebe       The text was updated successfully but these errors were encountered
info improve WARNING Running in rootlessmode without cgroup;The cgroup v mode uses systemd driver by default.Suggesting to set execopt native.cgroupdriversystemd isn't meaningful.       The text was updated successfully but these errors were encountered
dockerdrootless.sh support new containerd shim socket path convention;The new shim socket path convention hardcodes runcontainerd containerdcontainerddockerdrootless.sh is updated to hide the rootful runcontainerd from the mount namespace of the rootless dockerd.       The text was updated successfully but these errors were encountered
fix typos and grammar in docs;Signedoffby jieniu jieniusoutlook.com What I didFix typos and grammar How I did itFix typos and grammar How to verify itNA Description for the changelogImprove documentation by fixing typos and grammar       The text was updated successfully but these errors were encountered
chrootarchive fix conversion from int to string yields a string of one rune;update test to fix go . linting failurepkgchrootarchivearchivetest.go conversion from int to string yields a string of one runerelates to golanggo        The text was updated successfully but these errors were encountered
fix gotestsum.installer installing wrong version;When using go modules go build will always fetch the latestversion of the package so ignores the version we previously go get'd.Instead of running go get and go build separately this patch usesgo get without the d option to do it all in one step.Given that this binary is only used for testing and only used inside theDockerfile we should consider inlining this step in the Dockerfile itselfbut keeping that separate for now.       The text was updated successfully but these errors were encountered
Switch all Dockerfiles to use buster variant;Commit eabe switched the main Dockerfile to the buster variant but did not update some of the other Dockerfiles.       The text was updated successfully but these errors were encountered
project remove obviously outdated docs;Remove the following filesARM.md ARM hosts including ARM are fully supported nowIRCADMINISTRATION.md IRC has gonePACKAGEREPOMAINTENANCE.md debrpm has moved to httpsgithub.comdockerdockercepackagingTOOLS.md most tools except Jenkins are unusedunmaintained       The text was updated successfully but these errors were encountered
contrib remove dockermachineinstallbundle.sh;Docker Machine is deprecated now       The text was updated successfully but these errors were encountered
contrib remove outdated examples and files;contrib remove outdated desktopintegration examplesThese Dockerfiles haven't been maintained and more uptodate versions can be found in Jess's github repositorychromium httpsgithub.comjessfrazdockerfilestreeebffcafcdfaafchromiumgparted httpsgithub.comjessfrazdockerfilestreeebffcafcdfaafgpartedcontrib remove outdated vagrant docscontrib remove unused REVIEWERS files       The text was updated successfully but these errors were encountered
dockerdrootless.sh allow specifying DOCKERDROOTLESSROOTLESSKITPORTDRIVER;What I didThe default port driver builtin might not be always preferrable as it drops src IP information containerspodmanNow the port driver can be changed to slirpnetns via the environment variable DOCKERDROOTLESSROOTLESSKITPORTDRIVER
Upgrading the versions of images in Dockerfile.;In order to run tests at mipsel device.Now officialimages has supported the following images for mipsel.buildpackdepsstretchbuildpackdepsbusterdebianstretchdebianbusterBut officialimages does not support the following images for mipsel.debianjessiebuildpackdepsjessieSignedoffby wanghuaiqing wanghuaiqingloongson.cn What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Revendor hcsshim to fix image import bug;This change brings in a single new commit from Microsofthcsshim. Thecommit fixes an issue when unpacking a Windows container layer whichcould result in incorrect directory timestamps.This manifested most significantly in an impact to startup times ofsome Windows container images such as anything based on servercore. This can be verified by running the mcr.microsoft.comwindowsnanoserver image both with and without this fix.Fixes Signedoffby Kevin Parsons kevparmicrosoft.com       The text was updated successfully but these errors were encountered
TestUserNoEffectiveCapabilitiesNetBindService conditionally set net.ipv.ipunprivilegedportstart;fixes Prevent the test from failng on environments where this sysctl is not supported.       The text was updated successfully but these errors were encountered
. Enable build on DragonflyNetBSD;What I didEnable build on DragonflyNetBSD as it is required by upcoming Swarm support in the prometheus monitoring system. Description for the changelogEnable building the client for DragonflyNetBSD A picture of a cute animal not mandatory but
Enable client on netbsd and dragonfly;What I didEnable the build of the client for NetBSD. This is required for the native integration of docker swarm in the Prometheus monitoring system. Backport to the stable release is appreciated too. Description for the changelogclient add suppor
TestDaemonDNSFallback increase timeout to reduce flakiness;per comment       The text was updated successfully but these errors were encountered
. vendor dockerlibnetwork aabaabaaaddcfcb bump. branch;full diff mobylibnetworkd...aabamobylibnetwork Fix 'failed to get network during CreateEndpoint'backport of mobylibnetworkaddresses dockerforlinuxpossibly addresses possibly addresses mobylibnetworkpossibly addresses mobylibnetworkmobylibnetwork log error instead if disabling IPv router advertisement failedbackport of mobylibnetworkfixes dockerforlinuxNote that we may want to have the local changes from as well but that one isn't merged yet on master Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
vendor golang.orgxtext v.. CVE;full diff golangtextv.....v..includes a fix for CVE golangtextae       The text was updated successfully but these errors were encountered
fix code note when push all tags;when i watch the code of pushvI see some node is not correct.The node shoud bepush not pull .       The text was updated successfully but these errors were encountered
use containerdsys to detect UserNamespaces;The implementation in libcontainersystem is quite complicatedand we only use it to detect if usernamespaces are enabled.In addition the implementation in containerd uses a sync.Onceso that detection and readingparsing procselfuidmap isonly performed once.       The text was updated successfully but these errors were encountered
buildernext update to new buildkit and fix upgrade bugs;fixes Upgrades buildkit to bring in buildkit side fix mobybuildkit       The text was updated successfully but these errors were encountered
Fix windows log file rotation with readers;This fixes the case where log rotation fails on Windows while there areclients reading container logs.Fixes        The text was updated successfully but these errors were encountered
Make script pass shellcheck;What I didMake the downloadfrozenimagev.sh script pass shellcheck How I did itPrefer p q as p a q is not well defined.Quote unquoted variablelocal and assign separately to avoid masking return values.split layersFs with m
dockerdrootlesssetuptool.sh use safer XRD on nonsystemd hosts;tmpdockerid u is not a good candidate as XDGRUNTIMEDIRbecause it might be already created by another user.The new path is HOME.dockerrun.Cherrypicked from dockerdockerinstall       The text was updated successfully but these errors were encountered
. backport intcliTestRunInvalidCPUShares fix for newer runc;backport of for the . branchA newer runc changed a couple of certain error messages checked in thistest to be lowercased which lead to a mismatch in this test case.Fix is to remove The which was replaced with the. opencontainersrunc       The text was updated successfully but these errors were encountered
intcliTestRunInvalidCPUShares fix for newer runc;A newer runc changed a couple of certain error messages checked in thistest to be lowercased which lead to a mismatch in this test case.Fix is to remove The which was replaced with the. opencontainersruncFixes opencontainersrunc       The text was updated successfully but these errors were encountered
info add warnings about missing blkio cgroup support;These warnings were only logged and could therefore be overlooked by users. This patch makes these more visible by returning them as warnings in the API response.We should probably consider adding boolean fields for these as well so that they can be consumed in other ways. In addition some of these warnings could potentially be grouped to reduce the number of warnings that are printed. Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
. backport Bump Golang ..;backport of        The text was updated successfully but these errors were encountered
. backport allocateNetwork fix network sandbox not cleaned up on failure;partial backport only the first commit of The defer function was checking for the local err variable not on the error that was returned by the function. As a result the sandbox would never be cleaned up for containers that used none networking and a failiure occured during setup. Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Bump Golang ..;What I didfull diff golanggogo.....go..go.. released includes fixes to the runtime and the gotypes and mathbig packages. See the Go .. milestone on our issue tracker for details.httpsgithub.comgolanggoissue
Fixes skip empty lines;What I didThis is a trivial fix for  How I did itadd empty check and return directlyfunc s syslogger Logmsg logger.Message error if lenmsg.Line return nil      
cgroup unshare cgroupns by default regardless to API version;What I didFix cgroup mode sets cgroupnsprivate by default but the default was overridden to host when API .. How to verify it sudo ls l procnscgrouplrwxrwxrwx root root Jun procnscgroup 'cgroup
intbuildTestBuildWithEmptyLayers prevent panic;The test case panics like that from commentbuildtest.go assertion failed int intpanic runtime error index out of range with length recoveredpanic runtime error index out of range with length The fix is trivial.       The text was updated successfully but these errors were encountered
apitypes remove errdefs dependency;This prevents projects that import only the apitypes package fromalso having to use the errdefs package and because of that containerdas a dependency.Relates to mobylibnetwork and mobylibnetwork comment       The text was updated successfully but these errors were encountered
make install install containerdshimruncv remove useless constants;What I didAdded containerdshimruncv used by cgroup mode to make install How to verify itmake install A picture of a cute animal not mandatory but encouraged?Éº       T
testintegration support cgroup;What I didadded cgroup support for make integration.We don't have actual CI instances yet. Can we use Fedora Vagrant on either GH actions as in containerd or on Travis as in runc  How I did itModified hackdind to initialize nested controll
testing bump dockerpy ..;full diff dockerdockerpy.......       The text was updated successfully but these errors were encountered
Add default sysctls to allow ping sockets and privileged ports with no capabilities;fixes fixes Currently default capability CAPNETRAW allows users to open ICMP echosockets and CAPNETBINDSERVICE allows binding to ports under .Both of these are safe operations and Linux now provides ways thatthese can be set per container to be allowed without any capabiltiesfor non root users. Enable these by default. Users can revert to theprevious behaviour by overriding the sysctl values explicitly.Signedoffby Justin Cormack justin.cormackdocker.compicture by httpstwitter.comCountrysideBen       The text was updated successfully but these errors were encountered
vendor opencontainersselinux v..;full diff opencontainersselinuxv.....v..Implement FormatMountLabel unconditionallyImplementing FormatMountLabel on situations built without selinuxshould be possible the context will be ignored if no SELinux is available.Remote potential race condition where mcs label is freedTheorectially if you do not change the MCS Label then we free it and twocommands later reserve it. If some other process was grabbing MCS Labelsat the same time the other process could get the same label. Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
. backport Dockerfile bump CRIU .;backport of fixes ARM builds on ARM agents in our Jenkins.full diff checkpointrestorecriuv....v.New featuresCR of memfd memory mappings and file descriptors.Add time namespace support.Add the read predump mode which uses processvmreadv.Add cgroupyard optionAdd support of the cgroup v freezer.Add support of opened OPATH fds.BugfixesFix CR ia processes on AMDFix crosscompilationMany fixes here and thereImprovementsUse clone with settid to restore processesClean up compel headers.Use the new mount APISignedoffby Sebastiaan van Stijn githubgone.nlcherry picked from commit aSignedoffby Sebastiaan van Stijn githubgone.nl What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
fix stat.Rdev invalid operation mismatched types on mipsel;compile error the stat.Rdev variable and s.Rdev mismatched types on mipselconvert stat.Rdev type to uint explicitlySignedoffby Xiaodong Liu liuxiaodongloongson.cn What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
update runc binary to v..rc;release note httpsgithub.comopencontainersruncreleasestagv..rcvendored library isn't updated in this commit waiting for containerd to vendor runc rc       The text was updated successfully but these errors were encountered
daemon.allocateNetwork include original error in logs;When failing to destroy a stale sandbox we logged that the removal failed but omitted the original error message.       The text was updated successfully but these errors were encountered
Better selection of DNS server;fixes addresses . breaks containers name resolution for non default networks on systems with systemdresolvedfixes addresses Wrong resolv.conf used on Ubuntu systemdresolved enabledfixes addresses dockerforlinux Container etcresolv.conf does not update when runsystemdresolveresolv.conf changesfixes addresses dockerforlinux dockerd should use ... when requestedrelates to mobylibnetwork commentrelates to kubernetessigskind commentCommit eee updated selection of the resolv.conf file to use in situations where systemdresolvd is used as a resolver.If a host uses systemdresolvd the system's etcresolv.conf file isupdated to set ... as DNS which is the local IP address forsystemdresolvd. The DNS servers that are configured by the user will nowbe stored in runsystemdresolveresolv.conf and systemdresolvd actsas a forwarding DNS for those.Originally Docker copied the DNS servers as configured in etcresolv.confas default DNS servers in containers which failed to work if systemdresolvdis used as ... is not available inside the container's networkingnamespace. To resolve this eee insteaddetected if systemdresolvd is in use and in that case copied the upstreamDNS servers from the runsystemdresolveresolv.conf configuration.While this worked for most situations it had some downsides among whichwe're skipping systemdresolvd altogether which means that we cannot takeadvantage of addition functionality provided by it such as perinterfaceDNS serverswhen updating DNS servers in the system's configuration those changes werenot reflected in the container configuration which could be problematic indeveloper scenarios when switching between networks.This patch changes the way we select which resolv.conf to use as templatefor the container's resolv.confin situations where a custom network is attached to the container and theembedded DNS is available we use etcresolv.conf unconditionally. Ifsystemdresolvd is used the embedded DNS forwards external DNS lookups tosystemdresolvd which in turn is responsible for forwarding requests tothe external DNS servers configured by the user.if the container is running in host mode networking we also use theDNS server that's configured in etcresolv.conf. In this situation noembedded DNS server is available but the container runs in the host'snetworking namespace and can use the same DNS servers as the host whichcould be systemdresolvd or DNSMasqif the container uses the default bridge network no embedded DNS isavailable and the container has its own networking namespace. In thissituation we check if systemdresolvd is used in which case we skipsystemdresolvd and configure the upstream DNS servers as DNS for thecontainer. This situation is the same as is used currently which meansthat dynamically switching DNS servers won't be supported for thesecontainers.Signedoffby Sebastiaan van Stijn githubgone.nl What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
allocateNetwork fix network sandbox not cleaned up on failure;The defer function was checking for the local err variable not on the error that was returned by the function. As a result the sandbox would never be cleaned up for containers that used none networking and a failiure occured during setup.The second commit is a small refactor allocateNetwork can return early in which case these variables were unused so assign them later in the function.Looks like this was introduced in which was created to address  Description for the changelog       The text was updated successfully but these errors were encountered
remove group name from identity mapping;Signedoffby Akhil Mohan akhil.mohanmayadata.io What I didFixes .removed a check for group name and gid in NewIdentityMapping How I did itgroup name was removed from the argument of NewIdentityMappingremoved caller code which used to search with gid and group name How to verify it Description for the changelogremove group name from identity mapping       The text was updated successfully but these errors were encountered
refactor some CPU RT and CFS code;A couple of patches touching CPU RT and CFS setting code. Should improve performance in CPU RT case and help adopting the runc changes in opencontainersruncUntangle CPU RT controller initCommit fd added code that is doing some very ugly things.In partucular calling cgroups.FindCgroupMountpointAndRoot anddaemon.SysInfoRaw inside a recursivelycalled initCgroupsPathis not a good thing to do.This commit tries to partially untangle this by moving some expensivechecks and calls up in the stack so they at least won't be called multipletimes. This is done in a minimally invasive way meaning Itried hard to not break any logic however weird it is.This also removes double call to MkdirAll not important but it sticksout and renames the function to better reflect what it's doing.This could be reworked more radically but at least this this commitwe are calling expensive functions once and only if necessary.pkgsysinfo rm duplicatesThe CPU CFS cgroupaware scheduler is one single kernel feature nottwo so it does not make sense to have two separate booleansCPUCfsQuota and CPUCfsPeriod. Merge these into CPUCfs.Same for CPU realtime.For compatibility reasons info stays the same for now.Closes        The text was updated successfully but these errors were encountered
pkgsysinfo.applyPIDSCgroupInfo optimize;For some reason commit cf PR chose not to use informationalready fetched and called cgroups.FindCgroupMountpoint instead.This is not a cheap call as it has to parse the whole nine yardsof procselfmountinfo and the info which it tries to get whetherthe pids controller is present is already available from cgMounts map.       The text was updated successfully but these errors were encountered
. Fix dns fallback regression;Fixes fixes Ref mobylibnetworkBackport of        The text was updated successfully but these errors were encountered
Fix dns fallback regression;fixes fixes Ref mobylibnetworkTo run only the test and confirm it fails if vendor commit is revertedTESTSKIPINTEGRATIONCLI TESTINTEGRATIONDIR.integrationnetwork TESTFLAGS'test.run TestDaemonDNSFallback' make testintegration       The text was updated successfully but these errors were encountered
seccomp remove the unused querymodule;What I didRemoved the unused querymodule from seccomp default settings. How I did it How to verify it Description for the changelogquerymodule is only in kernels before Linux ..httpman.orglinuxmanpagesmanquerymodule..html
rmtest fix goroutine leak;Signedoffby Gaurav Singh gauravgmail.com What I didConverted the channel done to a buffered channel How I did itThere is a local unbuffered channel done . The send operation to finished will definitely be executed but the receive operation may not when the select chooses the timeout case. If timeout there will be one goroutine leaked.This PR gives the channel buffer. This PR is quite safe since the behavior of related goroutines won't change except that when timeout no goroutine will be leaked. How to verify itBy monitoring resource usage over time. Description for the changelogUse a buffered channel to avoid goroutine leaking due to timeout. A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Use unique names in integration tests build container image;What I didRemoved hardcoded names used for images tags etc in some integration test folders build container image. Tried to unified a bit variable naming convention. Related to . How I did itCalling the method to retrieve the name of the
. backport Fix bug in gotestsum installer causing dependencies to not be downloaded;backport of the Linuxrelated changes of the Windows Dockerfile in the . branch does not yet install gotestsum so no changes were needed for WindowsBuilding gotestsum started to fail after the repository removed somedependencies on master.What happens is that first we go get the package with go modules disabledGOMODULEoff go get d gotest.toolsgotestsumWhich gets the latest version from master and fetches the dependencies usedon master. Then we checkout the version we want to install for example v..and run go build.However v.. depends on logrus and given that we ran go get for masterthat dependency was not fetched and build fails.This patch modifies the installer to use go modules alternatively we couldprobably run go get . after checking out the v.. versionWe need to modify all installers as it looks like this is a standard patternwe use but other dependencies were not failing yet so this patch onlyaddresses the immediate failure.       The text was updated successfully but these errors were encountered
update containerd binary to v..;release note httpsgithub.comcontainerdcontainerdreleasestagv..       The text was updated successfully but these errors were encountered
Fix bug in gotestsum installer causing dependencies to not be downloaded;Building gotestsum started to fail after the repository removed somedependencies on master.What happens is that first we go get the package with go modules disabledGOMODULEoff go get d gotest.toolsgotestsumWhich gets the latest version from master and fetches the dependencies usedon master. Then we checkout the version we want to install for example v..and run go build.However v.. depends on logrus and given that we ran go get for masterthat dependency was not fetched and build fails.This patch modifies the installer to use go modules alternatively we couldprobably run go get . after checking out the v.. versionWe need to modify all installers as it looks like this is a standard patternwe use but other dependencies were not failing yet so this patch onlyaddresses the immediate failure.       The text was updated successfully but these errors were encountered
. backport Bump Golang ..;backport of for .full diff golanggogo.....go..go.. released includes fixes to the compiler. See the Go ..milestone on the issue tracker for detailshttpsgithub.comgolanggoissuesqmilestoneAGo..labelACherryPickApproved       The text was updated successfully but these errors were encountered
Bump Golang ..;full diff golanggogo.....go..go.. released includes fixes to the compiler. See the Go ..milestone on the issue tracker for detailshttpsgithub.comgolanggoissuesqmilestoneAGo..labelACherryPickApproved       The text was updated successfully but these errors were encountered
NOM;referencedockerclicontainerdcontainerdccSignedoffby Xiaodong Liu liuxiaodongloongson.cn What I did How I did it How to verify it Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
. backport pkgarchive escape symbol in overlay lowerdir;lowerdir needs escaping httpsgithub.comtorvaldslinuxblobv.fsoverlayfssuper.cLLFix Cherrypick        The text was updated successfully but these errors were encountered
Fix flakey test for log file rotate.;No description provided.        The text was updated successfully but these errors were encountered
registry fix mtls config dir passing;doesn't pass mtls config dirs for registries that are not mentioned in main config json. A better approach would be to use a callback so adding new directories would not require a restart but that requires changes to buildkit.Signedoffby Tonis Tiigi tonistiigigmail.com       The text was updated successfully but these errors were encountered
. backport dockerdrootless.sh bump up slirpnetns requirement to v..;slirpnetns v..X turned out not to work with RootlessKit v..rootlesscontainersrootlesskitAs slirpnetns v..X reached EOL on Mar RootlessKit is notgoing to fix support for slirpnetns v..X.Backport        The text was updated successfully but these errors were encountered
buildernext fix layer access bug;fixes After switch to leases all ref IDs use generated IDs meaning thatEnsureLayer hack needs to save the chainID for pulled layers.taoSignedoffby Tonis Tiigi tonistiigigmail.com       The text was updated successfully but these errors were encountered
pkgarchive escape symbol in overlay lowerdir;What I didFix  How I did itReplaceAlllower \\ because lowerdir needs escapinghttpsgithub.comtorvaldslinuxblobv.fsoverlayfssuper.cLL How to verify itRun docker pull osixiaphpldapadminstable on rootless wit
. vendor update buildkit to adbf;Signedoffby Tonis Tiigi tonistiigigmail.com       The text was updated successfully but these errors were encountered
. backport bump up rootlesskit to v..;Supports numeric ID in etcsubuid and etcsubgid .Fix Full changes rootlesscontainersrootlesskitv.....v..Cherrypick        The text was updated successfully but these errors were encountered
add dockerdrootlesssetuptool.sh;What I didAdded contribdockerdrootlesssetuptool.sh.The tool is expected to be used by httpsget.docker.comrootless script.Can be included in RPMDPKG packages as well.Fix Relates to Replaces Same as this PR but written in
Fix TestSwarmManagerAddress to not depend on pretty format;This allows this test to be run on other versions of the CLIfixes one of the failing tests in        The text was updated successfully but these errors were encountered
bump up rootlesskit to v..;Supports numeric ID in etcsubuid and etcsubgid .Fix Full changes rootlesscontainersrootlesskitv.....v..       The text was updated successfully but these errors were encountered
. backport SELinux fix ENOTSUP errors not being detected when relabeling;backport of cherrypick was cleanCommit c updated the opencontainersselinux dependency to v.. which had a breaking change in the errors that were returned.Before v.. the raw syscall.ENOTSUP was returned if the underlying filesystem did not support xattrs but later versions wrapped the error which caused our detection to fail.This patch uses errors.Is to check for the underlying error. This requires github.compkgerrors v.. or above older versions could use errors.Cause but are not compatible with native wrapping of errors in Go . and up and could potentially cause these errors to not being detected again.Fixes for . Description for the changelogFix Mounting Docker NFS Volume with selinux enabled failing with operation not supported A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
SELinux fix ENOTSUP errors not being detected when relabeling;Commit c updated the opencontainersselinux dependency to v.. which had a breaking change in the errors that were returned.Before v.. the raw syscall.ENOTSUP was returned if the underlying filesystem did not support xattrs but later versions wrapped the error which caused our detection to fail.This patch uses errors.Is to check for the underlying error. This requires github.compkgerrors v.. or above older versions could use errors.Cause but are not compatible with native wrapping of errors in Go . and up and could potentially cause these errors to not being detected again.Addresses for master Description for the changelogFix Mounting Docker NFS Volume with selinux enabled failing with operation not supported A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
Don't use init to set unpigz path;func init is evil here and the logrus calls are being made beforethe logger is even setup.It also means in order to use pigz you have to restart the daemon.Instead this takes a small hit and resolves pigz on each extraction.In the grand scheme of decompressing this is a very small hit.Closes        The text was updated successfully but these errors were encountered
vendor gorillamux v..;full diff gorillamuxv.....v..v.. addresses a number of performance improvements bugs and documentationimprovements. httpsgithub.comgorillamuxreleasestagv..Reduce allocations in routeRegexp.getURLQueryFixed golint warningsfix headers regexp test caseFix the CORSMethodMiddleware bug with subroutersRemovecleanup request context helpersGuess the scheme if r.URL.Scheme is unsetAdded capacity to slice creation when capacity is knownModified http status codes using constants provided by the http packagebugfixsubrouter custom methodNotAllowed handler returning Update README selfhost logoRemove TravisCI badgeAdd documentation for using mux to serve a SPASimplify codeAvoid unnecessary conversionUpdate config.yml elithrar Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
API swarm move PidsLimit to TaskTemplate.Resources;This is a follow up to Add API support for PidsLimit on services which implementation followed the Swarm API where PidsLimit is located in ContainerSpec. This is not the desired place for this property so moving the field to TaskTemplate.Resources in our API.After discussing in the maintainers meeting we decided that we should update our API to move PidsLimit to the right location before the .x release a similar change should be made in the SwarmKit API likely keeping the old field for backward compatibility because it was merged some releases back dockerswarmkitdepends on API split types for Resources Reservations and Limitsaddresses the API side of  A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
API split types for Resources Reservations and Limits;This introduces A new type ResourceLimit which allows Limits and Reservations to have different options as it's not possible to make Reservations for some kind of limits.The GenericResources have been removed from the new type and thus from Limits the API did not handle specifying GenericResources as a Limit only as Reservations and this field would therefore always be empty omitted in the Limits case. Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
dockerdrootless.sh bump up slirpnetns requirement to v..;slirpnetns v..X turned out not to work with RootlessKit v.. rootlesscontainersrootlesskitAs slirpnetns v..X reached EOL on Mar RootlessKit is not going to fix support for slirpnetns v..X.       The text was updated successfully but these errors were encountered
vendor spfcobra v.. spfpflag v..;vendor spfcobra v..full diff spfcobrav.....v..Notable ChangesFish completion including support for Go custom completionAPI urgent Rename BashCompDirectives to ShellCompDirectivesRemovereplace SetOutput on Command deprecatedCustom completions coded in Go instead of BashPartial Revert of Correct documentation for InOrStdinApply formatting to templatesRevert change so help is printed on stdout againUpdate mdman to v..update viper to v..Update cmdroot.go example in README.mdvendor spfpflag v..full diff spfpflagv.....v..       The text was updated successfully but these errors were encountered
seccomp Whitelist clockadjtime;What I didfixes  How I did itAllow making the syscall by default seccomp filter.CAPSYSTIME is still required for time adjustment enforced by the kernelkerneltimeposixtimers.c SYSCALLDEFINEclockadjtime const clockidt whi
vendor mobyterm feefafcebdba and dependencies;vendor github.comgooglegocmp v..full diff googlegocmpv.....v..this also adds golang.orgxerrors as dependency because the gocmp package provides support for Go . and up.vendor golang.orgxsys cacbcdfeabbadeacfull diff golangsyscbff...cacvendor mobyterm feefafcebdbafull diff mobytermfcd...fe       The text was updated successfully but these errors were encountered
. logfile Check if log is closed on close error during rotate;This prevents getting into a situation where a container log cannot makeprogress because we tried to rotate a file got an error and now thefile is closed. The next time we try to write a log entry it will tryand rotate again but error that the file is already closed.I wonder if there is more we can do to beef up this rotation logic.Found this issue while investigating missing logs with errors in thedocker daemon logs likeFailed to log message for jsonfile error closing file close filefile already closedI'm not sure why the original rotation failed since the data was nolonger available.Cherrypicks        The text was updated successfully but these errors were encountered
logfile Check if log is closed on close error during rotate;This prevents getting into a situation where a container log cannot makeprogress because we tried to rotate a file got an error and now thefile is closed. The next time we try to write a log entry it will tryand rotate again but error that the file is already closed.I wonder if there is more we can do to beef up this rotation logic.Found this issue while investigating missing logs with errors in thedocker daemon logs likeFailed to log message for jsonfile error closing file close filefile already closedI'm not sure why the original rotation failed since the data was nolonger available.       The text was updated successfully but these errors were encountered
vendor golang.orgxsys cbffcbbfcebfdbc;full diff golangsysdeae...cbff       The text was updated successfully but these errors were encountered
vendor update containerd cdbabbbcdabbcdea;vendor update containerd becbabfbbcbffull diff containerdcontainerdd...cddepends on these PR's to have the dependencies match but I don't think there's a strict requirement in those changes vendor opencontainersselinux v.. vendor opencontainersruntimespec v.. vendor Microsofthcsshim v.. vendor.conf add version comments vendor golang.orgxsys cbffcbbfcebfdbc       The text was updated successfully but these errors were encountered
vendor.conf add version comments;These dependencies have tagged releases and we vendor a tagged release or have tagged releases but we're currently vendoring from master. Add a comment to give some clue what version we're vendoring.       The text was updated successfully but these errors were encountered
Fix curl progress flags;What I didFix wrong curl progress flags How I did itChange progress to progressbar on calls to curl and fetchblob which in turn calls curl How to verify it.contribdownloadfrozenimagev.sh dummy ubuntulatestwill run successfully
vendor Microsofthcsshim v..;full diff microsofthcsshimv.....v..       The text was updated successfully but these errors were encountered
vendor opencontainersruntimespec v..;full diff opencontainersruntimespecdb...v..       The text was updated successfully but these errors were encountered
vendor opencontainersselinux v..;full diff opencontainersselinuxv.....v..       The text was updated successfully but these errors were encountered
Dockerfile bump CRIU .;full diff checkpointrestorecriuv....v.New featuresCR of memfd memory mappings and file descriptors.Add time namespace support.Add the read predump mode which uses processvmreadv.Add cgroupyard optionAdd support of the cgroup v freezer.Add support of opened OPATH fds.BugfixesFix CR ia processes on AMDFix crosscompilationMany fixes here and thereImprovementsUse clone with settid to restore processesClean up compel headers.Use the new mount API       The text was updated successfully but these errors were encountered
. backport Move schema deprecation notice;backport of fixes dockerforlinux for .Currently we show this deprecation notice for any error returned by aregistry.Registries can return an error for any number of reasons.Instead let's show the deprecation notice only if the fallback wassuccessful. Description for the changelog A picture of a cute animal not mandatory but encouraged       The text was updated successfully but these errors were encountered
